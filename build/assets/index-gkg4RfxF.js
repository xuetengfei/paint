function ex(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const o in n)if(o!=="default"&&!(o in t)){const i=Object.getOwnPropertyDescriptor(n,o);i&&Object.defineProperty(t,o,i.get?i:{enumerable:!0,get:()=>n[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(o){if(o.ep)return;o.ep=!0;const i=r(o);fetch(o.href,i)}})();function s0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var a0={exports:{}},Su={},l0={exports:{}},vt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ba=Symbol.for("react.element"),rx=Symbol.for("react.portal"),nx=Symbol.for("react.fragment"),ox=Symbol.for("react.strict_mode"),ix=Symbol.for("react.profiler"),sx=Symbol.for("react.provider"),ax=Symbol.for("react.context"),lx=Symbol.for("react.forward_ref"),ux=Symbol.for("react.suspense"),cx=Symbol.for("react.memo"),hx=Symbol.for("react.lazy"),wp=Symbol.iterator;function dx(t){return t===null||typeof t!="object"?null:(t=wp&&t[wp]||t["@@iterator"],typeof t=="function"?t:null)}var u0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},c0=Object.assign,h0={};function ps(t,e,r){this.props=t,this.context=e,this.refs=h0,this.updater=r||u0}ps.prototype.isReactComponent={};ps.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ps.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function d0(){}d0.prototype=ps.prototype;function Od(t,e,r){this.props=t,this.context=e,this.refs=h0,this.updater=r||u0}var Dd=Od.prototype=new d0;Dd.constructor=Od;c0(Dd,ps.prototype);Dd.isPureReactComponent=!0;var xp=Array.isArray,f0=Object.prototype.hasOwnProperty,Bd={current:null},p0={key:!0,ref:!0,__self:!0,__source:!0};function g0(t,e,r){var n,o={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)f0.call(e,n)&&!p0.hasOwnProperty(n)&&(o[n]=e[n]);var l=arguments.length-2;if(l===1)o.children=r;else if(1<l){for(var c=Array(l),h=0;h<l;h++)c[h]=arguments[h+2];o.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)o[n]===void 0&&(o[n]=l[n]);return{$$typeof:ba,type:t,key:i,ref:a,props:o,_owner:Bd.current}}function fx(t,e){return{$$typeof:ba,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Nd(t){return typeof t=="object"&&t!==null&&t.$$typeof===ba}function px(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Sp=/\/+/g;function pc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?px(""+t.key):e.toString(36)}function ul(t,e,r,n,o){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ba:case rx:a=!0}}if(a)return a=t,o=o(a),t=n===""?"."+pc(a,0):n,xp(o)?(r="",t!=null&&(r=t.replace(Sp,"$&/")+"/"),ul(o,e,r,"",function(h){return h})):o!=null&&(Nd(o)&&(o=fx(o,r+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(Sp,"$&/")+"/")+t)),e.push(o)),1;if(a=0,n=n===""?".":n+":",xp(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+pc(i,l);a+=ul(i,e,r,c,o)}else if(c=dx(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+pc(i,l++),a+=ul(i,e,r,c,o);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Da(t,e,r){if(t==null)return t;var n=[],o=0;return ul(t,n,"","",function(i){return e.call(r,i,o++)}),n}function gx(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ir={current:null},cl={transition:null},mx={ReactCurrentDispatcher:ir,ReactCurrentBatchConfig:cl,ReactCurrentOwner:Bd};vt.Children={map:Da,forEach:function(t,e,r){Da(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Da(t,function(){e++}),e},toArray:function(t){return Da(t,function(e){return e})||[]},only:function(t){if(!Nd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};vt.Component=ps;vt.Fragment=nx;vt.Profiler=ix;vt.PureComponent=Od;vt.StrictMode=ox;vt.Suspense=ux;vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mx;vt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=c0({},t.props),o=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Bd.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)f0.call(e,c)&&!p0.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];n.children=l}return{$$typeof:ba,type:t.type,key:o,ref:i,props:n,_owner:a}};vt.createContext=function(t){return t={$$typeof:ax,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sx,_context:t},t.Consumer=t};vt.createElement=g0;vt.createFactory=function(t){var e=g0.bind(null,t);return e.type=t,e};vt.createRef=function(){return{current:null}};vt.forwardRef=function(t){return{$$typeof:lx,render:t}};vt.isValidElement=Nd;vt.lazy=function(t){return{$$typeof:hx,_payload:{_status:-1,_result:t},_init:gx}};vt.memo=function(t,e){return{$$typeof:cx,type:t,compare:e===void 0?null:e}};vt.startTransition=function(t){var e=cl.transition;cl.transition={};try{t()}finally{cl.transition=e}};vt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};vt.useCallback=function(t,e){return ir.current.useCallback(t,e)};vt.useContext=function(t){return ir.current.useContext(t)};vt.useDebugValue=function(){};vt.useDeferredValue=function(t){return ir.current.useDeferredValue(t)};vt.useEffect=function(t,e){return ir.current.useEffect(t,e)};vt.useId=function(){return ir.current.useId()};vt.useImperativeHandle=function(t,e,r){return ir.current.useImperativeHandle(t,e,r)};vt.useInsertionEffect=function(t,e){return ir.current.useInsertionEffect(t,e)};vt.useLayoutEffect=function(t,e){return ir.current.useLayoutEffect(t,e)};vt.useMemo=function(t,e){return ir.current.useMemo(t,e)};vt.useReducer=function(t,e,r){return ir.current.useReducer(t,e,r)};vt.useRef=function(t){return ir.current.useRef(t)};vt.useState=function(t){return ir.current.useState(t)};vt.useSyncExternalStore=function(t,e,r){return ir.current.useSyncExternalStore(t,e,r)};vt.useTransition=function(){return ir.current.useTransition()};vt.version="18.2.0";l0.exports=vt;var A=l0.exports;const K=s0(A),m0=ex({__proto__:null,default:K},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yx=A,vx=Symbol.for("react.element"),wx=Symbol.for("react.fragment"),xx=Object.prototype.hasOwnProperty,Sx=yx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ex={key:!0,ref:!0,__self:!0,__source:!0};function y0(t,e,r){var n,o={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)xx.call(e,n)&&!Ex.hasOwnProperty(n)&&(o[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)o[n]===void 0&&(o[n]=e[n]);return{$$typeof:vx,type:t,key:i,ref:a,props:o,_owner:Sx.current}}Su.Fragment=wx;Su.jsx=y0;Su.jsxs=y0;a0.exports=Su;var _=a0.exports,sh={},v0={exports:{}},Wr={},w0={exports:{}},x0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,X){var j=D.length;D.push(X);t:for(;0<j;){var dt=j-1>>>1,gt=D[dt];if(0<o(gt,X))D[dt]=X,D[j]=gt,j=dt;else break t}}function r(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var X=D[0],j=D.pop();if(j!==X){D[0]=j;t:for(var dt=0,gt=D.length,it=gt>>>1;dt<it;){var zt=2*(dt+1)-1,U=D[zt],ne=zt+1,Ze=D[ne];if(0>o(U,j))ne<gt&&0>o(Ze,U)?(D[dt]=Ze,D[ne]=j,dt=ne):(D[dt]=U,D[zt]=j,dt=zt);else if(ne<gt&&0>o(Ze,j))D[dt]=Ze,D[ne]=j,dt=ne;else break t}}return X}function o(D,X){var j=D.sortIndex-X.sortIndex;return j!==0?j:D.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],h=[],f=1,p=null,g=3,w=!1,C=!1,S=!1,P=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(D){for(var X=r(h);X!==null;){if(X.callback===null)n(h);else if(X.startTime<=D)n(h),X.sortIndex=X.expirationTime,e(c,X);else break;X=r(h)}}function k(D){if(S=!1,x(D),!C)if(r(c)!==null)C=!0,ct(M);else{var X=r(h);X!==null&&et(k,X.startTime-D)}}function M(D,X){C=!1,S&&(S=!1,y(I),I=-1),w=!0;var j=g;try{for(x(X),p=r(c);p!==null&&(!(p.expirationTime>X)||D&&!O());){var dt=p.callback;if(typeof dt=="function"){p.callback=null,g=p.priorityLevel;var gt=dt(p.expirationTime<=X);X=t.unstable_now(),typeof gt=="function"?p.callback=gt:p===r(c)&&n(c),x(X)}else n(c);p=r(c)}if(p!==null)var it=!0;else{var zt=r(h);zt!==null&&et(k,zt.startTime-X),it=!1}return it}finally{p=null,g=j,w=!1}}var b=!1,T=null,I=-1,H=5,R=-1;function O(){return!(t.unstable_now()-R<H)}function F(){if(T!==null){var D=t.unstable_now();R=D;var X=!0;try{X=T(!0,D)}finally{X?N():(b=!1,T=null)}}else b=!1}var N;if(typeof m=="function")N=function(){m(F)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Z=V.port2;V.port1.onmessage=F,N=function(){Z.postMessage(null)}}else N=function(){P(F,0)};function ct(D){T=D,b||(b=!0,N())}function et(D,X){I=P(function(){D(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){C||w||(C=!0,ct(M))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(D){switch(g){case 1:case 2:case 3:var X=3;break;default:X=g}var j=g;g=X;try{return D()}finally{g=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,X){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var j=g;g=D;try{return X()}finally{g=j}},t.unstable_scheduleCallback=function(D,X,j){var dt=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?dt+j:dt):j=dt,D){case 1:var gt=-1;break;case 2:gt=250;break;case 5:gt=1073741823;break;case 4:gt=1e4;break;default:gt=5e3}return gt=j+gt,D={id:f++,callback:X,priorityLevel:D,startTime:j,expirationTime:gt,sortIndex:-1},j>dt?(D.sortIndex=j,e(h,D),r(c)===null&&D===r(h)&&(S?(y(I),I=-1):S=!0,et(k,j-dt))):(D.sortIndex=gt,e(c,D),C||w||(C=!0,ct(M))),D},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(D){var X=g;return function(){var j=g;g=X;try{return D.apply(this,arguments)}finally{g=j}}}})(x0);w0.exports=x0;var Cx=w0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0=A,Fr=Cx;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var E0=new Set,Js={};function Pi(t,e){rs(t,e),rs(t+"Capture",e)}function rs(t,e){for(Js[t]=e,t=0;t<e.length;t++)E0.add(e[t])}var Co=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ah=Object.prototype.hasOwnProperty,_x=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ep={},Cp={};function bx(t){return ah.call(Cp,t)?!0:ah.call(Ep,t)?!1:_x.test(t)?Cp[t]=!0:(Ep[t]=!0,!1)}function kx(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Tx(t,e,r,n){if(e===null||typeof e>"u"||kx(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sr(t,e,r,n,o,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Ye={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ye[t]=new sr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ye[e]=new sr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ye[t]=new sr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ye[t]=new sr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ye[t]=new sr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ye[t]=new sr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ye[t]=new sr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ye[t]=new sr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ye[t]=new sr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Hd=/[\-:]([a-z])/g;function zd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Hd,zd);Ye[e]=new sr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Hd,zd);Ye[e]=new sr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Hd,zd);Ye[e]=new sr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ye[t]=new sr(t,1,!1,t.toLowerCase(),null,!1,!1)});Ye.xlinkHref=new sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ye[t]=new sr(t,1,!1,t.toLowerCase(),null,!0,!0)});function Fd(t,e,r,n){var o=Ye.hasOwnProperty(e)?Ye[e]:null;(o!==null?o.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Tx(e,r,o,n)&&(r=null),n||o===null?bx(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):o.mustUseProperty?t[o.propertyName]=r===null?o.type===3?!1:"":r:(e=o.attributeName,n=o.attributeNamespace,r===null?t.removeAttribute(e):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var To=S0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ba=Symbol.for("react.element"),Li=Symbol.for("react.portal"),Ri=Symbol.for("react.fragment"),Wd=Symbol.for("react.strict_mode"),lh=Symbol.for("react.profiler"),C0=Symbol.for("react.provider"),_0=Symbol.for("react.context"),Gd=Symbol.for("react.forward_ref"),uh=Symbol.for("react.suspense"),ch=Symbol.for("react.suspense_list"),Ud=Symbol.for("react.memo"),$o=Symbol.for("react.lazy"),b0=Symbol.for("react.offscreen"),_p=Symbol.iterator;function Ts(t){return t===null||typeof t!="object"?null:(t=_p&&t[_p]||t["@@iterator"],typeof t=="function"?t:null)}var re=Object.assign,gc;function Rs(t){if(gc===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);gc=e&&e[1]||""}return`
`+gc+t}var mc=!1;function yc(t,e){if(!t||mc)return"";mc=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var n=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){n=h}t.call(e.prototype)}else{try{throw Error()}catch(h){n=h}t()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var o=h.stack.split(`
`),i=n.stack.split(`
`),a=o.length-1,l=i.length-1;1<=a&&0<=l&&o[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(o[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||o[a]!==i[l]){var c=`
`+o[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{mc=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Rs(t):""}function Mx(t){switch(t.tag){case 5:return Rs(t.type);case 16:return Rs("Lazy");case 13:return Rs("Suspense");case 19:return Rs("SuspenseList");case 0:case 2:case 15:return t=yc(t.type,!1),t;case 11:return t=yc(t.type.render,!1),t;case 1:return t=yc(t.type,!0),t;default:return""}}function hh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ri:return"Fragment";case Li:return"Portal";case lh:return"Profiler";case Wd:return"StrictMode";case uh:return"Suspense";case ch:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _0:return(t.displayName||"Context")+".Consumer";case C0:return(t._context.displayName||"Context")+".Provider";case Gd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ud:return e=t.displayName||null,e!==null?e:hh(t.type)||"Memo";case $o:e=t._payload,t=t._init;try{return hh(t(e))}catch{}}return null}function Px(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return hh(e);case 8:return e===Wd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function k0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ix(t){var e=k0(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Na(t){t._valueTracker||(t._valueTracker=Ix(t))}function T0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=k0(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Tl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dh(t,e){var r=e.checked;return re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function bp(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=Xo(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function M0(t,e){e=e.checked,e!=null&&Fd(t,"checked",e,!1)}function fh(t,e){M0(t,e);var r=Xo(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ph(t,e.type,r):e.hasOwnProperty("defaultValue")&&ph(t,e.type,Xo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function kp(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function ph(t,e,r){(e!=="number"||Tl(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Os=Array.isArray;function Xi(t,e,r,n){if(t=t.options,e){e={};for(var o=0;o<r.length;o++)e["$"+r[o]]=!0;for(r=0;r<t.length;r++)o=e.hasOwnProperty("$"+t[r].value),t[r].selected!==o&&(t[r].selected=o),o&&n&&(t[r].defaultSelected=!0)}else{for(r=""+Xo(r),e=null,o=0;o<t.length;o++){if(t[o].value===r){t[o].selected=!0,n&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function gh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Tp(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(W(92));if(Os(r)){if(1<r.length)throw Error(W(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Xo(r)}}function P0(t,e){var r=Xo(e.value),n=Xo(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Mp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function I0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?I0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ha,$0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,o){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ha=Ha||document.createElement("div"),Ha.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ha.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ta(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var zs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$x=["Webkit","ms","Moz","O"];Object.keys(zs).forEach(function(t){$x.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zs[e]=zs[t]})});function j0(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||zs.hasOwnProperty(t)&&zs[t]?(""+e).trim():e+"px"}function A0(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,o=j0(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,o):t[r]=o}}var jx=re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yh(t,e){if(e){if(jx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function vh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wh=null;function Vd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var xh=null,Ki=null,Yi=null;function Pp(t){if(t=Ma(t)){if(typeof xh!="function")throw Error(W(280));var e=t.stateNode;e&&(e=ku(e),xh(t.stateNode,t.type,e))}}function L0(t){Ki?Yi?Yi.push(t):Yi=[t]:Ki=t}function R0(){if(Ki){var t=Ki,e=Yi;if(Yi=Ki=null,Pp(t),e)for(t=0;t<e.length;t++)Pp(e[t])}}function O0(t,e){return t(e)}function D0(){}var vc=!1;function B0(t,e,r){if(vc)return t(e,r);vc=!0;try{return O0(t,e,r)}finally{vc=!1,(Ki!==null||Yi!==null)&&(D0(),R0())}}function ea(t,e){var r=t.stateNode;if(r===null)return null;var n=ku(r);if(n===null)return null;r=n[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break t;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(W(231,e,typeof r));return r}var Sh=!1;if(Co)try{var Ms={};Object.defineProperty(Ms,"passive",{get:function(){Sh=!0}}),window.addEventListener("test",Ms,Ms),window.removeEventListener("test",Ms,Ms)}catch{Sh=!1}function Ax(t,e,r,n,o,i,a,l,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(r,h)}catch(f){this.onError(f)}}var Fs=!1,Ml=null,Pl=!1,Eh=null,Lx={onError:function(t){Fs=!0,Ml=t}};function Rx(t,e,r,n,o,i,a,l,c){Fs=!1,Ml=null,Ax.apply(Lx,arguments)}function Ox(t,e,r,n,o,i,a,l,c){if(Rx.apply(this,arguments),Fs){if(Fs){var h=Ml;Fs=!1,Ml=null}else throw Error(W(198));Pl||(Pl=!0,Eh=h)}}function Ii(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function N0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ip(t){if(Ii(t)!==t)throw Error(W(188))}function Dx(t){var e=t.alternate;if(!e){if(e=Ii(t),e===null)throw Error(W(188));return e!==t?null:t}for(var r=t,n=e;;){var o=r.return;if(o===null)break;var i=o.alternate;if(i===null){if(n=o.return,n!==null){r=n;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===r)return Ip(o),t;if(i===n)return Ip(o),e;i=i.sibling}throw Error(W(188))}if(r.return!==n.return)r=o,n=i;else{for(var a=!1,l=o.child;l;){if(l===r){a=!0,r=o,n=i;break}if(l===n){a=!0,n=o,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,n=o;break}if(l===n){a=!0,n=i,r=o;break}l=l.sibling}if(!a)throw Error(W(189))}}if(r.alternate!==n)throw Error(W(190))}if(r.tag!==3)throw Error(W(188));return r.stateNode.current===r?t:e}function H0(t){return t=Dx(t),t!==null?z0(t):null}function z0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=z0(t);if(e!==null)return e;t=t.sibling}return null}var F0=Fr.unstable_scheduleCallback,$p=Fr.unstable_cancelCallback,Bx=Fr.unstable_shouldYield,Nx=Fr.unstable_requestPaint,se=Fr.unstable_now,Hx=Fr.unstable_getCurrentPriorityLevel,Xd=Fr.unstable_ImmediatePriority,W0=Fr.unstable_UserBlockingPriority,Il=Fr.unstable_NormalPriority,zx=Fr.unstable_LowPriority,G0=Fr.unstable_IdlePriority,Eu=null,ao=null;function Fx(t){if(ao&&typeof ao.onCommitFiberRoot=="function")try{ao.onCommitFiberRoot(Eu,t,void 0,(t.current.flags&128)===128)}catch{}}var Yn=Math.clz32?Math.clz32:Ux,Wx=Math.log,Gx=Math.LN2;function Ux(t){return t>>>=0,t===0?32:31-(Wx(t)/Gx|0)|0}var za=64,Fa=4194304;function Ds(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $l(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,o=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var l=a&~o;l!==0?n=Ds(l):(i&=a,i!==0&&(n=Ds(i)))}else a=r&~o,a!==0?n=Ds(a):i!==0&&(n=Ds(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&o)&&(o=n&-n,i=e&-e,o>=i||o===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Yn(e),o=1<<r,n|=t[r],e&=~o;return n}function Vx(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Xx(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,o=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Yn(i),l=1<<a,c=o[a];c===-1?(!(l&r)||l&n)&&(o[a]=Vx(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Ch(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function U0(){var t=za;return za<<=1,!(za&4194240)&&(za=64),t}function wc(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ka(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yn(e),t[e]=r}function Kx(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var o=31-Yn(r),i=1<<o;e[o]=0,n[o]=-1,t[o]=-1,r&=~i}}function Kd(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Yn(r),o=1<<n;o&e|t[n]&e&&(t[n]|=e),r&=~o}}var At=0;function V0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var X0,Yd,K0,Y0,Z0,_h=!1,Wa=[],Do=null,Bo=null,No=null,ra=new Map,na=new Map,Ao=[],Yx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jp(t,e){switch(t){case"focusin":case"focusout":Do=null;break;case"dragenter":case"dragleave":Bo=null;break;case"mouseover":case"mouseout":No=null;break;case"pointerover":case"pointerout":ra.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":na.delete(e.pointerId)}}function Ps(t,e,r,n,o,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[o]},e!==null&&(e=Ma(e),e!==null&&Yd(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function Zx(t,e,r,n,o){switch(e){case"focusin":return Do=Ps(Do,t,e,r,n,o),!0;case"dragenter":return Bo=Ps(Bo,t,e,r,n,o),!0;case"mouseover":return No=Ps(No,t,e,r,n,o),!0;case"pointerover":var i=o.pointerId;return ra.set(i,Ps(ra.get(i)||null,t,e,r,n,o)),!0;case"gotpointercapture":return i=o.pointerId,na.set(i,Ps(na.get(i)||null,t,e,r,n,o)),!0}return!1}function Q0(t){var e=si(t.target);if(e!==null){var r=Ii(e);if(r!==null){if(e=r.tag,e===13){if(e=N0(r),e!==null){t.blockedOn=e,Z0(t.priority,function(){K0(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=bh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);wh=n,r.target.dispatchEvent(n),wh=null}else return e=Ma(r),e!==null&&Yd(e),t.blockedOn=r,!1;e.shift()}return!0}function Ap(t,e,r){hl(t)&&r.delete(e)}function Qx(){_h=!1,Do!==null&&hl(Do)&&(Do=null),Bo!==null&&hl(Bo)&&(Bo=null),No!==null&&hl(No)&&(No=null),ra.forEach(Ap),na.forEach(Ap)}function Is(t,e){t.blockedOn===e&&(t.blockedOn=null,_h||(_h=!0,Fr.unstable_scheduleCallback(Fr.unstable_NormalPriority,Qx)))}function oa(t){function e(o){return Is(o,t)}if(0<Wa.length){Is(Wa[0],t);for(var r=1;r<Wa.length;r++){var n=Wa[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Do!==null&&Is(Do,t),Bo!==null&&Is(Bo,t),No!==null&&Is(No,t),ra.forEach(e),na.forEach(e),r=0;r<Ao.length;r++)n=Ao[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Ao.length&&(r=Ao[0],r.blockedOn===null);)Q0(r),r.blockedOn===null&&Ao.shift()}var Zi=To.ReactCurrentBatchConfig,jl=!0;function qx(t,e,r,n){var o=At,i=Zi.transition;Zi.transition=null;try{At=1,Zd(t,e,r,n)}finally{At=o,Zi.transition=i}}function Jx(t,e,r,n){var o=At,i=Zi.transition;Zi.transition=null;try{At=4,Zd(t,e,r,n)}finally{At=o,Zi.transition=i}}function Zd(t,e,r,n){if(jl){var o=bh(t,e,r,n);if(o===null)Pc(t,e,n,Al,r),jp(t,n);else if(Zx(o,t,e,r,n))n.stopPropagation();else if(jp(t,n),e&4&&-1<Yx.indexOf(t)){for(;o!==null;){var i=Ma(o);if(i!==null&&X0(i),i=bh(t,e,r,n),i===null&&Pc(t,e,n,Al,r),i===o)break;o=i}o!==null&&n.stopPropagation()}else Pc(t,e,n,null,r)}}var Al=null;function bh(t,e,r,n){if(Al=null,t=Vd(n),t=si(t),t!==null)if(e=Ii(t),e===null)t=null;else if(r=e.tag,r===13){if(t=N0(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Al=t,null}function q0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hx()){case Xd:return 1;case W0:return 4;case Il:case zx:return 16;case G0:return 536870912;default:return 16}default:return 16}}var Ro=null,Qd=null,dl=null;function J0(){if(dl)return dl;var t,e=Qd,r=e.length,n,o="value"in Ro?Ro.value:Ro.textContent,i=o.length;for(t=0;t<r&&e[t]===o[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===o[i-n];n++);return dl=o.slice(t,1<n?1-n:void 0)}function fl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ga(){return!0}function Lp(){return!1}function Gr(t){function e(r,n,o,i,a){this._reactName=r,this._targetInst=o,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ga:Lp,this.isPropagationStopped=Lp,this}return re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Ga)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Ga)},persist:function(){},isPersistent:Ga}),e}var gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qd=Gr(gs),Ta=re({},gs,{view:0,detail:0}),t2=Gr(Ta),xc,Sc,$s,Cu=re({},Ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$s&&($s&&t.type==="mousemove"?(xc=t.screenX-$s.screenX,Sc=t.screenY-$s.screenY):Sc=xc=0,$s=t),xc)},movementY:function(t){return"movementY"in t?t.movementY:Sc}}),Rp=Gr(Cu),e2=re({},Cu,{dataTransfer:0}),r2=Gr(e2),n2=re({},Ta,{relatedTarget:0}),Ec=Gr(n2),o2=re({},gs,{animationName:0,elapsedTime:0,pseudoElement:0}),i2=Gr(o2),s2=re({},gs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),a2=Gr(s2),l2=re({},gs,{data:0}),Op=Gr(l2),u2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},c2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},h2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function d2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=h2[t])?!!e[t]:!1}function Jd(){return d2}var f2=re({},Ta,{key:function(t){if(t.key){var e=u2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?c2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jd,charCode:function(t){return t.type==="keypress"?fl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),p2=Gr(f2),g2=re({},Cu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dp=Gr(g2),m2=re({},Ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jd}),y2=Gr(m2),v2=re({},gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),w2=Gr(v2),x2=re({},Cu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),S2=Gr(x2),E2=[9,13,27,32],tf=Co&&"CompositionEvent"in window,Ws=null;Co&&"documentMode"in document&&(Ws=document.documentMode);var C2=Co&&"TextEvent"in window&&!Ws,t1=Co&&(!tf||Ws&&8<Ws&&11>=Ws),Bp=" ",Np=!1;function e1(t,e){switch(t){case"keyup":return E2.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function r1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Oi=!1;function _2(t,e){switch(t){case"compositionend":return r1(e);case"keypress":return e.which!==32?null:(Np=!0,Bp);case"textInput":return t=e.data,t===Bp&&Np?null:t;default:return null}}function b2(t,e){if(Oi)return t==="compositionend"||!tf&&e1(t,e)?(t=J0(),dl=Qd=Ro=null,Oi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return t1&&e.locale!=="ko"?null:e.data;default:return null}}var k2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!k2[t.type]:e==="textarea"}function n1(t,e,r,n){L0(n),e=Ll(e,"onChange"),0<e.length&&(r=new qd("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var Gs=null,ia=null;function T2(t){p1(t,0)}function _u(t){var e=Ni(t);if(T0(e))return t}function M2(t,e){if(t==="change")return e}var o1=!1;if(Co){var Cc;if(Co){var _c="oninput"in document;if(!_c){var zp=document.createElement("div");zp.setAttribute("oninput","return;"),_c=typeof zp.oninput=="function"}Cc=_c}else Cc=!1;o1=Cc&&(!document.documentMode||9<document.documentMode)}function Fp(){Gs&&(Gs.detachEvent("onpropertychange",i1),ia=Gs=null)}function i1(t){if(t.propertyName==="value"&&_u(ia)){var e=[];n1(e,ia,t,Vd(t)),B0(T2,e)}}function P2(t,e,r){t==="focusin"?(Fp(),Gs=e,ia=r,Gs.attachEvent("onpropertychange",i1)):t==="focusout"&&Fp()}function I2(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _u(ia)}function $2(t,e){if(t==="click")return _u(e)}function j2(t,e){if(t==="input"||t==="change")return _u(e)}function A2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qn=typeof Object.is=="function"?Object.is:A2;function sa(t,e){if(qn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var o=r[n];if(!ah.call(e,o)||!qn(t[o],e[o]))return!1}return!0}function Wp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Gp(t,e){var r=Wp(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=Wp(r)}}function s1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?s1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function a1(){for(var t=window,e=Tl();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Tl(t.document)}return e}function ef(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function L2(t){var e=a1(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&s1(r.ownerDocument.documentElement,r)){if(n!==null&&ef(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=r.textContent.length,i=Math.min(n.start,o);n=n.end===void 0?i:Math.min(n.end,o),!t.extend&&i>n&&(o=n,n=i,i=o),o=Gp(r,i);var a=Gp(r,n);o&&a&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var R2=Co&&"documentMode"in document&&11>=document.documentMode,Di=null,kh=null,Us=null,Th=!1;function Up(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Th||Di==null||Di!==Tl(n)||(n=Di,"selectionStart"in n&&ef(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Us&&sa(Us,n)||(Us=n,n=Ll(kh,"onSelect"),0<n.length&&(e=new qd("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Di)))}function Ua(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Bi={animationend:Ua("Animation","AnimationEnd"),animationiteration:Ua("Animation","AnimationIteration"),animationstart:Ua("Animation","AnimationStart"),transitionend:Ua("Transition","TransitionEnd")},bc={},l1={};Co&&(l1=document.createElement("div").style,"AnimationEvent"in window||(delete Bi.animationend.animation,delete Bi.animationiteration.animation,delete Bi.animationstart.animation),"TransitionEvent"in window||delete Bi.transitionend.transition);function bu(t){if(bc[t])return bc[t];if(!Bi[t])return t;var e=Bi[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in l1)return bc[t]=e[r];return t}var u1=bu("animationend"),c1=bu("animationiteration"),h1=bu("animationstart"),d1=bu("transitionend"),f1=new Map,Vp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qo(t,e){f1.set(t,e),Pi(e,[t])}for(var kc=0;kc<Vp.length;kc++){var Tc=Vp[kc],O2=Tc.toLowerCase(),D2=Tc[0].toUpperCase()+Tc.slice(1);Qo(O2,"on"+D2)}Qo(u1,"onAnimationEnd");Qo(c1,"onAnimationIteration");Qo(h1,"onAnimationStart");Qo("dblclick","onDoubleClick");Qo("focusin","onFocus");Qo("focusout","onBlur");Qo(d1,"onTransitionEnd");rs("onMouseEnter",["mouseout","mouseover"]);rs("onMouseLeave",["mouseout","mouseover"]);rs("onPointerEnter",["pointerout","pointerover"]);rs("onPointerLeave",["pointerout","pointerover"]);Pi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Pi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Pi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Pi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Pi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Pi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),B2=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bs));function Xp(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,Ox(n,e,void 0,t),t.currentTarget=null}function p1(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],o=n.event;n=n.listeners;t:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var l=n[a],c=l.instance,h=l.currentTarget;if(l=l.listener,c!==i&&o.isPropagationStopped())break t;Xp(o,l,h),i=c}else for(a=0;a<n.length;a++){if(l=n[a],c=l.instance,h=l.currentTarget,l=l.listener,c!==i&&o.isPropagationStopped())break t;Xp(o,l,h),i=c}}}if(Pl)throw t=Eh,Pl=!1,Eh=null,t}function Bt(t,e){var r=e[jh];r===void 0&&(r=e[jh]=new Set);var n=t+"__bubble";r.has(n)||(g1(e,t,2,!1),r.add(n))}function Mc(t,e,r){var n=0;e&&(n|=4),g1(r,t,n,e)}var Va="_reactListening"+Math.random().toString(36).slice(2);function aa(t){if(!t[Va]){t[Va]=!0,E0.forEach(function(r){r!=="selectionchange"&&(B2.has(r)||Mc(r,!1,t),Mc(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Va]||(e[Va]=!0,Mc("selectionchange",!1,e))}}function g1(t,e,r,n){switch(q0(e)){case 1:var o=qx;break;case 4:o=Jx;break;default:o=Zd}r=o.bind(null,e,r,t),o=void 0,!Sh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),n?o!==void 0?t.addEventListener(e,r,{capture:!0,passive:o}):t.addEventListener(e,r,!0):o!==void 0?t.addEventListener(e,r,{passive:o}):t.addEventListener(e,r,!1)}function Pc(t,e,r,n,o){var i=n;if(!(e&1)&&!(e&2)&&n!==null)t:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;a=a.return}for(;l!==null;){if(a=si(l),a===null)return;if(c=a.tag,c===5||c===6){n=i=a;continue t}l=l.parentNode}}n=n.return}B0(function(){var h=i,f=Vd(r),p=[];t:{var g=f1.get(t);if(g!==void 0){var w=qd,C=t;switch(t){case"keypress":if(fl(r)===0)break t;case"keydown":case"keyup":w=p2;break;case"focusin":C="focus",w=Ec;break;case"focusout":C="blur",w=Ec;break;case"beforeblur":case"afterblur":w=Ec;break;case"click":if(r.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=Rp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=r2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=y2;break;case u1:case c1:case h1:w=i2;break;case d1:w=w2;break;case"scroll":w=t2;break;case"wheel":w=S2;break;case"copy":case"cut":case"paste":w=a2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=Dp}var S=(e&4)!==0,P=!S&&t==="scroll",y=S?g!==null?g+"Capture":null:g;S=[];for(var m=h,x;m!==null;){x=m;var k=x.stateNode;if(x.tag===5&&k!==null&&(x=k,y!==null&&(k=ea(m,y),k!=null&&S.push(la(m,k,x)))),P)break;m=m.return}0<S.length&&(g=new w(g,C,null,r,f),p.push({event:g,listeners:S}))}}if(!(e&7)){t:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&r!==wh&&(C=r.relatedTarget||r.fromElement)&&(si(C)||C[_o]))break t;if((w||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,w?(C=r.relatedTarget||r.toElement,w=h,C=C?si(C):null,C!==null&&(P=Ii(C),C!==P||C.tag!==5&&C.tag!==6)&&(C=null)):(w=null,C=h),w!==C)){if(S=Rp,k="onMouseLeave",y="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(S=Dp,k="onPointerLeave",y="onPointerEnter",m="pointer"),P=w==null?g:Ni(w),x=C==null?g:Ni(C),g=new S(k,m+"leave",w,r,f),g.target=P,g.relatedTarget=x,k=null,si(f)===h&&(S=new S(y,m+"enter",C,r,f),S.target=x,S.relatedTarget=P,k=S),P=k,w&&C)e:{for(S=w,y=C,m=0,x=S;x;x=Ai(x))m++;for(x=0,k=y;k;k=Ai(k))x++;for(;0<m-x;)S=Ai(S),m--;for(;0<x-m;)y=Ai(y),x--;for(;m--;){if(S===y||y!==null&&S===y.alternate)break e;S=Ai(S),y=Ai(y)}S=null}else S=null;w!==null&&Kp(p,g,w,S,!1),C!==null&&P!==null&&Kp(p,P,C,S,!0)}}t:{if(g=h?Ni(h):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var M=M2;else if(Hp(g))if(o1)M=j2;else{M=I2;var b=P2}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(M=$2);if(M&&(M=M(t,h))){n1(p,M,r,f);break t}b&&b(t,g,h),t==="focusout"&&(b=g._wrapperState)&&b.controlled&&g.type==="number"&&ph(g,"number",g.value)}switch(b=h?Ni(h):window,t){case"focusin":(Hp(b)||b.contentEditable==="true")&&(Di=b,kh=h,Us=null);break;case"focusout":Us=kh=Di=null;break;case"mousedown":Th=!0;break;case"contextmenu":case"mouseup":case"dragend":Th=!1,Up(p,r,f);break;case"selectionchange":if(R2)break;case"keydown":case"keyup":Up(p,r,f)}var T;if(tf)t:{switch(t){case"compositionstart":var I="onCompositionStart";break t;case"compositionend":I="onCompositionEnd";break t;case"compositionupdate":I="onCompositionUpdate";break t}I=void 0}else Oi?e1(t,r)&&(I="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(t1&&r.locale!=="ko"&&(Oi||I!=="onCompositionStart"?I==="onCompositionEnd"&&Oi&&(T=J0()):(Ro=f,Qd="value"in Ro?Ro.value:Ro.textContent,Oi=!0)),b=Ll(h,I),0<b.length&&(I=new Op(I,t,null,r,f),p.push({event:I,listeners:b}),T?I.data=T:(T=r1(r),T!==null&&(I.data=T)))),(T=C2?_2(t,r):b2(t,r))&&(h=Ll(h,"onBeforeInput"),0<h.length&&(f=new Op("onBeforeInput","beforeinput",null,r,f),p.push({event:f,listeners:h}),f.data=T))}p1(p,e)})}function la(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Ll(t,e){for(var r=e+"Capture",n=[];t!==null;){var o=t,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=ea(t,r),i!=null&&n.unshift(la(t,i,o)),i=ea(t,e),i!=null&&n.push(la(t,i,o))),t=t.return}return n}function Ai(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Kp(t,e,r,n,o){for(var i=e._reactName,a=[];r!==null&&r!==n;){var l=r,c=l.alternate,h=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&h!==null&&(l=h,o?(c=ea(r,i),c!=null&&a.unshift(la(r,c,l))):o||(c=ea(r,i),c!=null&&a.push(la(r,c,l)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var N2=/\r\n?/g,H2=/\u0000|\uFFFD/g;function Yp(t){return(typeof t=="string"?t:""+t).replace(N2,`
`).replace(H2,"")}function Xa(t,e,r){if(e=Yp(e),Yp(t)!==e&&r)throw Error(W(425))}function Rl(){}var Mh=null,Ph=null;function Ih(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $h=typeof setTimeout=="function"?setTimeout:void 0,z2=typeof clearTimeout=="function"?clearTimeout:void 0,Zp=typeof Promise=="function"?Promise:void 0,F2=typeof queueMicrotask=="function"?queueMicrotask:typeof Zp<"u"?function(t){return Zp.resolve(null).then(t).catch(W2)}:$h;function W2(t){setTimeout(function(){throw t})}function Ic(t,e){var r=e,n=0;do{var o=r.nextSibling;if(t.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(n===0){t.removeChild(o),oa(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=o}while(r);oa(e)}function Ho(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Qp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ms=Math.random().toString(36).slice(2),io="__reactFiber$"+ms,ua="__reactProps$"+ms,_o="__reactContainer$"+ms,jh="__reactEvents$"+ms,G2="__reactListeners$"+ms,U2="__reactHandles$"+ms;function si(t){var e=t[io];if(e)return e;for(var r=t.parentNode;r;){if(e=r[_o]||r[io]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=Qp(t);t!==null;){if(r=t[io])return r;t=Qp(t)}return e}t=r,r=t.parentNode}return null}function Ma(t){return t=t[io]||t[_o],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ni(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function ku(t){return t[ua]||null}var Ah=[],Hi=-1;function qo(t){return{current:t}}function Ht(t){0>Hi||(t.current=Ah[Hi],Ah[Hi]=null,Hi--)}function Dt(t,e){Hi++,Ah[Hi]=t.current,t.current=e}var Ko={},er=qo(Ko),Rr=qo(!1),fi=Ko;function ns(t,e){var r=t.type.contextTypes;if(!r)return Ko;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in r)o[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Or(t){return t=t.childContextTypes,t!=null}function Ol(){Ht(Rr),Ht(er)}function qp(t,e,r){if(er.current!==Ko)throw Error(W(168));Dt(er,e),Dt(Rr,r)}function m1(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var o in n)if(!(o in e))throw Error(W(108,Px(t)||"Unknown",o));return re({},r,n)}function Dl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ko,fi=er.current,Dt(er,t),Dt(Rr,Rr.current),!0}function Jp(t,e,r){var n=t.stateNode;if(!n)throw Error(W(169));r?(t=m1(t,e,fi),n.__reactInternalMemoizedMergedChildContext=t,Ht(Rr),Ht(er),Dt(er,t)):Ht(Rr),Dt(Rr,r)}var go=null,Tu=!1,$c=!1;function y1(t){go===null?go=[t]:go.push(t)}function V2(t){Tu=!0,y1(t)}function Jo(){if(!$c&&go!==null){$c=!0;var t=0,e=At;try{var r=go;for(At=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}go=null,Tu=!1}catch(o){throw go!==null&&(go=go.slice(t+1)),F0(Xd,Jo),o}finally{At=e,$c=!1}}return null}var zi=[],Fi=0,Bl=null,Nl=0,Vr=[],Xr=0,pi=null,vo=1,wo="";function oi(t,e){zi[Fi++]=Nl,zi[Fi++]=Bl,Bl=t,Nl=e}function v1(t,e,r){Vr[Xr++]=vo,Vr[Xr++]=wo,Vr[Xr++]=pi,pi=t;var n=vo;t=wo;var o=32-Yn(n)-1;n&=~(1<<o),r+=1;var i=32-Yn(e)+o;if(30<i){var a=o-o%5;i=(n&(1<<a)-1).toString(32),n>>=a,o-=a,vo=1<<32-Yn(e)+o|r<<o|n,wo=i+t}else vo=1<<i|r<<o|n,wo=t}function rf(t){t.return!==null&&(oi(t,1),v1(t,1,0))}function nf(t){for(;t===Bl;)Bl=zi[--Fi],zi[Fi]=null,Nl=zi[--Fi],zi[Fi]=null;for(;t===pi;)pi=Vr[--Xr],Vr[Xr]=null,wo=Vr[--Xr],Vr[Xr]=null,vo=Vr[--Xr],Vr[Xr]=null}var zr=null,Nr=null,Ft=!1,Xn=null;function w1(t,e){var r=Yr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function tg(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zr=t,Nr=Ho(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zr=t,Nr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=pi!==null?{id:vo,overflow:wo}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Yr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,zr=t,Nr=null,!0):!1;default:return!1}}function Lh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Rh(t){if(Ft){var e=Nr;if(e){var r=e;if(!tg(t,e)){if(Lh(t))throw Error(W(418));e=Ho(r.nextSibling);var n=zr;e&&tg(t,e)?w1(n,r):(t.flags=t.flags&-4097|2,Ft=!1,zr=t)}}else{if(Lh(t))throw Error(W(418));t.flags=t.flags&-4097|2,Ft=!1,zr=t}}}function eg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zr=t}function Ka(t){if(t!==zr)return!1;if(!Ft)return eg(t),Ft=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ih(t.type,t.memoizedProps)),e&&(e=Nr)){if(Lh(t))throw x1(),Error(W(418));for(;e;)w1(t,e),e=Ho(e.nextSibling)}if(eg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));t:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Nr=Ho(t.nextSibling);break t}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Nr=null}}else Nr=zr?Ho(t.stateNode.nextSibling):null;return!0}function x1(){for(var t=Nr;t;)t=Ho(t.nextSibling)}function os(){Nr=zr=null,Ft=!1}function of(t){Xn===null?Xn=[t]:Xn.push(t)}var X2=To.ReactCurrentBatchConfig;function Un(t,e){if(t&&t.defaultProps){e=re({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var Hl=qo(null),zl=null,Wi=null,sf=null;function af(){sf=Wi=zl=null}function lf(t){var e=Hl.current;Ht(Hl),t._currentValue=e}function Oh(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Qi(t,e){zl=t,sf=Wi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Lr=!0),t.firstContext=null)}function Qr(t){var e=t._currentValue;if(sf!==t)if(t={context:t,memoizedValue:e,next:null},Wi===null){if(zl===null)throw Error(W(308));Wi=t,zl.dependencies={lanes:0,firstContext:t}}else Wi=Wi.next=t;return e}var ai=null;function uf(t){ai===null?ai=[t]:ai.push(t)}function S1(t,e,r,n){var o=e.interleaved;return o===null?(r.next=r,uf(e)):(r.next=o.next,o.next=r),e.interleaved=r,bo(t,n)}function bo(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var jo=!1;function cf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function E1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Eo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zo(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,_t&2){var o=n.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),n.pending=e,bo(t,r)}return o=n.interleaved,o===null?(e.next=e,uf(n)):(e.next=o.next,o.next=e),n.interleaved=e,bo(t,r)}function pl(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Kd(t,r)}}function rg(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var o=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?o=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?o=i=e:i=i.next=e}else o=i=e;r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Fl(t,e,r,n){var o=t.updateQueue;jo=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var c=l,h=c.next;c.next=null,a===null?i=h:a.next=h,a=c;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==a&&(l===null?f.firstBaseUpdate=h:l.next=h,f.lastBaseUpdate=c))}if(i!==null){var p=o.baseState;a=0,f=h=c=null,l=i;do{var g=l.lane,w=l.eventTime;if((n&g)===g){f!==null&&(f=f.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});t:{var C=t,S=l;switch(g=e,w=r,S.tag){case 1:if(C=S.payload,typeof C=="function"){p=C.call(w,p,g);break t}p=C;break t;case 3:C.flags=C.flags&-65537|128;case 0:if(C=S.payload,g=typeof C=="function"?C.call(w,p,g):C,g==null)break t;p=re({},p,g);break t;case 2:jo=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=o.effects,g===null?o.effects=[l]:g.push(l))}else w={eventTime:w,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(h=f=w,c=p):f=f.next=w,a|=g;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;g=l,l=g.next,g.next=null,o.lastBaseUpdate=g,o.shared.pending=null}}while(!0);if(f===null&&(c=p),o.baseState=c,o.firstBaseUpdate=h,o.lastBaseUpdate=f,e=o.shared.interleaved,e!==null){o=e;do a|=o.lane,o=o.next;while(o!==e)}else i===null&&(o.shared.lanes=0);mi|=a,t.lanes=a,t.memoizedState=p}}function ng(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],o=n.callback;if(o!==null){if(n.callback=null,n=r,typeof o!="function")throw Error(W(191,o));o.call(n)}}}var C1=new S0.Component().refs;function Dh(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:re({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Mu={isMounted:function(t){return(t=t._reactInternals)?Ii(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=or(),o=Wo(t),i=Eo(n,o);i.payload=e,r!=null&&(i.callback=r),e=zo(t,i,o),e!==null&&(Zn(e,t,o,n),pl(e,t,o))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=or(),o=Wo(t),i=Eo(n,o);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=zo(t,i,o),e!==null&&(Zn(e,t,o,n),pl(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=or(),n=Wo(t),o=Eo(r,n);o.tag=2,e!=null&&(o.callback=e),e=zo(t,o,n),e!==null&&(Zn(e,t,n,r),pl(e,t,n))}};function og(t,e,r,n,o,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!sa(r,n)||!sa(o,i):!0}function _1(t,e,r){var n=!1,o=Ko,i=e.contextType;return typeof i=="object"&&i!==null?i=Qr(i):(o=Or(e)?fi:er.current,n=e.contextTypes,i=(n=n!=null)?ns(t,o):Ko),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Mu,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=i),e}function ig(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Mu.enqueueReplaceState(e,e.state,null)}function Bh(t,e,r,n){var o=t.stateNode;o.props=r,o.state=t.memoizedState,o.refs=C1,cf(t);var i=e.contextType;typeof i=="object"&&i!==null?o.context=Qr(i):(i=Or(e)?fi:er.current,o.context=ns(t,i)),o.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Dh(t,e,i,r),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Mu.enqueueReplaceState(o,o.state,null),Fl(t,r,o,n),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function js(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(W(309));var n=r.stateNode}if(!n)throw Error(W(147,t));var o=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=o.refs;l===C1&&(l=o.refs={}),a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(W(284));if(!r._owner)throw Error(W(290,t))}return t}function Ya(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function sg(t){var e=t._init;return e(t._payload)}function b1(t){function e(y,m){if(t){var x=y.deletions;x===null?(y.deletions=[m],y.flags|=16):x.push(m)}}function r(y,m){if(!t)return null;for(;m!==null;)e(y,m),m=m.sibling;return null}function n(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function o(y,m){return y=Go(y,m),y.index=0,y.sibling=null,y}function i(y,m,x){return y.index=x,t?(x=y.alternate,x!==null?(x=x.index,x<m?(y.flags|=2,m):x):(y.flags|=2,m)):(y.flags|=1048576,m)}function a(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,m,x,k){return m===null||m.tag!==6?(m=Bc(x,y.mode,k),m.return=y,m):(m=o(m,x),m.return=y,m)}function c(y,m,x,k){var M=x.type;return M===Ri?f(y,m,x.props.children,k,x.key):m!==null&&(m.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===$o&&sg(M)===m.type)?(k=o(m,x.props),k.ref=js(y,m,x),k.return=y,k):(k=xl(x.type,x.key,x.props,null,y.mode,k),k.ref=js(y,m,x),k.return=y,k)}function h(y,m,x,k){return m===null||m.tag!==4||m.stateNode.containerInfo!==x.containerInfo||m.stateNode.implementation!==x.implementation?(m=Nc(x,y.mode,k),m.return=y,m):(m=o(m,x.children||[]),m.return=y,m)}function f(y,m,x,k,M){return m===null||m.tag!==7?(m=hi(x,y.mode,k,M),m.return=y,m):(m=o(m,x),m.return=y,m)}function p(y,m,x){if(typeof m=="string"&&m!==""||typeof m=="number")return m=Bc(""+m,y.mode,x),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ba:return x=xl(m.type,m.key,m.props,null,y.mode,x),x.ref=js(y,null,m),x.return=y,x;case Li:return m=Nc(m,y.mode,x),m.return=y,m;case $o:var k=m._init;return p(y,k(m._payload),x)}if(Os(m)||Ts(m))return m=hi(m,y.mode,x,null),m.return=y,m;Ya(y,m)}return null}function g(y,m,x,k){var M=m!==null?m.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return M!==null?null:l(y,m,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Ba:return x.key===M?c(y,m,x,k):null;case Li:return x.key===M?h(y,m,x,k):null;case $o:return M=x._init,g(y,m,M(x._payload),k)}if(Os(x)||Ts(x))return M!==null?null:f(y,m,x,k,null);Ya(y,x)}return null}function w(y,m,x,k,M){if(typeof k=="string"&&k!==""||typeof k=="number")return y=y.get(x)||null,l(m,y,""+k,M);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Ba:return y=y.get(k.key===null?x:k.key)||null,c(m,y,k,M);case Li:return y=y.get(k.key===null?x:k.key)||null,h(m,y,k,M);case $o:var b=k._init;return w(y,m,x,b(k._payload),M)}if(Os(k)||Ts(k))return y=y.get(x)||null,f(m,y,k,M,null);Ya(m,k)}return null}function C(y,m,x,k){for(var M=null,b=null,T=m,I=m=0,H=null;T!==null&&I<x.length;I++){T.index>I?(H=T,T=null):H=T.sibling;var R=g(y,T,x[I],k);if(R===null){T===null&&(T=H);break}t&&T&&R.alternate===null&&e(y,T),m=i(R,m,I),b===null?M=R:b.sibling=R,b=R,T=H}if(I===x.length)return r(y,T),Ft&&oi(y,I),M;if(T===null){for(;I<x.length;I++)T=p(y,x[I],k),T!==null&&(m=i(T,m,I),b===null?M=T:b.sibling=T,b=T);return Ft&&oi(y,I),M}for(T=n(y,T);I<x.length;I++)H=w(T,y,I,x[I],k),H!==null&&(t&&H.alternate!==null&&T.delete(H.key===null?I:H.key),m=i(H,m,I),b===null?M=H:b.sibling=H,b=H);return t&&T.forEach(function(O){return e(y,O)}),Ft&&oi(y,I),M}function S(y,m,x,k){var M=Ts(x);if(typeof M!="function")throw Error(W(150));if(x=M.call(x),x==null)throw Error(W(151));for(var b=M=null,T=m,I=m=0,H=null,R=x.next();T!==null&&!R.done;I++,R=x.next()){T.index>I?(H=T,T=null):H=T.sibling;var O=g(y,T,R.value,k);if(O===null){T===null&&(T=H);break}t&&T&&O.alternate===null&&e(y,T),m=i(O,m,I),b===null?M=O:b.sibling=O,b=O,T=H}if(R.done)return r(y,T),Ft&&oi(y,I),M;if(T===null){for(;!R.done;I++,R=x.next())R=p(y,R.value,k),R!==null&&(m=i(R,m,I),b===null?M=R:b.sibling=R,b=R);return Ft&&oi(y,I),M}for(T=n(y,T);!R.done;I++,R=x.next())R=w(T,y,I,R.value,k),R!==null&&(t&&R.alternate!==null&&T.delete(R.key===null?I:R.key),m=i(R,m,I),b===null?M=R:b.sibling=R,b=R);return t&&T.forEach(function(F){return e(y,F)}),Ft&&oi(y,I),M}function P(y,m,x,k){if(typeof x=="object"&&x!==null&&x.type===Ri&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Ba:t:{for(var M=x.key,b=m;b!==null;){if(b.key===M){if(M=x.type,M===Ri){if(b.tag===7){r(y,b.sibling),m=o(b,x.props.children),m.return=y,y=m;break t}}else if(b.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===$o&&sg(M)===b.type){r(y,b.sibling),m=o(b,x.props),m.ref=js(y,b,x),m.return=y,y=m;break t}r(y,b);break}else e(y,b);b=b.sibling}x.type===Ri?(m=hi(x.props.children,y.mode,k,x.key),m.return=y,y=m):(k=xl(x.type,x.key,x.props,null,y.mode,k),k.ref=js(y,m,x),k.return=y,y=k)}return a(y);case Li:t:{for(b=x.key;m!==null;){if(m.key===b)if(m.tag===4&&m.stateNode.containerInfo===x.containerInfo&&m.stateNode.implementation===x.implementation){r(y,m.sibling),m=o(m,x.children||[]),m.return=y,y=m;break t}else{r(y,m);break}else e(y,m);m=m.sibling}m=Nc(x,y.mode,k),m.return=y,y=m}return a(y);case $o:return b=x._init,P(y,m,b(x._payload),k)}if(Os(x))return C(y,m,x,k);if(Ts(x))return S(y,m,x,k);Ya(y,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,m!==null&&m.tag===6?(r(y,m.sibling),m=o(m,x),m.return=y,y=m):(r(y,m),m=Bc(x,y.mode,k),m.return=y,y=m),a(y)):r(y,m)}return P}var is=b1(!0),k1=b1(!1),Pa={},lo=qo(Pa),ca=qo(Pa),ha=qo(Pa);function li(t){if(t===Pa)throw Error(W(174));return t}function hf(t,e){switch(Dt(ha,e),Dt(ca,t),Dt(lo,Pa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mh(e,t)}Ht(lo),Dt(lo,e)}function ss(){Ht(lo),Ht(ca),Ht(ha)}function T1(t){li(ha.current);var e=li(lo.current),r=mh(e,t.type);e!==r&&(Dt(ca,t),Dt(lo,r))}function df(t){ca.current===t&&(Ht(lo),Ht(ca))}var Jt=qo(0);function Wl(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jc=[];function ff(){for(var t=0;t<jc.length;t++)jc[t]._workInProgressVersionPrimary=null;jc.length=0}var gl=To.ReactCurrentDispatcher,Ac=To.ReactCurrentBatchConfig,gi=0,ee=null,we=null,Ee=null,Gl=!1,Vs=!1,da=0,K2=0;function Qe(){throw Error(W(321))}function pf(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!qn(t[r],e[r]))return!1;return!0}function gf(t,e,r,n,o,i){if(gi=i,ee=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gl.current=t===null||t.memoizedState===null?q2:J2,t=r(n,o),Vs){i=0;do{if(Vs=!1,da=0,25<=i)throw Error(W(301));i+=1,Ee=we=null,e.updateQueue=null,gl.current=tS,t=r(n,o)}while(Vs)}if(gl.current=Ul,e=we!==null&&we.next!==null,gi=0,Ee=we=ee=null,Gl=!1,e)throw Error(W(300));return t}function mf(){var t=da!==0;return da=0,t}function eo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ee===null?ee.memoizedState=Ee=t:Ee=Ee.next=t,Ee}function qr(){if(we===null){var t=ee.alternate;t=t!==null?t.memoizedState:null}else t=we.next;var e=Ee===null?ee.memoizedState:Ee.next;if(e!==null)Ee=e,we=t;else{if(t===null)throw Error(W(310));we=t,t={memoizedState:we.memoizedState,baseState:we.baseState,baseQueue:we.baseQueue,queue:we.queue,next:null},Ee===null?ee.memoizedState=Ee=t:Ee=Ee.next=t}return Ee}function fa(t,e){return typeof e=="function"?e(t):e}function Lc(t){var e=qr(),r=e.queue;if(r===null)throw Error(W(311));r.lastRenderedReducer=t;var n=we,o=n.baseQueue,i=r.pending;if(i!==null){if(o!==null){var a=o.next;o.next=i.next,i.next=a}n.baseQueue=o=i,r.pending=null}if(o!==null){i=o.next,n=n.baseState;var l=a=null,c=null,h=i;do{var f=h.lane;if((gi&f)===f)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:t(n,h.action);else{var p={lane:f,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(l=c=p,a=n):c=c.next=p,ee.lanes|=f,mi|=f}h=h.next}while(h!==null&&h!==i);c===null?a=n:c.next=l,qn(n,e.memoizedState)||(Lr=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){o=t;do i=o.lane,ee.lanes|=i,mi|=i,o=o.next;while(o!==t)}else o===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Rc(t){var e=qr(),r=e.queue;if(r===null)throw Error(W(311));r.lastRenderedReducer=t;var n=r.dispatch,o=r.pending,i=e.memoizedState;if(o!==null){r.pending=null;var a=o=o.next;do i=t(i,a.action),a=a.next;while(a!==o);qn(i,e.memoizedState)||(Lr=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function M1(){}function P1(t,e){var r=ee,n=qr(),o=e(),i=!qn(n.memoizedState,o);if(i&&(n.memoizedState=o,Lr=!0),n=n.queue,yf(j1.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Ee!==null&&Ee.memoizedState.tag&1){if(r.flags|=2048,pa(9,$1.bind(null,r,n,o,e),void 0,null),_e===null)throw Error(W(349));gi&30||I1(r,e,o)}return o}function I1(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ee.updateQueue,e===null?(e={lastEffect:null,stores:null},ee.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function $1(t,e,r,n){e.value=r,e.getSnapshot=n,A1(e)&&L1(t)}function j1(t,e,r){return r(function(){A1(e)&&L1(t)})}function A1(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!qn(t,r)}catch{return!0}}function L1(t){var e=bo(t,1);e!==null&&Zn(e,t,1,-1)}function ag(t){var e=eo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:t},e.queue=t,t=t.dispatch=Q2.bind(null,ee,t),[e.memoizedState,t]}function pa(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ee.updateQueue,e===null?(e={lastEffect:null,stores:null},ee.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function R1(){return qr().memoizedState}function ml(t,e,r,n){var o=eo();ee.flags|=t,o.memoizedState=pa(1|e,r,void 0,n===void 0?null:n)}function Pu(t,e,r,n){var o=qr();n=n===void 0?null:n;var i=void 0;if(we!==null){var a=we.memoizedState;if(i=a.destroy,n!==null&&pf(n,a.deps)){o.memoizedState=pa(e,r,i,n);return}}ee.flags|=t,o.memoizedState=pa(1|e,r,i,n)}function lg(t,e){return ml(8390656,8,t,e)}function yf(t,e){return Pu(2048,8,t,e)}function O1(t,e){return Pu(4,2,t,e)}function D1(t,e){return Pu(4,4,t,e)}function B1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function N1(t,e,r){return r=r!=null?r.concat([t]):null,Pu(4,4,B1.bind(null,e,t),r)}function vf(){}function H1(t,e){var r=qr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&pf(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function z1(t,e){var r=qr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&pf(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function F1(t,e,r){return gi&21?(qn(r,e)||(r=U0(),ee.lanes|=r,mi|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Lr=!0),t.memoizedState=r)}function Y2(t,e){var r=At;At=r!==0&&4>r?r:4,t(!0);var n=Ac.transition;Ac.transition={};try{t(!1),e()}finally{At=r,Ac.transition=n}}function W1(){return qr().memoizedState}function Z2(t,e,r){var n=Wo(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},G1(t))U1(e,r);else if(r=S1(t,e,r,n),r!==null){var o=or();Zn(r,t,n,o),V1(r,e,n)}}function Q2(t,e,r){var n=Wo(t),o={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(G1(t))U1(e,o);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,r);if(o.hasEagerState=!0,o.eagerState=l,qn(l,a)){var c=e.interleaved;c===null?(o.next=o,uf(e)):(o.next=c.next,c.next=o),e.interleaved=o;return}}catch{}finally{}r=S1(t,e,o,n),r!==null&&(o=or(),Zn(r,t,n,o),V1(r,e,n))}}function G1(t){var e=t.alternate;return t===ee||e!==null&&e===ee}function U1(t,e){Vs=Gl=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function V1(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Kd(t,r)}}var Ul={readContext:Qr,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useInsertionEffect:Qe,useLayoutEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useMutableSource:Qe,useSyncExternalStore:Qe,useId:Qe,unstable_isNewReconciler:!1},q2={readContext:Qr,useCallback:function(t,e){return eo().memoizedState=[t,e===void 0?null:e],t},useContext:Qr,useEffect:lg,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,ml(4194308,4,B1.bind(null,e,t),r)},useLayoutEffect:function(t,e){return ml(4194308,4,t,e)},useInsertionEffect:function(t,e){return ml(4,2,t,e)},useMemo:function(t,e){var r=eo();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=eo();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Z2.bind(null,ee,t),[n.memoizedState,t]},useRef:function(t){var e=eo();return t={current:t},e.memoizedState=t},useState:ag,useDebugValue:vf,useDeferredValue:function(t){return eo().memoizedState=t},useTransition:function(){var t=ag(!1),e=t[0];return t=Y2.bind(null,t[1]),eo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ee,o=eo();if(Ft){if(r===void 0)throw Error(W(407));r=r()}else{if(r=e(),_e===null)throw Error(W(349));gi&30||I1(n,e,r)}o.memoizedState=r;var i={value:r,getSnapshot:e};return o.queue=i,lg(j1.bind(null,n,i,t),[t]),n.flags|=2048,pa(9,$1.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=eo(),e=_e.identifierPrefix;if(Ft){var r=wo,n=vo;r=(n&~(1<<32-Yn(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=da++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=K2++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},J2={readContext:Qr,useCallback:H1,useContext:Qr,useEffect:yf,useImperativeHandle:N1,useInsertionEffect:O1,useLayoutEffect:D1,useMemo:z1,useReducer:Lc,useRef:R1,useState:function(){return Lc(fa)},useDebugValue:vf,useDeferredValue:function(t){var e=qr();return F1(e,we.memoizedState,t)},useTransition:function(){var t=Lc(fa)[0],e=qr().memoizedState;return[t,e]},useMutableSource:M1,useSyncExternalStore:P1,useId:W1,unstable_isNewReconciler:!1},tS={readContext:Qr,useCallback:H1,useContext:Qr,useEffect:yf,useImperativeHandle:N1,useInsertionEffect:O1,useLayoutEffect:D1,useMemo:z1,useReducer:Rc,useRef:R1,useState:function(){return Rc(fa)},useDebugValue:vf,useDeferredValue:function(t){var e=qr();return we===null?e.memoizedState=t:F1(e,we.memoizedState,t)},useTransition:function(){var t=Rc(fa)[0],e=qr().memoizedState;return[t,e]},useMutableSource:M1,useSyncExternalStore:P1,useId:W1,unstable_isNewReconciler:!1};function as(t,e){try{var r="",n=e;do r+=Mx(n),n=n.return;while(n);var o=r}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:o,digest:null}}function Oc(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Nh(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var eS=typeof WeakMap=="function"?WeakMap:Map;function X1(t,e,r){r=Eo(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Xl||(Xl=!0,Yh=n),Nh(t,e)},r}function K1(t,e,r){r=Eo(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var o=e.value;r.payload=function(){return n(o)},r.callback=function(){Nh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Nh(t,e),typeof n!="function"&&(Fo===null?Fo=new Set([this]):Fo.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function ug(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new eS;var o=new Set;n.set(e,o)}else o=n.get(e),o===void 0&&(o=new Set,n.set(e,o));o.has(r)||(o.add(r),t=gS.bind(null,t,e,r),e.then(t,t))}function cg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function hg(t,e,r,n,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=Eo(-1,1),e.tag=2,zo(r,e,1))),r.lanes|=1),t)}var rS=To.ReactCurrentOwner,Lr=!1;function nr(t,e,r,n){e.child=t===null?k1(e,null,r,n):is(e,t.child,r,n)}function dg(t,e,r,n,o){r=r.render;var i=e.ref;return Qi(e,o),n=gf(t,e,r,n,i,o),r=mf(),t!==null&&!Lr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,ko(t,e,o)):(Ft&&r&&rf(e),e.flags|=1,nr(t,e,n,o),e.child)}function fg(t,e,r,n,o){if(t===null){var i=r.type;return typeof i=="function"&&!kf(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,Y1(t,e,i,n,o)):(t=xl(r.type,null,n,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&o)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:sa,r(a,n)&&t.ref===e.ref)return ko(t,e,o)}return e.flags|=1,t=Go(i,n),t.ref=e.ref,t.return=e,e.child=t}function Y1(t,e,r,n,o){if(t!==null){var i=t.memoizedProps;if(sa(i,n)&&t.ref===e.ref)if(Lr=!1,e.pendingProps=n=i,(t.lanes&o)!==0)t.flags&131072&&(Lr=!0);else return e.lanes=t.lanes,ko(t,e,o)}return Hh(t,e,r,n,o)}function Z1(t,e,r){var n=e.pendingProps,o=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(Ui,Br),Br|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Dt(Ui,Br),Br|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,Dt(Ui,Br),Br|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,Dt(Ui,Br),Br|=n;return nr(t,e,o,r),e.child}function Q1(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Hh(t,e,r,n,o){var i=Or(r)?fi:er.current;return i=ns(e,i),Qi(e,o),r=gf(t,e,r,n,i,o),n=mf(),t!==null&&!Lr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,ko(t,e,o)):(Ft&&n&&rf(e),e.flags|=1,nr(t,e,r,o),e.child)}function pg(t,e,r,n,o){if(Or(r)){var i=!0;Dl(e)}else i=!1;if(Qi(e,o),e.stateNode===null)yl(t,e),_1(e,r,n),Bh(e,r,n,o),n=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,h=r.contextType;typeof h=="object"&&h!==null?h=Qr(h):(h=Or(r)?fi:er.current,h=ns(e,h));var f=r.getDerivedStateFromProps,p=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function";p||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||c!==h)&&ig(e,a,n,h),jo=!1;var g=e.memoizedState;a.state=g,Fl(e,n,a,o),c=e.memoizedState,l!==n||g!==c||Rr.current||jo?(typeof f=="function"&&(Dh(e,r,f,n),c=e.memoizedState),(l=jo||og(e,r,l,n,g,c,h))?(p||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=h,n=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,E1(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Un(e.type,l),a.props=h,p=e.pendingProps,g=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Qr(c):(c=Or(r)?fi:er.current,c=ns(e,c));var w=r.getDerivedStateFromProps;(f=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==p||g!==c)&&ig(e,a,n,c),jo=!1,g=e.memoizedState,a.state=g,Fl(e,n,a,o);var C=e.memoizedState;l!==p||g!==C||Rr.current||jo?(typeof w=="function"&&(Dh(e,r,w,n),C=e.memoizedState),(h=jo||og(e,r,h,n,g,C,c)||!1)?(f||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,C,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,C,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=C),a.props=n,a.state=C,a.context=c,n=h):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),n=!1)}return zh(t,e,r,n,i,o)}function zh(t,e,r,n,o,i){Q1(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return o&&Jp(e,r,!1),ko(t,e,i);n=e.stateNode,rS.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=is(e,t.child,null,i),e.child=is(e,null,l,i)):nr(t,e,l,i),e.memoizedState=n.state,o&&Jp(e,r,!0),e.child}function q1(t){var e=t.stateNode;e.pendingContext?qp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&qp(t,e.context,!1),hf(t,e.containerInfo)}function gg(t,e,r,n,o){return os(),of(o),e.flags|=256,nr(t,e,r,n),e.child}var Fh={dehydrated:null,treeContext:null,retryLane:0};function Wh(t){return{baseLanes:t,cachePool:null,transitions:null}}function J1(t,e,r){var n=e.pendingProps,o=Jt.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(o&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),Dt(Jt,o&1),t===null)return Rh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=ju(a,n,0,null),t=hi(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Wh(r),e.memoizedState=Fh,t):wf(e,a));if(o=t.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return nS(t,e,a,n,l,o,r);if(i){i=n.fallback,a=e.mode,o=t.child,l=o.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==o?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Go(o,c),n.subtreeFlags=o.subtreeFlags&14680064),l!==null?i=Go(l,i):(i=hi(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?Wh(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=Fh,n}return i=t.child,t=i.sibling,n=Go(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function wf(t,e){return e=ju({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Za(t,e,r,n){return n!==null&&of(n),is(e,t.child,null,r),t=wf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function nS(t,e,r,n,o,i,a){if(r)return e.flags&256?(e.flags&=-257,n=Oc(Error(W(422))),Za(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,o=e.mode,n=ju({mode:"visible",children:n.children},o,0,null),i=hi(i,o,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&is(e,t.child,null,a),e.child.memoizedState=Wh(a),e.memoizedState=Fh,i);if(!(e.mode&1))return Za(t,e,a,null);if(o.data==="$!"){if(n=o.nextSibling&&o.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(W(419)),n=Oc(i,n,void 0),Za(t,e,a,n)}if(l=(a&t.childLanes)!==0,Lr||l){if(n=_e,n!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(n.suspendedLanes|a)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,bo(t,o),Zn(n,t,o,-1))}return bf(),n=Oc(Error(W(421))),Za(t,e,a,n)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=mS.bind(null,t),o._reactRetry=e,null):(t=i.treeContext,Nr=Ho(o.nextSibling),zr=e,Ft=!0,Xn=null,t!==null&&(Vr[Xr++]=vo,Vr[Xr++]=wo,Vr[Xr++]=pi,vo=t.id,wo=t.overflow,pi=e),e=wf(e,n.children),e.flags|=4096,e)}function mg(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Oh(t.return,e,r)}function Dc(t,e,r,n,o){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=o)}function ty(t,e,r){var n=e.pendingProps,o=n.revealOrder,i=n.tail;if(nr(t,e,n.children,r),n=Jt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)t:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mg(t,r,e);else if(t.tag===19)mg(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;t.sibling===null;){if(t.return===null||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Dt(Jt,n),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(r=e.child,o=null;r!==null;)t=r.alternate,t!==null&&Wl(t)===null&&(o=r),r=r.sibling;r=o,r===null?(o=e.child,e.child=null):(o=r.sibling,r.sibling=null),Dc(e,!1,o,r,i);break;case"backwards":for(r=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Wl(t)===null){e.child=o;break}t=o.sibling,o.sibling=r,r=o,o=t}Dc(e,!0,r,null,i);break;case"together":Dc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function yl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ko(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),mi|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,r=Go(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Go(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function oS(t,e,r){switch(e.tag){case 3:q1(e),os();break;case 5:T1(e);break;case 1:Or(e.type)&&Dl(e);break;case 4:hf(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,o=e.memoizedProps.value;Dt(Hl,n._currentValue),n._currentValue=o;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Dt(Jt,Jt.current&1),e.flags|=128,null):r&e.child.childLanes?J1(t,e,r):(Dt(Jt,Jt.current&1),t=ko(t,e,r),t!==null?t.sibling:null);Dt(Jt,Jt.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return ty(t,e,r);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Dt(Jt,Jt.current),n)break;return null;case 22:case 23:return e.lanes=0,Z1(t,e,r)}return ko(t,e,r)}var ey,Gh,ry,ny;ey=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Gh=function(){};ry=function(t,e,r,n){var o=t.memoizedProps;if(o!==n){t=e.stateNode,li(lo.current);var i=null;switch(r){case"input":o=dh(t,o),n=dh(t,n),i=[];break;case"select":o=re({},o,{value:void 0}),n=re({},n,{value:void 0}),i=[];break;case"textarea":o=gh(t,o),n=gh(t,n),i=[];break;default:typeof o.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Rl)}yh(r,n);var a;r=null;for(h in o)if(!n.hasOwnProperty(h)&&o.hasOwnProperty(h)&&o[h]!=null)if(h==="style"){var l=o[h];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(Js.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in n){var c=n[h];if(l=o!=null?o[h]:void 0,n.hasOwnProperty(h)&&c!==l&&(c!=null||l!=null))if(h==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(i||(i=[]),i.push(h,r)),r=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(Js.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&Bt("scroll",t),i||l===c||(i=[])):(i=i||[]).push(h,c))}r&&(i=i||[]).push("style",r);var h=i;(e.updateQueue=h)&&(e.flags|=4)}};ny=function(t,e,r,n){r!==n&&(e.flags|=4)};function As(t,e){if(!Ft)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function qe(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var o=t.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags&14680064,n|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function iS(t,e,r){var n=e.pendingProps;switch(nf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qe(e),null;case 1:return Or(e.type)&&Ol(),qe(e),null;case 3:return n=e.stateNode,ss(),Ht(Rr),Ht(er),ff(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ka(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Xn!==null&&(qh(Xn),Xn=null))),Gh(t,e),qe(e),null;case 5:df(e);var o=li(ha.current);if(r=e.type,t!==null&&e.stateNode!=null)ry(t,e,r,n,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(W(166));return qe(e),null}if(t=li(lo.current),Ka(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[io]=e,n[ua]=i,t=(e.mode&1)!==0,r){case"dialog":Bt("cancel",n),Bt("close",n);break;case"iframe":case"object":case"embed":Bt("load",n);break;case"video":case"audio":for(o=0;o<Bs.length;o++)Bt(Bs[o],n);break;case"source":Bt("error",n);break;case"img":case"image":case"link":Bt("error",n),Bt("load",n);break;case"details":Bt("toggle",n);break;case"input":bp(n,i),Bt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Bt("invalid",n);break;case"textarea":Tp(n,i),Bt("invalid",n)}yh(r,i),o=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Xa(n.textContent,l,t),o=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Xa(n.textContent,l,t),o=["children",""+l]):Js.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Bt("scroll",n)}switch(r){case"input":Na(n),kp(n,i,!0);break;case"textarea":Na(n),Mp(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Rl)}n=o,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=I0(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[io]=e,t[ua]=n,ey(t,e,!1,!1),e.stateNode=t;t:{switch(a=vh(r,n),r){case"dialog":Bt("cancel",t),Bt("close",t),o=n;break;case"iframe":case"object":case"embed":Bt("load",t),o=n;break;case"video":case"audio":for(o=0;o<Bs.length;o++)Bt(Bs[o],t);o=n;break;case"source":Bt("error",t),o=n;break;case"img":case"image":case"link":Bt("error",t),Bt("load",t),o=n;break;case"details":Bt("toggle",t),o=n;break;case"input":bp(t,n),o=dh(t,n),Bt("invalid",t);break;case"option":o=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},o=re({},n,{value:void 0}),Bt("invalid",t);break;case"textarea":Tp(t,n),o=gh(t,n),Bt("invalid",t);break;default:o=n}yh(r,o),l=o;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?A0(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&$0(t,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ta(t,c):typeof c=="number"&&ta(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Js.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Bt("scroll",t):c!=null&&Fd(t,i,c,a))}switch(r){case"input":Na(t),kp(t,n,!1);break;case"textarea":Na(t),Mp(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Xo(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Xi(t,!!n.multiple,i,!1):n.defaultValue!=null&&Xi(t,!!n.multiple,n.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=Rl)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break t;case"img":n=!0;break t;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return qe(e),null;case 6:if(t&&e.stateNode!=null)ny(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(W(166));if(r=li(ha.current),li(lo.current),Ka(e)){if(n=e.stateNode,r=e.memoizedProps,n[io]=e,(i=n.nodeValue!==r)&&(t=zr,t!==null))switch(t.tag){case 3:Xa(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xa(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[io]=e,e.stateNode=n}return qe(e),null;case 13:if(Ht(Jt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ft&&Nr!==null&&e.mode&1&&!(e.flags&128))x1(),os(),e.flags|=98560,i=!1;else if(i=Ka(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(W(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(W(317));i[io]=e}else os(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;qe(e),i=!1}else Xn!==null&&(qh(Xn),Xn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Jt.current&1?xe===0&&(xe=3):bf())),e.updateQueue!==null&&(e.flags|=4),qe(e),null);case 4:return ss(),Gh(t,e),t===null&&aa(e.stateNode.containerInfo),qe(e),null;case 10:return lf(e.type._context),qe(e),null;case 17:return Or(e.type)&&Ol(),qe(e),null;case 19:if(Ht(Jt),i=e.memoizedState,i===null)return qe(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)As(i,!1);else{if(xe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Wl(t),a!==null){for(e.flags|=128,As(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Dt(Jt,Jt.current&1|2),e.child}t=t.sibling}i.tail!==null&&se()>ls&&(e.flags|=128,n=!0,As(i,!1),e.lanes=4194304)}else{if(!n)if(t=Wl(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),As(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ft)return qe(e),null}else 2*se()-i.renderingStartTime>ls&&r!==1073741824&&(e.flags|=128,n=!0,As(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=se(),e.sibling=null,r=Jt.current,Dt(Jt,n?r&1|2:r&1),e):(qe(e),null);case 22:case 23:return _f(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Br&1073741824&&(qe(e),e.subtreeFlags&6&&(e.flags|=8192)):qe(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function sS(t,e){switch(nf(e),e.tag){case 1:return Or(e.type)&&Ol(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ss(),Ht(Rr),Ht(er),ff(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return df(e),null;case 13:if(Ht(Jt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));os()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ht(Jt),null;case 4:return ss(),null;case 10:return lf(e.type._context),null;case 22:case 23:return _f(),null;case 24:return null;default:return null}}var Qa=!1,tr=!1,aS=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Gi(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){oe(t,e,n)}else r.current=null}function Uh(t,e,r){try{r()}catch(n){oe(t,e,n)}}var yg=!1;function lS(t,e){if(Mh=jl,t=a1(),ef(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else t:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var o=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break t}var a=0,l=-1,c=-1,h=0,f=0,p=t,g=null;e:for(;;){for(var w;p!==r||o!==0&&p.nodeType!==3||(l=a+o),p!==i||n!==0&&p.nodeType!==3||(c=a+n),p.nodeType===3&&(a+=p.nodeValue.length),(w=p.firstChild)!==null;)g=p,p=w;for(;;){if(p===t)break e;if(g===r&&++h===o&&(l=a),g===i&&++f===n&&(c=a),(w=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=w}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Ph={focusedElem:t,selectionRange:r},jl=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var C=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var S=C.memoizedProps,P=C.memoizedState,y=e.stateNode,m=y.getSnapshotBeforeUpdate(e.elementType===e.type?S:Un(e.type,S),P);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(k){oe(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return C=yg,yg=!1,C}function Xs(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&t)===t){var i=o.destroy;o.destroy=void 0,i!==void 0&&Uh(e,r,i)}o=o.next}while(o!==n)}}function Iu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Vh(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function oy(t){var e=t.alternate;e!==null&&(t.alternate=null,oy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[io],delete e[ua],delete e[jh],delete e[G2],delete e[U2])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function iy(t){return t.tag===5||t.tag===3||t.tag===4}function vg(t){t:for(;;){for(;t.sibling===null;){if(t.return===null||iy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue t;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xh(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Rl));else if(n!==4&&(t=t.child,t!==null))for(Xh(t,e,r),t=t.sibling;t!==null;)Xh(t,e,r),t=t.sibling}function Kh(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Kh(t,e,r),t=t.sibling;t!==null;)Kh(t,e,r),t=t.sibling}var Ve=null,Vn=!1;function Po(t,e,r){for(r=r.child;r!==null;)sy(t,e,r),r=r.sibling}function sy(t,e,r){if(ao&&typeof ao.onCommitFiberUnmount=="function")try{ao.onCommitFiberUnmount(Eu,r)}catch{}switch(r.tag){case 5:tr||Gi(r,e);case 6:var n=Ve,o=Vn;Ve=null,Po(t,e,r),Ve=n,Vn=o,Ve!==null&&(Vn?(t=Ve,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Ve.removeChild(r.stateNode));break;case 18:Ve!==null&&(Vn?(t=Ve,r=r.stateNode,t.nodeType===8?Ic(t.parentNode,r):t.nodeType===1&&Ic(t,r),oa(t)):Ic(Ve,r.stateNode));break;case 4:n=Ve,o=Vn,Ve=r.stateNode.containerInfo,Vn=!0,Po(t,e,r),Ve=n,Vn=o;break;case 0:case 11:case 14:case 15:if(!tr&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){o=n=n.next;do{var i=o,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Uh(r,e,a),o=o.next}while(o!==n)}Po(t,e,r);break;case 1:if(!tr&&(Gi(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){oe(r,e,l)}Po(t,e,r);break;case 21:Po(t,e,r);break;case 22:r.mode&1?(tr=(n=tr)||r.memoizedState!==null,Po(t,e,r),tr=n):Po(t,e,r);break;default:Po(t,e,r)}}function wg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new aS),e.forEach(function(n){var o=yS.bind(null,t,n);r.has(n)||(r.add(n),n.then(o,o))})}}function Gn(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var o=r[n];try{var i=t,a=e,l=a;t:for(;l!==null;){switch(l.tag){case 5:Ve=l.stateNode,Vn=!1;break t;case 3:Ve=l.stateNode.containerInfo,Vn=!0;break t;case 4:Ve=l.stateNode.containerInfo,Vn=!0;break t}l=l.return}if(Ve===null)throw Error(W(160));sy(i,a,o),Ve=null,Vn=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(h){oe(o,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ay(e,t),e=e.sibling}function ay(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Gn(e,t),to(t),n&4){try{Xs(3,t,t.return),Iu(3,t)}catch(S){oe(t,t.return,S)}try{Xs(5,t,t.return)}catch(S){oe(t,t.return,S)}}break;case 1:Gn(e,t),to(t),n&512&&r!==null&&Gi(r,r.return);break;case 5:if(Gn(e,t),to(t),n&512&&r!==null&&Gi(r,r.return),t.flags&32){var o=t.stateNode;try{ta(o,"")}catch(S){oe(t,t.return,S)}}if(n&4&&(o=t.stateNode,o!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&M0(o,i),vh(l,a);var h=vh(l,i);for(a=0;a<c.length;a+=2){var f=c[a],p=c[a+1];f==="style"?A0(o,p):f==="dangerouslySetInnerHTML"?$0(o,p):f==="children"?ta(o,p):Fd(o,f,p,h)}switch(l){case"input":fh(o,i);break;case"textarea":P0(o,i);break;case"select":var g=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?Xi(o,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?Xi(o,!!i.multiple,i.defaultValue,!0):Xi(o,!!i.multiple,i.multiple?[]:"",!1))}o[ua]=i}catch(S){oe(t,t.return,S)}}break;case 6:if(Gn(e,t),to(t),n&4){if(t.stateNode===null)throw Error(W(162));o=t.stateNode,i=t.memoizedProps;try{o.nodeValue=i}catch(S){oe(t,t.return,S)}}break;case 3:if(Gn(e,t),to(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{oa(e.containerInfo)}catch(S){oe(t,t.return,S)}break;case 4:Gn(e,t),to(t);break;case 13:Gn(e,t),to(t),o=t.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(Ef=se())),n&4&&wg(t);break;case 22:if(f=r!==null&&r.memoizedState!==null,t.mode&1?(tr=(h=tr)||f,Gn(e,t),tr=h):Gn(e,t),to(t),n&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!f&&t.mode&1)for(Y=t,f=t.child;f!==null;){for(p=Y=f;Y!==null;){switch(g=Y,w=g.child,g.tag){case 0:case 11:case 14:case 15:Xs(4,g,g.return);break;case 1:Gi(g,g.return);var C=g.stateNode;if(typeof C.componentWillUnmount=="function"){n=g,r=g.return;try{e=n,C.props=e.memoizedProps,C.state=e.memoizedState,C.componentWillUnmount()}catch(S){oe(n,r,S)}}break;case 5:Gi(g,g.return);break;case 22:if(g.memoizedState!==null){Sg(p);continue}}w!==null?(w.return=g,Y=w):Sg(p)}f=f.sibling}t:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{o=p.stateNode,h?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,c=p.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=j0("display",a))}catch(S){oe(t,t.return,S)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=h?"":p.memoizedProps}catch(S){oe(t,t.return,S)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break t;for(;p.sibling===null;){if(p.return===null||p.return===t)break t;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Gn(e,t),to(t),n&4&&wg(t);break;case 21:break;default:Gn(e,t),to(t)}}function to(t){var e=t.flags;if(e&2){try{t:{for(var r=t.return;r!==null;){if(iy(r)){var n=r;break t}r=r.return}throw Error(W(160))}switch(n.tag){case 5:var o=n.stateNode;n.flags&32&&(ta(o,""),n.flags&=-33);var i=vg(t);Kh(t,i,o);break;case 3:case 4:var a=n.stateNode.containerInfo,l=vg(t);Xh(t,l,a);break;default:throw Error(W(161))}}catch(c){oe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uS(t,e,r){Y=t,ly(t)}function ly(t,e,r){for(var n=(t.mode&1)!==0;Y!==null;){var o=Y,i=o.child;if(o.tag===22&&n){var a=o.memoizedState!==null||Qa;if(!a){var l=o.alternate,c=l!==null&&l.memoizedState!==null||tr;l=Qa;var h=tr;if(Qa=a,(tr=c)&&!h)for(Y=o;Y!==null;)a=Y,c=a.child,a.tag===22&&a.memoizedState!==null?Eg(o):c!==null?(c.return=a,Y=c):Eg(o);for(;i!==null;)Y=i,ly(i),i=i.sibling;Y=o,Qa=l,tr=h}xg(t)}else o.subtreeFlags&8772&&i!==null?(i.return=o,Y=i):xg(t)}}function xg(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:tr||Iu(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!tr)if(r===null)n.componentDidMount();else{var o=e.elementType===e.type?r.memoizedProps:Un(e.type,r.memoizedProps);n.componentDidUpdate(o,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ng(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}ng(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var f=h.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&oa(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}tr||e.flags&512&&Vh(e)}catch(g){oe(e,e.return,g)}}if(e===t){Y=null;break}if(r=e.sibling,r!==null){r.return=e.return,Y=r;break}Y=e.return}}function Sg(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Y=r;break}Y=e.return}}function Eg(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Iu(4,e)}catch(c){oe(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var o=e.return;try{n.componentDidMount()}catch(c){oe(e,o,c)}}var i=e.return;try{Vh(e)}catch(c){oe(e,i,c)}break;case 5:var a=e.return;try{Vh(e)}catch(c){oe(e,a,c)}}}catch(c){oe(e,e.return,c)}if(e===t){Y=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Y=l;break}Y=e.return}}var cS=Math.ceil,Vl=To.ReactCurrentDispatcher,xf=To.ReactCurrentOwner,Zr=To.ReactCurrentBatchConfig,_t=0,_e=null,ve=null,Ke=0,Br=0,Ui=qo(0),xe=0,ga=null,mi=0,$u=0,Sf=0,Ks=null,jr=null,Ef=0,ls=1/0,po=null,Xl=!1,Yh=null,Fo=null,qa=!1,Oo=null,Kl=0,Ys=0,Zh=null,vl=-1,wl=0;function or(){return _t&6?se():vl!==-1?vl:vl=se()}function Wo(t){return t.mode&1?_t&2&&Ke!==0?Ke&-Ke:X2.transition!==null?(wl===0&&(wl=U0()),wl):(t=At,t!==0||(t=window.event,t=t===void 0?16:q0(t.type)),t):1}function Zn(t,e,r,n){if(50<Ys)throw Ys=0,Zh=null,Error(W(185));ka(t,r,n),(!(_t&2)||t!==_e)&&(t===_e&&(!(_t&2)&&($u|=r),xe===4&&Lo(t,Ke)),Dr(t,n),r===1&&_t===0&&!(e.mode&1)&&(ls=se()+500,Tu&&Jo()))}function Dr(t,e){var r=t.callbackNode;Xx(t,e);var n=$l(t,t===_e?Ke:0);if(n===0)r!==null&&$p(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&$p(r),e===1)t.tag===0?V2(Cg.bind(null,t)):y1(Cg.bind(null,t)),F2(function(){!(_t&6)&&Jo()}),r=null;else{switch(V0(n)){case 1:r=Xd;break;case 4:r=W0;break;case 16:r=Il;break;case 536870912:r=G0;break;default:r=Il}r=my(r,uy.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function uy(t,e){if(vl=-1,wl=0,_t&6)throw Error(W(327));var r=t.callbackNode;if(qi()&&t.callbackNode!==r)return null;var n=$l(t,t===_e?Ke:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Yl(t,n);else{e=n;var o=_t;_t|=2;var i=hy();(_e!==t||Ke!==e)&&(po=null,ls=se()+500,ci(t,e));do try{fS();break}catch(l){cy(t,l)}while(!0);af(),Vl.current=i,_t=o,ve!==null?e=0:(_e=null,Ke=0,e=xe)}if(e!==0){if(e===2&&(o=Ch(t),o!==0&&(n=o,e=Qh(t,o))),e===1)throw r=ga,ci(t,0),Lo(t,n),Dr(t,se()),r;if(e===6)Lo(t,n);else{if(o=t.current.alternate,!(n&30)&&!hS(o)&&(e=Yl(t,n),e===2&&(i=Ch(t),i!==0&&(n=i,e=Qh(t,i))),e===1))throw r=ga,ci(t,0),Lo(t,n),Dr(t,se()),r;switch(t.finishedWork=o,t.finishedLanes=n,e){case 0:case 1:throw Error(W(345));case 2:ii(t,jr,po);break;case 3:if(Lo(t,n),(n&130023424)===n&&(e=Ef+500-se(),10<e)){if($l(t,0)!==0)break;if(o=t.suspendedLanes,(o&n)!==n){or(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=$h(ii.bind(null,t,jr,po),e);break}ii(t,jr,po);break;case 4:if(Lo(t,n),(n&4194240)===n)break;for(e=t.eventTimes,o=-1;0<n;){var a=31-Yn(n);i=1<<a,a=e[a],a>o&&(o=a),n&=~i}if(n=o,n=se()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*cS(n/1960))-n,10<n){t.timeoutHandle=$h(ii.bind(null,t,jr,po),n);break}ii(t,jr,po);break;case 5:ii(t,jr,po);break;default:throw Error(W(329))}}}return Dr(t,se()),t.callbackNode===r?uy.bind(null,t):null}function Qh(t,e){var r=Ks;return t.current.memoizedState.isDehydrated&&(ci(t,e).flags|=256),t=Yl(t,e),t!==2&&(e=jr,jr=r,e!==null&&qh(e)),t}function qh(t){jr===null?jr=t:jr.push.apply(jr,t)}function hS(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var o=r[n],i=o.getSnapshot;o=o.value;try{if(!qn(i(),o))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Lo(t,e){for(e&=~Sf,e&=~$u,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Yn(e),n=1<<r;t[r]=-1,e&=~n}}function Cg(t){if(_t&6)throw Error(W(327));qi();var e=$l(t,0);if(!(e&1))return Dr(t,se()),null;var r=Yl(t,e);if(t.tag!==0&&r===2){var n=Ch(t);n!==0&&(e=n,r=Qh(t,n))}if(r===1)throw r=ga,ci(t,0),Lo(t,e),Dr(t,se()),r;if(r===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ii(t,jr,po),Dr(t,se()),null}function Cf(t,e){var r=_t;_t|=1;try{return t(e)}finally{_t=r,_t===0&&(ls=se()+500,Tu&&Jo())}}function yi(t){Oo!==null&&Oo.tag===0&&!(_t&6)&&qi();var e=_t;_t|=1;var r=Zr.transition,n=At;try{if(Zr.transition=null,At=1,t)return t()}finally{At=n,Zr.transition=r,_t=e,!(_t&6)&&Jo()}}function _f(){Br=Ui.current,Ht(Ui)}function ci(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,z2(r)),ve!==null)for(r=ve.return;r!==null;){var n=r;switch(nf(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Ol();break;case 3:ss(),Ht(Rr),Ht(er),ff();break;case 5:df(n);break;case 4:ss();break;case 13:Ht(Jt);break;case 19:Ht(Jt);break;case 10:lf(n.type._context);break;case 22:case 23:_f()}r=r.return}if(_e=t,ve=t=Go(t.current,null),Ke=Br=e,xe=0,ga=null,Sf=$u=mi=0,jr=Ks=null,ai!==null){for(e=0;e<ai.length;e++)if(r=ai[e],n=r.interleaved,n!==null){r.interleaved=null;var o=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=o,n.next=a}r.pending=n}ai=null}return t}function cy(t,e){do{var r=ve;try{if(af(),gl.current=Ul,Gl){for(var n=ee.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}Gl=!1}if(gi=0,Ee=we=ee=null,Vs=!1,da=0,xf.current=null,r===null||r.return===null){xe=1,ga=e,ve=null;break}t:{var i=t,a=r.return,l=r,c=e;if(e=Ke,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=cg(a);if(w!==null){w.flags&=-257,hg(w,a,l,i,e),w.mode&1&&ug(i,h,e),e=w,c=h;var C=e.updateQueue;if(C===null){var S=new Set;S.add(c),e.updateQueue=S}else C.add(c);break t}else{if(!(e&1)){ug(i,h,e),bf();break t}c=Error(W(426))}}else if(Ft&&l.mode&1){var P=cg(a);if(P!==null){!(P.flags&65536)&&(P.flags|=256),hg(P,a,l,i,e),of(as(c,l));break t}}i=c=as(c,l),xe!==4&&(xe=2),Ks===null?Ks=[i]:Ks.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=X1(i,c,e);rg(i,y);break t;case 1:l=c;var m=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof m.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Fo===null||!Fo.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=K1(i,l,e);rg(i,k);break t}}i=i.return}while(i!==null)}fy(r)}catch(M){e=M,ve===r&&r!==null&&(ve=r=r.return);continue}break}while(!0)}function hy(){var t=Vl.current;return Vl.current=Ul,t===null?Ul:t}function bf(){(xe===0||xe===3||xe===2)&&(xe=4),_e===null||!(mi&268435455)&&!($u&268435455)||Lo(_e,Ke)}function Yl(t,e){var r=_t;_t|=2;var n=hy();(_e!==t||Ke!==e)&&(po=null,ci(t,e));do try{dS();break}catch(o){cy(t,o)}while(!0);if(af(),_t=r,Vl.current=n,ve!==null)throw Error(W(261));return _e=null,Ke=0,xe}function dS(){for(;ve!==null;)dy(ve)}function fS(){for(;ve!==null&&!Bx();)dy(ve)}function dy(t){var e=gy(t.alternate,t,Br);t.memoizedProps=t.pendingProps,e===null?fy(t):ve=e,xf.current=null}function fy(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=sS(r,e),r!==null){r.flags&=32767,ve=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xe=6,ve=null;return}}else if(r=iS(r,e,Br),r!==null){ve=r;return}if(e=e.sibling,e!==null){ve=e;return}ve=e=t}while(e!==null);xe===0&&(xe=5)}function ii(t,e,r){var n=At,o=Zr.transition;try{Zr.transition=null,At=1,pS(t,e,r,n)}finally{Zr.transition=o,At=n}return null}function pS(t,e,r,n){do qi();while(Oo!==null);if(_t&6)throw Error(W(327));r=t.finishedWork;var o=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(Kx(t,i),t===_e&&(ve=_e=null,Ke=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||qa||(qa=!0,my(Il,function(){return qi(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Zr.transition,Zr.transition=null;var a=At;At=1;var l=_t;_t|=4,xf.current=null,lS(t,r),ay(r,t),L2(Ph),jl=!!Mh,Ph=Mh=null,t.current=r,uS(r),Nx(),_t=l,At=a,Zr.transition=i}else t.current=r;if(qa&&(qa=!1,Oo=t,Kl=o),i=t.pendingLanes,i===0&&(Fo=null),Fx(r.stateNode),Dr(t,se()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)o=e[r],n(o.value,{componentStack:o.stack,digest:o.digest});if(Xl)throw Xl=!1,t=Yh,Yh=null,t;return Kl&1&&t.tag!==0&&qi(),i=t.pendingLanes,i&1?t===Zh?Ys++:(Ys=0,Zh=t):Ys=0,Jo(),null}function qi(){if(Oo!==null){var t=V0(Kl),e=Zr.transition,r=At;try{if(Zr.transition=null,At=16>t?16:t,Oo===null)var n=!1;else{if(t=Oo,Oo=null,Kl=0,_t&6)throw Error(W(331));var o=_t;for(_t|=4,Y=t.current;Y!==null;){var i=Y,a=i.child;if(Y.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var h=l[c];for(Y=h;Y!==null;){var f=Y;switch(f.tag){case 0:case 11:case 15:Xs(8,f,i)}var p=f.child;if(p!==null)p.return=f,Y=p;else for(;Y!==null;){f=Y;var g=f.sibling,w=f.return;if(oy(f),f===h){Y=null;break}if(g!==null){g.return=w,Y=g;break}Y=w}}}var C=i.alternate;if(C!==null){var S=C.child;if(S!==null){C.child=null;do{var P=S.sibling;S.sibling=null,S=P}while(S!==null)}}Y=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,Y=a;else t:for(;Y!==null;){if(i=Y,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Xs(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Y=y;break t}Y=i.return}}var m=t.current;for(Y=m;Y!==null;){a=Y;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,Y=x;else t:for(a=m;Y!==null;){if(l=Y,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Iu(9,l)}}catch(M){oe(l,l.return,M)}if(l===a){Y=null;break t}var k=l.sibling;if(k!==null){k.return=l.return,Y=k;break t}Y=l.return}}if(_t=o,Jo(),ao&&typeof ao.onPostCommitFiberRoot=="function")try{ao.onPostCommitFiberRoot(Eu,t)}catch{}n=!0}return n}finally{At=r,Zr.transition=e}}return!1}function _g(t,e,r){e=as(r,e),e=X1(t,e,1),t=zo(t,e,1),e=or(),t!==null&&(ka(t,1,e),Dr(t,e))}function oe(t,e,r){if(t.tag===3)_g(t,t,r);else for(;e!==null;){if(e.tag===3){_g(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Fo===null||!Fo.has(n))){t=as(r,t),t=K1(e,t,1),e=zo(e,t,1),t=or(),e!==null&&(ka(e,1,t),Dr(e,t));break}}e=e.return}}function gS(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=or(),t.pingedLanes|=t.suspendedLanes&r,_e===t&&(Ke&r)===r&&(xe===4||xe===3&&(Ke&130023424)===Ke&&500>se()-Ef?ci(t,0):Sf|=r),Dr(t,e)}function py(t,e){e===0&&(t.mode&1?(e=Fa,Fa<<=1,!(Fa&130023424)&&(Fa=4194304)):e=1);var r=or();t=bo(t,e),t!==null&&(ka(t,e,r),Dr(t,r))}function mS(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),py(t,r)}function yS(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,o=t.memoizedState;o!==null&&(r=o.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(W(314))}n!==null&&n.delete(e),py(t,r)}var gy;gy=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rr.current)Lr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Lr=!1,oS(t,e,r);Lr=!!(t.flags&131072)}else Lr=!1,Ft&&e.flags&1048576&&v1(e,Nl,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;yl(t,e),t=e.pendingProps;var o=ns(e,er.current);Qi(e,r),o=gf(null,e,n,t,o,r);var i=mf();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Or(n)?(i=!0,Dl(e)):i=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,cf(e),o.updater=Mu,e.stateNode=o,o._reactInternals=e,Bh(e,n,t,r),e=zh(null,e,n,!0,i,r)):(e.tag=0,Ft&&i&&rf(e),nr(null,e,o,r),e=e.child),e;case 16:n=e.elementType;t:{switch(yl(t,e),t=e.pendingProps,o=n._init,n=o(n._payload),e.type=n,o=e.tag=wS(n),t=Un(n,t),o){case 0:e=Hh(null,e,n,t,r);break t;case 1:e=pg(null,e,n,t,r);break t;case 11:e=dg(null,e,n,t,r);break t;case 14:e=fg(null,e,n,Un(n.type,t),r);break t}throw Error(W(306,n,""))}return e;case 0:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:Un(n,o),Hh(t,e,n,o,r);case 1:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:Un(n,o),pg(t,e,n,o,r);case 3:t:{if(q1(e),t===null)throw Error(W(387));n=e.pendingProps,i=e.memoizedState,o=i.element,E1(t,e),Fl(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){o=as(Error(W(423)),e),e=gg(t,e,n,r,o);break t}else if(n!==o){o=as(Error(W(424)),e),e=gg(t,e,n,r,o);break t}else for(Nr=Ho(e.stateNode.containerInfo.firstChild),zr=e,Ft=!0,Xn=null,r=k1(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(os(),n===o){e=ko(t,e,r);break t}nr(t,e,n,r)}e=e.child}return e;case 5:return T1(e),t===null&&Rh(e),n=e.type,o=e.pendingProps,i=t!==null?t.memoizedProps:null,a=o.children,Ih(n,o)?a=null:i!==null&&Ih(n,i)&&(e.flags|=32),Q1(t,e),nr(t,e,a,r),e.child;case 6:return t===null&&Rh(e),null;case 13:return J1(t,e,r);case 4:return hf(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=is(e,null,n,r):nr(t,e,n,r),e.child;case 11:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:Un(n,o),dg(t,e,n,o,r);case 7:return nr(t,e,e.pendingProps,r),e.child;case 8:return nr(t,e,e.pendingProps.children,r),e.child;case 12:return nr(t,e,e.pendingProps.children,r),e.child;case 10:t:{if(n=e.type._context,o=e.pendingProps,i=e.memoizedProps,a=o.value,Dt(Hl,n._currentValue),n._currentValue=a,i!==null)if(qn(i.value,a)){if(i.children===o.children&&!Rr.current){e=ko(t,e,r);break t}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Eo(-1,r&-r),c.tag=2;var h=i.updateQueue;if(h!==null){h=h.shared;var f=h.pending;f===null?c.next=c:(c.next=f.next,f.next=c),h.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),Oh(i.return,r,e),l.lanes|=r;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(W(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),Oh(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}nr(t,e,o.children,r),e=e.child}return e;case 9:return o=e.type,n=e.pendingProps.children,Qi(e,r),o=Qr(o),n=n(o),e.flags|=1,nr(t,e,n,r),e.child;case 14:return n=e.type,o=Un(n,e.pendingProps),o=Un(n.type,o),fg(t,e,n,o,r);case 15:return Y1(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,o=e.pendingProps,o=e.elementType===n?o:Un(n,o),yl(t,e),e.tag=1,Or(n)?(t=!0,Dl(e)):t=!1,Qi(e,r),_1(e,n,o),Bh(e,n,o,r),zh(null,e,n,!0,t,r);case 19:return ty(t,e,r);case 22:return Z1(t,e,r)}throw Error(W(156,e.tag))};function my(t,e){return F0(t,e)}function vS(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yr(t,e,r,n){return new vS(t,e,r,n)}function kf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wS(t){if(typeof t=="function")return kf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gd)return 11;if(t===Ud)return 14}return 2}function Go(t,e){var r=t.alternate;return r===null?(r=Yr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function xl(t,e,r,n,o,i){var a=2;if(n=t,typeof t=="function")kf(t)&&(a=1);else if(typeof t=="string")a=5;else t:switch(t){case Ri:return hi(r.children,o,i,e);case Wd:a=8,o|=8;break;case lh:return t=Yr(12,r,e,o|2),t.elementType=lh,t.lanes=i,t;case uh:return t=Yr(13,r,e,o),t.elementType=uh,t.lanes=i,t;case ch:return t=Yr(19,r,e,o),t.elementType=ch,t.lanes=i,t;case b0:return ju(r,o,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case C0:a=10;break t;case _0:a=9;break t;case Gd:a=11;break t;case Ud:a=14;break t;case $o:a=16,n=null;break t}throw Error(W(130,t==null?t:typeof t,""))}return e=Yr(a,r,e,o),e.elementType=t,e.type=n,e.lanes=i,e}function hi(t,e,r,n){return t=Yr(7,t,n,e),t.lanes=r,t}function ju(t,e,r,n){return t=Yr(22,t,n,e),t.elementType=b0,t.lanes=r,t.stateNode={isHidden:!1},t}function Bc(t,e,r){return t=Yr(6,t,null,e),t.lanes=r,t}function Nc(t,e,r){return e=Yr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xS(t,e,r,n,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=wc(0),this.expirationTimes=wc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=wc(0),this.identifierPrefix=n,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Tf(t,e,r,n,o,i,a,l,c){return t=new xS(t,e,r,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Yr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},cf(i),t}function SS(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Li,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function yy(t){if(!t)return Ko;t=t._reactInternals;t:{if(Ii(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Or(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var r=t.type;if(Or(r))return m1(t,r,e)}return e}function vy(t,e,r,n,o,i,a,l,c){return t=Tf(r,n,!0,t,o,i,a,l,c),t.context=yy(null),r=t.current,n=or(),o=Wo(r),i=Eo(n,o),i.callback=e??null,zo(r,i,o),t.current.lanes=o,ka(t,o,n),Dr(t,n),t}function Au(t,e,r,n){var o=e.current,i=or(),a=Wo(o);return r=yy(r),e.context===null?e.context=r:e.pendingContext=r,e=Eo(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=zo(o,e,a),t!==null&&(Zn(t,o,a,i),pl(t,o,a)),a}function Zl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function bg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function Mf(t,e){bg(t,e),(t=t.alternate)&&bg(t,e)}function ES(){return null}var wy=typeof reportError=="function"?reportError:function(t){console.error(t)};function Pf(t){this._internalRoot=t}Lu.prototype.render=Pf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Au(t,e,null,null)};Lu.prototype.unmount=Pf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;yi(function(){Au(null,t,null,null)}),e[_o]=null}};function Lu(t){this._internalRoot=t}Lu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Y0();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Ao.length&&e!==0&&e<Ao[r].priority;r++);Ao.splice(r,0,t),r===0&&Q0(t)}};function If(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ru(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function kg(){}function CS(t,e,r,n,o){if(o){if(typeof n=="function"){var i=n;n=function(){var h=Zl(a);i.call(h)}}var a=vy(e,n,t,0,null,!1,!1,"",kg);return t._reactRootContainer=a,t[_o]=a.current,aa(t.nodeType===8?t.parentNode:t),yi(),a}for(;o=t.lastChild;)t.removeChild(o);if(typeof n=="function"){var l=n;n=function(){var h=Zl(c);l.call(h)}}var c=Tf(t,0,!1,null,null,!1,!1,"",kg);return t._reactRootContainer=c,t[_o]=c.current,aa(t.nodeType===8?t.parentNode:t),yi(function(){Au(e,c,r,n)}),c}function Ou(t,e,r,n,o){var i=r._reactRootContainer;if(i){var a=i;if(typeof o=="function"){var l=o;o=function(){var c=Zl(a);l.call(c)}}Au(e,a,t,o)}else a=CS(r,e,t,o,n);return Zl(a)}X0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Ds(e.pendingLanes);r!==0&&(Kd(e,r|1),Dr(e,se()),!(_t&6)&&(ls=se()+500,Jo()))}break;case 13:yi(function(){var n=bo(t,1);if(n!==null){var o=or();Zn(n,t,1,o)}}),Mf(t,1)}};Yd=function(t){if(t.tag===13){var e=bo(t,134217728);if(e!==null){var r=or();Zn(e,t,134217728,r)}Mf(t,134217728)}};K0=function(t){if(t.tag===13){var e=Wo(t),r=bo(t,e);if(r!==null){var n=or();Zn(r,t,e,n)}Mf(t,e)}};Y0=function(){return At};Z0=function(t,e){var r=At;try{return At=t,e()}finally{At=r}};xh=function(t,e,r){switch(e){case"input":if(fh(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var o=ku(n);if(!o)throw Error(W(90));T0(n),fh(n,o)}}}break;case"textarea":P0(t,r);break;case"select":e=r.value,e!=null&&Xi(t,!!r.multiple,e,!1)}};O0=Cf;D0=yi;var _S={usingClientEntryPoint:!1,Events:[Ma,Ni,ku,L0,R0,Cf]},Ls={findFiberByHostInstance:si,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},bS={bundleType:Ls.bundleType,version:Ls.version,rendererPackageName:Ls.rendererPackageName,rendererConfig:Ls.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:To.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=H0(t),t===null?null:t.stateNode},findFiberByHostInstance:Ls.findFiberByHostInstance||ES,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ja=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ja.isDisabled&&Ja.supportsFiber)try{Eu=Ja.inject(bS),ao=Ja}catch{}}Wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_S;Wr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!If(e))throw Error(W(200));return SS(t,e,null,r)};Wr.createRoot=function(t,e){if(!If(t))throw Error(W(299));var r=!1,n="",o=wy;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=Tf(t,1,!1,null,null,r,!1,n,o),t[_o]=e.current,aa(t.nodeType===8?t.parentNode:t),new Pf(e)};Wr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=H0(e),t=t===null?null:t.stateNode,t};Wr.flushSync=function(t){return yi(t)};Wr.hydrate=function(t,e,r){if(!Ru(e))throw Error(W(200));return Ou(null,t,e,!0,r)};Wr.hydrateRoot=function(t,e,r){if(!If(t))throw Error(W(405));var n=r!=null&&r.hydratedSources||null,o=!1,i="",a=wy;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=vy(e,null,t,1,r??null,o,!1,i,a),t[_o]=e.current,aa(t),n)for(t=0;t<n.length;t++)r=n[t],o=r._getVersion,o=o(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,o]:e.mutableSourceEagerHydrationData.push(r,o);return new Lu(e)};Wr.render=function(t,e,r){if(!Ru(e))throw Error(W(200));return Ou(null,t,e,!1,r)};Wr.unmountComponentAtNode=function(t){if(!Ru(t))throw Error(W(40));return t._reactRootContainer?(yi(function(){Ou(null,null,t,!1,function(){t._reactRootContainer=null,t[_o]=null})}),!0):!1};Wr.unstable_batchedUpdates=Cf;Wr.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Ru(r))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return Ou(t,e,r,!1,n)};Wr.version="18.2.0-next-9e3b772b8-20220608";function xy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xy)}catch(t){console.error(t)}}xy(),v0.exports=Wr;var $f=v0.exports,Tg=$f;sh.createRoot=Tg.createRoot,sh.hydrateRoot=Tg.hydrateRoot;var Jh=function(t,e){return Jh=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Jh(t,e)};function tn(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Jh(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var q=function(){return q=Object.assign||function(e){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},q.apply(this,arguments)};function us(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]]);return r}function oo(t,e,r){if(r||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return t.concat(i||Array.prototype.slice.call(e))}var Sy={exports:{}},Lt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var be=typeof Symbol=="function"&&Symbol.for,jf=be?Symbol.for("react.element"):60103,Af=be?Symbol.for("react.portal"):60106,Du=be?Symbol.for("react.fragment"):60107,Bu=be?Symbol.for("react.strict_mode"):60108,Nu=be?Symbol.for("react.profiler"):60114,Hu=be?Symbol.for("react.provider"):60109,zu=be?Symbol.for("react.context"):60110,Lf=be?Symbol.for("react.async_mode"):60111,Fu=be?Symbol.for("react.concurrent_mode"):60111,Wu=be?Symbol.for("react.forward_ref"):60112,Gu=be?Symbol.for("react.suspense"):60113,kS=be?Symbol.for("react.suspense_list"):60120,Uu=be?Symbol.for("react.memo"):60115,Vu=be?Symbol.for("react.lazy"):60116,TS=be?Symbol.for("react.block"):60121,MS=be?Symbol.for("react.fundamental"):60117,PS=be?Symbol.for("react.responder"):60118,IS=be?Symbol.for("react.scope"):60119;function Ur(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case jf:switch(t=t.type,t){case Lf:case Fu:case Du:case Nu:case Bu:case Gu:return t;default:switch(t=t&&t.$$typeof,t){case zu:case Wu:case Vu:case Uu:case Hu:return t;default:return e}}case Af:return e}}}function Ey(t){return Ur(t)===Fu}Lt.AsyncMode=Lf;Lt.ConcurrentMode=Fu;Lt.ContextConsumer=zu;Lt.ContextProvider=Hu;Lt.Element=jf;Lt.ForwardRef=Wu;Lt.Fragment=Du;Lt.Lazy=Vu;Lt.Memo=Uu;Lt.Portal=Af;Lt.Profiler=Nu;Lt.StrictMode=Bu;Lt.Suspense=Gu;Lt.isAsyncMode=function(t){return Ey(t)||Ur(t)===Lf};Lt.isConcurrentMode=Ey;Lt.isContextConsumer=function(t){return Ur(t)===zu};Lt.isContextProvider=function(t){return Ur(t)===Hu};Lt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===jf};Lt.isForwardRef=function(t){return Ur(t)===Wu};Lt.isFragment=function(t){return Ur(t)===Du};Lt.isLazy=function(t){return Ur(t)===Vu};Lt.isMemo=function(t){return Ur(t)===Uu};Lt.isPortal=function(t){return Ur(t)===Af};Lt.isProfiler=function(t){return Ur(t)===Nu};Lt.isStrictMode=function(t){return Ur(t)===Bu};Lt.isSuspense=function(t){return Ur(t)===Gu};Lt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Du||t===Fu||t===Nu||t===Bu||t===Gu||t===kS||typeof t=="object"&&t!==null&&(t.$$typeof===Vu||t.$$typeof===Uu||t.$$typeof===Hu||t.$$typeof===zu||t.$$typeof===Wu||t.$$typeof===MS||t.$$typeof===PS||t.$$typeof===IS||t.$$typeof===TS)};Lt.typeOf=Ur;Sy.exports=Lt;var $S=Sy.exports,Cy=$S,jS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},AS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},_y={};_y[Cy.ForwardRef]=jS;_y[Cy.Memo]=AS;function by(t,e,r){if(r===void 0&&(r=Error),!t)throw new r(e)}var Et;(function(t){t[t.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",t[t.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",t[t.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",t[t.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",t[t.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",t[t.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",t[t.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",t[t.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",t[t.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",t[t.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",t[t.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",t[t.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",t[t.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",t[t.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",t[t.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",t[t.INVALID_TAG=23]="INVALID_TAG",t[t.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",t[t.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",t[t.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(Et||(Et={}));var Nt;(function(t){t[t.literal=0]="literal",t[t.argument=1]="argument",t[t.number=2]="number",t[t.date=3]="date",t[t.time=4]="time",t[t.select=5]="select",t[t.plural=6]="plural",t[t.pound=7]="pound",t[t.tag=8]="tag"})(Nt||(Nt={}));var cs;(function(t){t[t.number=0]="number",t[t.dateTime=1]="dateTime"})(cs||(cs={}));function Mg(t){return t.type===Nt.literal}function LS(t){return t.type===Nt.argument}function ky(t){return t.type===Nt.number}function Ty(t){return t.type===Nt.date}function My(t){return t.type===Nt.time}function Py(t){return t.type===Nt.select}function Iy(t){return t.type===Nt.plural}function RS(t){return t.type===Nt.pound}function $y(t){return t.type===Nt.tag}function jy(t){return!!(t&&typeof t=="object"&&t.type===cs.number)}function td(t){return!!(t&&typeof t=="object"&&t.type===cs.dateTime)}var Ay=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,OS=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function DS(t){var e={};return t.replace(OS,function(r){var n=r.length;switch(r[0]){case"G":e.era=n===4?"long":n===5?"narrow":"short";break;case"y":e.year=n===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][n-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][n-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=n===4?"short":n===5?"narrow":"short";break;case"e":if(n<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][n-4];break;case"c":if(n<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][n-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][n-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][n-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][n-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][n-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][n-1];break;case"s":e.second=["numeric","2-digit"][n-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":e.timeZoneName=n<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),e}var BS=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function NS(t){if(t.length===0)throw new Error("Number skeleton cannot be empty");for(var e=t.split(BS).filter(function(g){return g.length>0}),r=[],n=0,o=e;n<o.length;n++){var i=o[n],a=i.split("/");if(a.length===0)throw new Error("Invalid number skeleton");for(var l=a[0],c=a.slice(1),h=0,f=c;h<f.length;h++){var p=f[h];if(p.length===0)throw new Error("Invalid number skeleton")}r.push({stem:l,options:c})}return r}function HS(t){return t.replace(/^(.*?)-/,"")}var Pg=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,Ly=/^(@+)?(\+|#+)?[rs]?$/g,zS=/(\*)(0+)|(#+)(0+)|(0+)/g,Ry=/^(0+)$/;function Ig(t){var e={};return t[t.length-1]==="r"?e.roundingPriority="morePrecision":t[t.length-1]==="s"&&(e.roundingPriority="lessPrecision"),t.replace(Ly,function(r,n,o){return typeof o!="string"?(e.minimumSignificantDigits=n.length,e.maximumSignificantDigits=n.length):o==="+"?e.minimumSignificantDigits=n.length:n[0]==="#"?e.maximumSignificantDigits=n.length:(e.minimumSignificantDigits=n.length,e.maximumSignificantDigits=n.length+(typeof o=="string"?o.length:0)),""}),e}function Oy(t){switch(t){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function FS(t){var e;if(t[0]==="E"&&t[1]==="E"?(e={notation:"engineering"},t=t.slice(2)):t[0]==="E"&&(e={notation:"scientific"},t=t.slice(1)),e){var r=t.slice(0,2);if(r==="+!"?(e.signDisplay="always",t=t.slice(2)):r==="+?"&&(e.signDisplay="exceptZero",t=t.slice(2)),!Ry.test(t))throw new Error("Malformed concise eng/scientific notation");e.minimumIntegerDigits=t.length}return e}function $g(t){var e={},r=Oy(t);return r||e}function WS(t){for(var e={},r=0,n=t;r<n.length;r++){var o=n[r];switch(o.stem){case"percent":case"%":e.style="percent";continue;case"%x100":e.style="percent",e.scale=100;continue;case"currency":e.style="currency",e.currency=o.options[0];continue;case"group-off":case",_":e.useGrouping=!1;continue;case"precision-integer":case".":e.maximumFractionDigits=0;continue;case"measure-unit":case"unit":e.style="unit",e.unit=HS(o.options[0]);continue;case"compact-short":case"K":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":case"KK":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e=q(q(q({},e),{notation:"scientific"}),o.options.reduce(function(c,h){return q(q({},c),$g(h))},{}));continue;case"engineering":e=q(q(q({},e),{notation:"engineering"}),o.options.reduce(function(c,h){return q(q({},c),$g(h))},{}));continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue;case"scale":e.scale=parseFloat(o.options[0]);continue;case"integer-width":if(o.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");o.options[0].replace(zS,function(c,h,f,p,g,w){if(h)e.minimumIntegerDigits=f.length;else{if(p&&g)throw new Error("We currently do not support maximum integer digits");if(w)throw new Error("We currently do not support exact integer digits")}return""});continue}if(Ry.test(o.stem)){e.minimumIntegerDigits=o.stem.length;continue}if(Pg.test(o.stem)){if(o.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");o.stem.replace(Pg,function(c,h,f,p,g,w){return f==="*"?e.minimumFractionDigits=h.length:p&&p[0]==="#"?e.maximumFractionDigits=p.length:g&&w?(e.minimumFractionDigits=g.length,e.maximumFractionDigits=g.length+w.length):(e.minimumFractionDigits=h.length,e.maximumFractionDigits=h.length),""});var i=o.options[0];i==="w"?e=q(q({},e),{trailingZeroDisplay:"stripIfInteger"}):i&&(e=q(q({},e),Ig(i)));continue}if(Ly.test(o.stem)){e=q(q({},e),Ig(o.stem));continue}var a=Oy(o.stem);a&&(e=q(q({},e),a));var l=FS(o.stem);l&&(e=q(q({},e),l))}return e}var tl={AX:["H"],BQ:["H"],CP:["H"],CZ:["H"],DK:["H"],FI:["H"],ID:["H"],IS:["H"],ML:["H"],NE:["H"],RU:["H"],SE:["H"],SJ:["H"],SK:["H"],AS:["h","H"],BT:["h","H"],DJ:["h","H"],ER:["h","H"],GH:["h","H"],IN:["h","H"],LS:["h","H"],PG:["h","H"],PW:["h","H"],SO:["h","H"],TO:["h","H"],VU:["h","H"],WS:["h","H"],"001":["H","h"],AL:["h","H","hB"],TD:["h","H","hB"],"ca-ES":["H","h","hB"],CF:["H","h","hB"],CM:["H","h","hB"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],LU:["H","h","hB"],NP:["H","h","hB"],PF:["H","h","hB"],SC:["H","h","hB"],SM:["H","h","hB"],SN:["H","h","hB"],TF:["H","h","hB"],VA:["H","h","hB"],CY:["h","H","hb","hB"],GR:["h","H","hb","hB"],CO:["h","H","hB","hb"],DO:["h","H","hB","hb"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],NA:["h","H","hB","hb"],PA:["h","H","hB","hb"],PR:["h","H","hB","hb"],VE:["h","H","hB","hb"],AC:["H","h","hb","hB"],AI:["H","h","hb","hB"],BW:["H","h","hb","hB"],BZ:["H","h","hb","hB"],CC:["H","h","hb","hB"],CK:["H","h","hb","hB"],CX:["H","h","hb","hB"],DG:["H","h","hb","hB"],FK:["H","h","hb","hB"],GB:["H","h","hb","hB"],GG:["H","h","hb","hB"],GI:["H","h","hb","hB"],IE:["H","h","hb","hB"],IM:["H","h","hb","hB"],IO:["H","h","hb","hB"],JE:["H","h","hb","hB"],LT:["H","h","hb","hB"],MK:["H","h","hb","hB"],MN:["H","h","hb","hB"],MS:["H","h","hb","hB"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],PN:["H","h","hb","hB"],SH:["H","h","hb","hB"],SX:["H","h","hb","hB"],TA:["H","h","hb","hB"],ZA:["H","h","hb","hB"],"af-ZA":["H","h","hB","hb"],AR:["H","h","hB","hb"],CL:["H","h","hB","hb"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],EA:["H","h","hB","hb"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],GT:["H","h","hB","hb"],HN:["H","h","hB","hb"],IC:["H","h","hB","hb"],KG:["H","h","hB","hb"],KM:["H","h","hB","hb"],LK:["H","h","hB","hb"],MA:["H","h","hB","hb"],MX:["H","h","hB","hb"],NI:["H","h","hB","hb"],PY:["H","h","hB","hb"],SV:["H","h","hB","hb"],UY:["H","h","hB","hb"],JP:["H","h","K"],AD:["H","hB"],AM:["H","hB"],AO:["H","hB"],AT:["H","hB"],AW:["H","hB"],BE:["H","hB"],BF:["H","hB"],BJ:["H","hB"],BL:["H","hB"],BR:["H","hB"],CG:["H","hB"],CI:["H","hB"],CV:["H","hB"],DE:["H","hB"],EE:["H","hB"],FR:["H","hB"],GA:["H","hB"],GF:["H","hB"],GN:["H","hB"],GP:["H","hB"],GW:["H","hB"],HR:["H","hB"],IL:["H","hB"],IT:["H","hB"],KZ:["H","hB"],MC:["H","hB"],MD:["H","hB"],MF:["H","hB"],MQ:["H","hB"],MZ:["H","hB"],NC:["H","hB"],NL:["H","hB"],PM:["H","hB"],PT:["H","hB"],RE:["H","hB"],RO:["H","hB"],SI:["H","hB"],SR:["H","hB"],ST:["H","hB"],TG:["H","hB"],TR:["H","hB"],WF:["H","hB"],YT:["H","hB"],BD:["h","hB","H"],PK:["h","hB","H"],AZ:["H","hB","h"],BA:["H","hB","h"],BG:["H","hB","h"],CH:["H","hB","h"],GE:["H","hB","h"],LI:["H","hB","h"],ME:["H","hB","h"],RS:["H","hB","h"],UA:["H","hB","h"],UZ:["H","hB","h"],XK:["H","hB","h"],AG:["h","hb","H","hB"],AU:["h","hb","H","hB"],BB:["h","hb","H","hB"],BM:["h","hb","H","hB"],BS:["h","hb","H","hB"],CA:["h","hb","H","hB"],DM:["h","hb","H","hB"],"en-001":["h","hb","H","hB"],FJ:["h","hb","H","hB"],FM:["h","hb","H","hB"],GD:["h","hb","H","hB"],GM:["h","hb","H","hB"],GU:["h","hb","H","hB"],GY:["h","hb","H","hB"],JM:["h","hb","H","hB"],KI:["h","hb","H","hB"],KN:["h","hb","H","hB"],KY:["h","hb","H","hB"],LC:["h","hb","H","hB"],LR:["h","hb","H","hB"],MH:["h","hb","H","hB"],MP:["h","hb","H","hB"],MW:["h","hb","H","hB"],NZ:["h","hb","H","hB"],SB:["h","hb","H","hB"],SG:["h","hb","H","hB"],SL:["h","hb","H","hB"],SS:["h","hb","H","hB"],SZ:["h","hb","H","hB"],TC:["h","hb","H","hB"],TT:["h","hb","H","hB"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],VC:["h","hb","H","hB"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],ZM:["h","hb","H","hB"],BO:["H","hB","h","hb"],EC:["H","hB","h","hb"],ES:["H","hB","h","hb"],GQ:["H","hB","h","hb"],PE:["H","hB","h","hb"],AE:["h","hB","hb","H"],"ar-001":["h","hB","hb","H"],BH:["h","hB","hb","H"],DZ:["h","hB","hb","H"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],HK:["h","hB","hb","H"],IQ:["h","hB","hb","H"],JO:["h","hB","hb","H"],KW:["h","hB","hb","H"],LB:["h","hB","hb","H"],LY:["h","hB","hb","H"],MO:["h","hB","hb","H"],MR:["h","hB","hb","H"],OM:["h","hB","hb","H"],PH:["h","hB","hb","H"],PS:["h","hB","hb","H"],QA:["h","hB","hb","H"],SA:["h","hB","hb","H"],SD:["h","hB","hb","H"],SY:["h","hB","hb","H"],TN:["h","hB","hb","H"],YE:["h","hB","hb","H"],AF:["H","hb","hB","h"],LA:["H","hb","hB","h"],CN:["H","hB","hb","h"],LV:["H","hB","hb","h"],TL:["H","hB","hb","h"],"zu-ZA":["H","hB","hb","h"],CD:["hB","H"],IR:["hB","H"],"hi-IN":["hB","h","H"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"te-IN":["hB","h","H"],KH:["hB","h","H","hb"],"ta-IN":["hB","h","hb","H"],BN:["hb","hB","h","H"],MY:["hb","hB","h","H"],ET:["hB","hb","h","H"],"gu-IN":["hB","hb","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],TW:["hB","hb","h","H"],KE:["hB","hb","H","h"],MM:["hB","hb","H","h"],TZ:["hB","hb","H","h"],UG:["hB","hb","H","h"]};function GS(t,e){for(var r="",n=0;n<t.length;n++){var o=t.charAt(n);if(o==="j"){for(var i=0;n+1<t.length&&t.charAt(n+1)===o;)i++,n++;var a=1+(i&1),l=i<2?1:3+(i>>1),c="a",h=US(e);for((h=="H"||h=="k")&&(l=0);l-- >0;)r+=c;for(;a-- >0;)r=h+r}else o==="J"?r+="H":r+=o}return r}function US(t){var e=t.hourCycle;if(e===void 0&&t.hourCycles&&t.hourCycles.length&&(e=t.hourCycles[0]),e)switch(e){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var r=t.language,n;r!=="root"&&(n=t.maximize().region);var o=tl[n||""]||tl[r||""]||tl["".concat(r,"-001")]||tl["001"];return o[0]}var Hc,VS=new RegExp("^".concat(Ay.source,"*")),XS=new RegExp("".concat(Ay.source,"*$"));function Ct(t,e){return{start:t,end:e}}var KS=!!String.prototype.startsWith,YS=!!String.fromCodePoint,ZS=!!Object.fromEntries,QS=!!String.prototype.codePointAt,qS=!!String.prototype.trimStart,JS=!!String.prototype.trimEnd,t3=!!Number.isSafeInteger,e3=t3?Number.isSafeInteger:function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t&&Math.abs(t)<=9007199254740991},ed=!0;try{var r3=By("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");ed=((Hc=r3.exec("a"))===null||Hc===void 0?void 0:Hc[0])==="a"}catch{ed=!1}var jg=KS?function(e,r,n){return e.startsWith(r,n)}:function(e,r,n){return e.slice(n,n+r.length)===r},rd=YS?String.fromCodePoint:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var n="",o=e.length,i=0,a;o>i;){if(a=e[i++],a>1114111)throw RangeError(a+" is not a valid code point");n+=a<65536?String.fromCharCode(a):String.fromCharCode(((a-=65536)>>10)+55296,a%1024+56320)}return n},Ag=ZS?Object.fromEntries:function(e){for(var r={},n=0,o=e;n<o.length;n++){var i=o[n],a=i[0],l=i[1];r[a]=l}return r},Dy=QS?function(e,r){return e.codePointAt(r)}:function(e,r){var n=e.length;if(!(r<0||r>=n)){var o=e.charCodeAt(r),i;return o<55296||o>56319||r+1===n||(i=e.charCodeAt(r+1))<56320||i>57343?o:(o-55296<<10)+(i-56320)+65536}},n3=qS?function(e){return e.trimStart()}:function(e){return e.replace(VS,"")},o3=JS?function(e){return e.trimEnd()}:function(e){return e.replace(XS,"")};function By(t,e){return new RegExp(t,e)}var nd;if(ed){var Lg=By("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");nd=function(e,r){var n;Lg.lastIndex=r;var o=Lg.exec(e);return(n=o[1])!==null&&n!==void 0?n:""}}else nd=function(e,r){for(var n=[];;){var o=Dy(e,r);if(o===void 0||Ny(o)||l3(o))break;n.push(o),r+=o>=65536?2:1}return rd.apply(void 0,n)};var i3=function(){function t(e,r){r===void 0&&(r={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!r.ignoreTag,this.locale=r.locale,this.requiresOtherClause=!!r.requiresOtherClause,this.shouldParseSkeletons=!!r.shouldParseSkeletons}return t.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},t.prototype.parseMessage=function(e,r,n){for(var o=[];!this.isEOF();){var i=this.char();if(i===123){var a=this.parseArgument(e,n);if(a.err)return a;o.push(a.val)}else{if(i===125&&e>0)break;if(i===35&&(r==="plural"||r==="selectordinal")){var l=this.clonePosition();this.bump(),o.push({type:Nt.pound,location:Ct(l,this.clonePosition())})}else if(i===60&&!this.ignoreTag&&this.peek()===47){if(n)break;return this.error(Et.UNMATCHED_CLOSING_TAG,Ct(this.clonePosition(),this.clonePosition()))}else if(i===60&&!this.ignoreTag&&od(this.peek()||0)){var a=this.parseTag(e,r);if(a.err)return a;o.push(a.val)}else{var a=this.parseLiteral(e,r);if(a.err)return a;o.push(a.val)}}}return{val:o,err:null}},t.prototype.parseTag=function(e,r){var n=this.clonePosition();this.bump();var o=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:Nt.literal,value:"<".concat(o,"/>"),location:Ct(n,this.clonePosition())},err:null};if(this.bumpIf(">")){var i=this.parseMessage(e+1,r,!0);if(i.err)return i;var a=i.val,l=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!od(this.char()))return this.error(Et.INVALID_TAG,Ct(l,this.clonePosition()));var c=this.clonePosition(),h=this.parseTagName();return o!==h?this.error(Et.UNMATCHED_CLOSING_TAG,Ct(c,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:Nt.tag,value:o,children:a,location:Ct(n,this.clonePosition())},err:null}:this.error(Et.INVALID_TAG,Ct(l,this.clonePosition())))}else return this.error(Et.UNCLOSED_TAG,Ct(n,this.clonePosition()))}else return this.error(Et.INVALID_TAG,Ct(n,this.clonePosition()))},t.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&a3(this.char());)this.bump();return this.message.slice(e,this.offset())},t.prototype.parseLiteral=function(e,r){for(var n=this.clonePosition(),o="";;){var i=this.tryParseQuote(r);if(i){o+=i;continue}var a=this.tryParseUnquoted(e,r);if(a){o+=a;continue}var l=this.tryParseLeftAngleBracket();if(l){o+=l;continue}break}var c=Ct(n,this.clonePosition());return{val:{type:Nt.literal,value:o,location:c},err:null}},t.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!s3(this.peek()||0))?(this.bump(),"<"):null},t.prototype.tryParseQuote=function(e){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(e==="plural"||e==="selectordinal")break;return null;default:return null}this.bump();var r=[this.char()];for(this.bump();!this.isEOF();){var n=this.char();if(n===39)if(this.peek()===39)r.push(39),this.bump();else{this.bump();break}else r.push(n);this.bump()}return rd.apply(void 0,r)},t.prototype.tryParseUnquoted=function(e,r){if(this.isEOF())return null;var n=this.char();return n===60||n===123||n===35&&(r==="plural"||r==="selectordinal")||n===125&&e>0?null:(this.bump(),rd(n))},t.prototype.parseArgument=function(e,r){var n=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(Et.EXPECT_ARGUMENT_CLOSING_BRACE,Ct(n,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(Et.EMPTY_ARGUMENT,Ct(n,this.clonePosition()));var o=this.parseIdentifierIfPossible().value;if(!o)return this.error(Et.MALFORMED_ARGUMENT,Ct(n,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(Et.EXPECT_ARGUMENT_CLOSING_BRACE,Ct(n,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:Nt.argument,value:o,location:Ct(n,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(Et.EXPECT_ARGUMENT_CLOSING_BRACE,Ct(n,this.clonePosition())):this.parseArgumentOptions(e,r,o,n);default:return this.error(Et.MALFORMED_ARGUMENT,Ct(n,this.clonePosition()))}},t.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),r=this.offset(),n=nd(this.message,r),o=r+n.length;this.bumpTo(o);var i=this.clonePosition(),a=Ct(e,i);return{value:n,location:a}},t.prototype.parseArgumentOptions=function(e,r,n,o){var i,a=this.clonePosition(),l=this.parseIdentifierIfPossible().value,c=this.clonePosition();switch(l){case"":return this.error(Et.EXPECT_ARGUMENT_TYPE,Ct(a,c));case"number":case"date":case"time":{this.bumpSpace();var h=null;if(this.bumpIf(",")){this.bumpSpace();var f=this.clonePosition(),p=this.parseSimpleArgStyleIfPossible();if(p.err)return p;var g=o3(p.val);if(g.length===0)return this.error(Et.EXPECT_ARGUMENT_STYLE,Ct(this.clonePosition(),this.clonePosition()));var w=Ct(f,this.clonePosition());h={style:g,styleLocation:w}}var C=this.tryParseArgumentClose(o);if(C.err)return C;var S=Ct(o,this.clonePosition());if(h&&jg(h==null?void 0:h.style,"::",0)){var P=n3(h.style.slice(2));if(l==="number"){var p=this.parseNumberSkeletonFromString(P,h.styleLocation);return p.err?p:{val:{type:Nt.number,value:n,location:S,style:p.val},err:null}}else{if(P.length===0)return this.error(Et.EXPECT_DATE_TIME_SKELETON,S);var y=P;this.locale&&(y=GS(P,this.locale));var g={type:cs.dateTime,pattern:y,location:h.styleLocation,parsedOptions:this.shouldParseSkeletons?DS(y):{}},m=l==="date"?Nt.date:Nt.time;return{val:{type:m,value:n,location:S,style:g},err:null}}}return{val:{type:l==="number"?Nt.number:l==="date"?Nt.date:Nt.time,value:n,location:S,style:(i=h==null?void 0:h.style)!==null&&i!==void 0?i:null},err:null}}case"plural":case"selectordinal":case"select":{var x=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(Et.EXPECT_SELECT_ARGUMENT_OPTIONS,Ct(x,q({},x)));this.bumpSpace();var k=this.parseIdentifierIfPossible(),M=0;if(l!=="select"&&k.value==="offset"){if(!this.bumpIf(":"))return this.error(Et.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Ct(this.clonePosition(),this.clonePosition()));this.bumpSpace();var p=this.tryParseDecimalInteger(Et.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Et.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(p.err)return p;this.bumpSpace(),k=this.parseIdentifierIfPossible(),M=p.val}var b=this.tryParsePluralOrSelectOptions(e,l,r,k);if(b.err)return b;var C=this.tryParseArgumentClose(o);if(C.err)return C;var T=Ct(o,this.clonePosition());return l==="select"?{val:{type:Nt.select,value:n,options:Ag(b.val),location:T},err:null}:{val:{type:Nt.plural,value:n,options:Ag(b.val),offset:M,pluralType:l==="plural"?"cardinal":"ordinal",location:T},err:null}}default:return this.error(Et.INVALID_ARGUMENT_TYPE,Ct(a,c))}},t.prototype.tryParseArgumentClose=function(e){return this.isEOF()||this.char()!==125?this.error(Et.EXPECT_ARGUMENT_CLOSING_BRACE,Ct(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},t.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,r=this.clonePosition();!this.isEOF();){var n=this.char();switch(n){case 39:{this.bump();var o=this.clonePosition();if(!this.bumpUntil("'"))return this.error(Et.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Ct(o,this.clonePosition()));this.bump();break}case 123:{e+=1,this.bump();break}case 125:{if(e>0)e-=1;else return{val:this.message.slice(r.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(r.offset,this.offset()),err:null}},t.prototype.parseNumberSkeletonFromString=function(e,r){var n=[];try{n=NS(e)}catch{return this.error(Et.INVALID_NUMBER_SKELETON,r)}return{val:{type:cs.number,tokens:n,location:r,parsedOptions:this.shouldParseSkeletons?WS(n):{}},err:null}},t.prototype.tryParsePluralOrSelectOptions=function(e,r,n,o){for(var i,a=!1,l=[],c=new Set,h=o.value,f=o.location;;){if(h.length===0){var p=this.clonePosition();if(r!=="select"&&this.bumpIf("=")){var g=this.tryParseDecimalInteger(Et.EXPECT_PLURAL_ARGUMENT_SELECTOR,Et.INVALID_PLURAL_ARGUMENT_SELECTOR);if(g.err)return g;f=Ct(p,this.clonePosition()),h=this.message.slice(p.offset,this.offset())}else break}if(c.has(h))return this.error(r==="select"?Et.DUPLICATE_SELECT_ARGUMENT_SELECTOR:Et.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,f);h==="other"&&(a=!0),this.bumpSpace();var w=this.clonePosition();if(!this.bumpIf("{"))return this.error(r==="select"?Et.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:Et.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Ct(this.clonePosition(),this.clonePosition()));var C=this.parseMessage(e+1,r,n);if(C.err)return C;var S=this.tryParseArgumentClose(w);if(S.err)return S;l.push([h,{value:C.val,location:Ct(w,this.clonePosition())}]),c.add(h),this.bumpSpace(),i=this.parseIdentifierIfPossible(),h=i.value,f=i.location}return l.length===0?this.error(r==="select"?Et.EXPECT_SELECT_ARGUMENT_SELECTOR:Et.EXPECT_PLURAL_ARGUMENT_SELECTOR,Ct(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!a?this.error(Et.MISSING_OTHER_CLAUSE,Ct(this.clonePosition(),this.clonePosition())):{val:l,err:null}},t.prototype.tryParseDecimalInteger=function(e,r){var n=1,o=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(n=-1);for(var i=!1,a=0;!this.isEOF();){var l=this.char();if(l>=48&&l<=57)i=!0,a=a*10+(l-48),this.bump();else break}var c=Ct(o,this.clonePosition());return i?(a*=n,e3(a)?{val:a,err:null}:this.error(r,c)):this.error(e,c)},t.prototype.offset=function(){return this.position.offset},t.prototype.isEOF=function(){return this.offset()===this.message.length},t.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},t.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var r=Dy(this.message,e);if(r===void 0)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return r},t.prototype.error=function(e,r){return{val:null,err:{kind:e,message:this.message,location:r}}},t.prototype.bump=function(){if(!this.isEOF()){var e=this.char();e===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},t.prototype.bumpIf=function(e){if(jg(this.message,e,this.offset())){for(var r=0;r<e.length;r++)this.bump();return!0}return!1},t.prototype.bumpUntil=function(e){var r=this.offset(),n=this.message.indexOf(e,r);return n>=0?(this.bumpTo(n),!0):(this.bumpTo(this.message.length),!1)},t.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var r=this.offset();if(r===e)break;if(r>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},t.prototype.bumpSpace=function(){for(;!this.isEOF()&&Ny(this.char());)this.bump()},t.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),r=this.offset(),n=this.message.charCodeAt(r+(e>=65536?2:1));return n??null},t}();function od(t){return t>=97&&t<=122||t>=65&&t<=90}function s3(t){return od(t)||t===47}function a3(t){return t===45||t===46||t>=48&&t<=57||t===95||t>=97&&t<=122||t>=65&&t<=90||t==183||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8255&&t<=8256||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039}function Ny(t){return t>=9&&t<=13||t===32||t===133||t>=8206&&t<=8207||t===8232||t===8233}function l3(t){return t>=33&&t<=35||t===36||t>=37&&t<=39||t===40||t===41||t===42||t===43||t===44||t===45||t>=46&&t<=47||t>=58&&t<=59||t>=60&&t<=62||t>=63&&t<=64||t===91||t===92||t===93||t===94||t===96||t===123||t===124||t===125||t===126||t===161||t>=162&&t<=165||t===166||t===167||t===169||t===171||t===172||t===174||t===176||t===177||t===182||t===187||t===191||t===215||t===247||t>=8208&&t<=8213||t>=8214&&t<=8215||t===8216||t===8217||t===8218||t>=8219&&t<=8220||t===8221||t===8222||t===8223||t>=8224&&t<=8231||t>=8240&&t<=8248||t===8249||t===8250||t>=8251&&t<=8254||t>=8257&&t<=8259||t===8260||t===8261||t===8262||t>=8263&&t<=8273||t===8274||t===8275||t>=8277&&t<=8286||t>=8592&&t<=8596||t>=8597&&t<=8601||t>=8602&&t<=8603||t>=8604&&t<=8607||t===8608||t>=8609&&t<=8610||t===8611||t>=8612&&t<=8613||t===8614||t>=8615&&t<=8621||t===8622||t>=8623&&t<=8653||t>=8654&&t<=8655||t>=8656&&t<=8657||t===8658||t===8659||t===8660||t>=8661&&t<=8691||t>=8692&&t<=8959||t>=8960&&t<=8967||t===8968||t===8969||t===8970||t===8971||t>=8972&&t<=8991||t>=8992&&t<=8993||t>=8994&&t<=9e3||t===9001||t===9002||t>=9003&&t<=9083||t===9084||t>=9085&&t<=9114||t>=9115&&t<=9139||t>=9140&&t<=9179||t>=9180&&t<=9185||t>=9186&&t<=9254||t>=9255&&t<=9279||t>=9280&&t<=9290||t>=9291&&t<=9311||t>=9472&&t<=9654||t===9655||t>=9656&&t<=9664||t===9665||t>=9666&&t<=9719||t>=9720&&t<=9727||t>=9728&&t<=9838||t===9839||t>=9840&&t<=10087||t===10088||t===10089||t===10090||t===10091||t===10092||t===10093||t===10094||t===10095||t===10096||t===10097||t===10098||t===10099||t===10100||t===10101||t>=10132&&t<=10175||t>=10176&&t<=10180||t===10181||t===10182||t>=10183&&t<=10213||t===10214||t===10215||t===10216||t===10217||t===10218||t===10219||t===10220||t===10221||t===10222||t===10223||t>=10224&&t<=10239||t>=10240&&t<=10495||t>=10496&&t<=10626||t===10627||t===10628||t===10629||t===10630||t===10631||t===10632||t===10633||t===10634||t===10635||t===10636||t===10637||t===10638||t===10639||t===10640||t===10641||t===10642||t===10643||t===10644||t===10645||t===10646||t===10647||t===10648||t>=10649&&t<=10711||t===10712||t===10713||t===10714||t===10715||t>=10716&&t<=10747||t===10748||t===10749||t>=10750&&t<=11007||t>=11008&&t<=11055||t>=11056&&t<=11076||t>=11077&&t<=11078||t>=11079&&t<=11084||t>=11085&&t<=11123||t>=11124&&t<=11125||t>=11126&&t<=11157||t===11158||t>=11159&&t<=11263||t>=11776&&t<=11777||t===11778||t===11779||t===11780||t===11781||t>=11782&&t<=11784||t===11785||t===11786||t===11787||t===11788||t===11789||t>=11790&&t<=11798||t===11799||t>=11800&&t<=11801||t===11802||t===11803||t===11804||t===11805||t>=11806&&t<=11807||t===11808||t===11809||t===11810||t===11811||t===11812||t===11813||t===11814||t===11815||t===11816||t===11817||t>=11818&&t<=11822||t===11823||t>=11824&&t<=11833||t>=11834&&t<=11835||t>=11836&&t<=11839||t===11840||t===11841||t===11842||t>=11843&&t<=11855||t>=11856&&t<=11857||t===11858||t>=11859&&t<=11903||t>=12289&&t<=12291||t===12296||t===12297||t===12298||t===12299||t===12300||t===12301||t===12302||t===12303||t===12304||t===12305||t>=12306&&t<=12307||t===12308||t===12309||t===12310||t===12311||t===12312||t===12313||t===12314||t===12315||t===12316||t===12317||t>=12318&&t<=12319||t===12320||t===12336||t===64830||t===64831||t>=65093&&t<=65094}function id(t){t.forEach(function(e){if(delete e.location,Py(e)||Iy(e))for(var r in e.options)delete e.options[r].location,id(e.options[r].value);else ky(e)&&jy(e.style)||(Ty(e)||My(e))&&td(e.style)?delete e.style.location:$y(e)&&id(e.children)})}function u3(t,e){e===void 0&&(e={}),e=q({shouldParseSkeletons:!0,requiresOtherClause:!0},e);var r=new i3(t,e).parse();if(r.err){var n=SyntaxError(Et[r.err.kind]);throw n.location=r.err.location,n.originalMessage=r.err.message,n}return e!=null&&e.captureLocation||id(r.val),r.val}function ro(t,e){var r=e&&e.cache?e.cache:g3,n=e&&e.serializer?e.serializer:p3,o=e&&e.strategy?e.strategy:h3;return o(t,{cache:r,serializer:n})}function c3(t){return t==null||typeof t=="number"||typeof t=="boolean"}function Hy(t,e,r,n){var o=c3(n)?n:r(n),i=e.get(o);return typeof i>"u"&&(i=t.call(this,n),e.set(o,i)),i}function zy(t,e,r){var n=Array.prototype.slice.call(arguments,3),o=r(n),i=e.get(o);return typeof i>"u"&&(i=t.apply(this,n),e.set(o,i)),i}function Rf(t,e,r,n,o){return r.bind(e,t,n,o)}function h3(t,e){var r=t.length===1?Hy:zy;return Rf(t,this,r,e.cache.create(),e.serializer)}function d3(t,e){return Rf(t,this,zy,e.cache.create(),e.serializer)}function f3(t,e){return Rf(t,this,Hy,e.cache.create(),e.serializer)}var p3=function(){return JSON.stringify(arguments)};function Of(){this.cache=Object.create(null)}Of.prototype.get=function(t){return this.cache[t]};Of.prototype.set=function(t,e){this.cache[t]=e};var g3={create:function(){return new Of}},no={variadic:d3,monadic:f3},co;(function(t){t.MISSING_VALUE="MISSING_VALUE",t.INVALID_VALUE="INVALID_VALUE",t.MISSING_INTL_API="MISSING_INTL_API"})(co||(co={}));var ti=function(t){tn(e,t);function e(r,n,o){var i=t.call(this,r)||this;return i.code=n,i.originalMessage=o,i}return e.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},e}(Error),Rg=function(t){tn(e,t);function e(r,n,o,i){return t.call(this,'Invalid values for "'.concat(r,'": "').concat(n,'". Options are "').concat(Object.keys(o).join('", "'),'"'),co.INVALID_VALUE,i)||this}return e}(ti),m3=function(t){tn(e,t);function e(r,n,o){return t.call(this,'Value for "'.concat(r,'" must be of type ').concat(n),co.INVALID_VALUE,o)||this}return e}(ti),y3=function(t){tn(e,t);function e(r,n){return t.call(this,'The intl string context variable "'.concat(r,'" was not provided to the string "').concat(n,'"'),co.MISSING_VALUE,n)||this}return e}(ti),rr;(function(t){t[t.literal=0]="literal",t[t.object=1]="object"})(rr||(rr={}));function v3(t){return t.length<2?t:t.reduce(function(e,r){var n=e[e.length-1];return!n||n.type!==rr.literal||r.type!==rr.literal?e.push(r):n.value+=r.value,e},[])}function Fy(t){return typeof t=="function"}function Sl(t,e,r,n,o,i,a){if(t.length===1&&Mg(t[0]))return[{type:rr.literal,value:t[0].value}];for(var l=[],c=0,h=t;c<h.length;c++){var f=h[c];if(Mg(f)){l.push({type:rr.literal,value:f.value});continue}if(RS(f)){typeof i=="number"&&l.push({type:rr.literal,value:r.getNumberFormat(e).format(i)});continue}var p=f.value;if(!(o&&p in o))throw new y3(p,a);var g=o[p];if(LS(f)){(!g||typeof g=="string"||typeof g=="number")&&(g=typeof g=="string"||typeof g=="number"?String(g):""),l.push({type:typeof g=="string"?rr.literal:rr.object,value:g});continue}if(Ty(f)){var w=typeof f.style=="string"?n.date[f.style]:td(f.style)?f.style.parsedOptions:void 0;l.push({type:rr.literal,value:r.getDateTimeFormat(e,w).format(g)});continue}if(My(f)){var w=typeof f.style=="string"?n.time[f.style]:td(f.style)?f.style.parsedOptions:n.time.medium;l.push({type:rr.literal,value:r.getDateTimeFormat(e,w).format(g)});continue}if(ky(f)){var w=typeof f.style=="string"?n.number[f.style]:jy(f.style)?f.style.parsedOptions:void 0;w&&w.scale&&(g=g*(w.scale||1)),l.push({type:rr.literal,value:r.getNumberFormat(e,w).format(g)});continue}if($y(f)){var C=f.children,S=f.value,P=o[S];if(!Fy(P))throw new m3(S,"function",a);var y=Sl(C,e,r,n,o,i),m=P(y.map(function(M){return M.value}));Array.isArray(m)||(m=[m]),l.push.apply(l,m.map(function(M){return{type:typeof M=="string"?rr.literal:rr.object,value:M}}))}if(Py(f)){var x=f.options[g]||f.options.other;if(!x)throw new Rg(f.value,g,Object.keys(f.options),a);l.push.apply(l,Sl(x.value,e,r,n,o));continue}if(Iy(f)){var x=f.options["=".concat(g)];if(!x){if(!Intl.PluralRules)throw new ti(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,co.MISSING_INTL_API,a);var k=r.getPluralRules(e,{type:f.pluralType}).select(g-(f.offset||0));x=f.options[k]||f.options.other}if(!x)throw new Rg(f.value,g,Object.keys(f.options),a);l.push.apply(l,Sl(x.value,e,r,n,o,g-(f.offset||0)));continue}}return v3(l)}function w3(t,e){return e?q(q(q({},t||{}),e||{}),Object.keys(t).reduce(function(r,n){return r[n]=q(q({},t[n]),e[n]||{}),r},{})):t}function x3(t,e){return e?Object.keys(t).reduce(function(r,n){return r[n]=w3(t[n],e[n]),r},q({},t)):t}function zc(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,r){t[e]=r}}}}}function S3(t){return t===void 0&&(t={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:ro(function(){for(var e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,oo([void 0],r,!1)))},{cache:zc(t.number),strategy:no.variadic}),getDateTimeFormat:ro(function(){for(var e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,oo([void 0],r,!1)))},{cache:zc(t.dateTime),strategy:no.variadic}),getPluralRules:ro(function(){for(var e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,oo([void 0],r,!1)))},{cache:zc(t.pluralRules),strategy:no.variadic})}}var Wy=function(){function t(e,r,n,o){r===void 0&&(r=t.defaultLocale);var i=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(c){var h=i.formatToParts(c);if(h.length===1)return h[0].value;var f=h.reduce(function(p,g){return!p.length||g.type!==rr.literal||typeof p[p.length-1]!="string"?p.push(g.value):p[p.length-1]+=g.value,p},[]);return f.length<=1?f[0]||"":f},this.formatToParts=function(c){return Sl(i.ast,i.locales,i.formatters,i.formats,c,void 0,i.message)},this.resolvedOptions=function(){var c;return{locale:((c=i.resolvedLocale)===null||c===void 0?void 0:c.toString())||Intl.NumberFormat.supportedLocalesOf(i.locales)[0]}},this.getAst=function(){return i.ast},this.locales=r,this.resolvedLocale=t.resolveLocale(r),typeof e=="string"){if(this.message=e,!t.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var a=o||{};a.formatters;var l=us(a,["formatters"]);this.ast=t.__parse(e,q(q({},l),{locale:this.resolvedLocale}))}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=x3(t.formats,n),this.formatters=o&&o.formatters||S3(this.formatterCache)}return Object.defineProperty(t,"defaultLocale",{get:function(){return t.memoizedDefaultLocale||(t.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),t.memoizedDefaultLocale},enumerable:!1,configurable:!0}),t.memoizedDefaultLocale=null,t.resolveLocale=function(e){if(!(typeof Intl.Locale>"u")){var r=Intl.NumberFormat.supportedLocalesOf(e);return r.length>0?new Intl.Locale(r[0]):new Intl.Locale(typeof e=="string"?e:e[0])}},t.__parse=u3,t.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},t}(),vi;(function(t){t.FORMAT_ERROR="FORMAT_ERROR",t.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",t.INVALID_CONFIG="INVALID_CONFIG",t.MISSING_DATA="MISSING_DATA",t.MISSING_TRANSLATION="MISSING_TRANSLATION"})(vi||(vi={}));var Ia=function(t){tn(e,t);function e(r,n,o){var i=this,a=o?o instanceof Error?o:new Error(String(o)):void 0;return i=t.call(this,"[@formatjs/intl Error ".concat(r,"] ").concat(n,`
`).concat(a?`
`.concat(a.message,`
`).concat(a.stack):""))||this,i.code=r,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(i,e),i}return e}(Error),E3=function(t){tn(e,t);function e(r,n){return t.call(this,vi.UNSUPPORTED_FORMATTER,r,n)||this}return e}(Ia),C3=function(t){tn(e,t);function e(r,n){return t.call(this,vi.INVALID_CONFIG,r,n)||this}return e}(Ia),Og=function(t){tn(e,t);function e(r,n){return t.call(this,vi.MISSING_DATA,r,n)||this}return e}(Ia),en=function(t){tn(e,t);function e(r,n,o){var i=t.call(this,vi.FORMAT_ERROR,"".concat(r,`
Locale: `).concat(n,`
`),o)||this;return i.locale=n,i}return e}(Ia),Fc=function(t){tn(e,t);function e(r,n,o,i){var a=t.call(this,"".concat(r,`
MessageID: `).concat(o==null?void 0:o.id,`
Default Message: `).concat(o==null?void 0:o.defaultMessage,`
Description: `).concat(o==null?void 0:o.description,`
`),n,i)||this;return a.descriptor=o,a.locale=n,a}return e}(en),_3=function(t){tn(e,t);function e(r,n){var o=t.call(this,vi.MISSING_TRANSLATION,'Missing message: "'.concat(r.id,'" for locale "').concat(n,'", using ').concat(r.defaultMessage?"default message (".concat(typeof r.defaultMessage=="string"?r.defaultMessage:r.defaultMessage.map(function(i){var a;return(a=i.value)!==null&&a!==void 0?a:JSON.stringify(i)}).join(),")"):"id"," as fallback."))||this;return o.descriptor=r,o}return e}(Ia);function $i(t,e,r){return r===void 0&&(r={}),e.reduce(function(n,o){return o in t?n[o]=t[o]:o in r&&(n[o]=r[o]),n},{})}var b3=function(t){},k3=function(t){},Gy={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:b3,onWarn:k3};function Uy(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function ri(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,r){t[e]=r}}}}}function T3(t){t===void 0&&(t=Uy());var e=Intl.RelativeTimeFormat,r=Intl.ListFormat,n=Intl.DisplayNames,o=ro(function(){for(var l,c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];return new((l=Intl.DateTimeFormat).bind.apply(l,oo([void 0],c,!1)))},{cache:ri(t.dateTime),strategy:no.variadic}),i=ro(function(){for(var l,c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];return new((l=Intl.NumberFormat).bind.apply(l,oo([void 0],c,!1)))},{cache:ri(t.number),strategy:no.variadic}),a=ro(function(){for(var l,c=[],h=0;h<arguments.length;h++)c[h]=arguments[h];return new((l=Intl.PluralRules).bind.apply(l,oo([void 0],c,!1)))},{cache:ri(t.pluralRules),strategy:no.variadic});return{getDateTimeFormat:o,getNumberFormat:i,getMessageFormat:ro(function(l,c,h,f){return new Wy(l,c,h,q({formatters:{getNumberFormat:i,getDateTimeFormat:o,getPluralRules:a}},f||{}))},{cache:ri(t.message),strategy:no.variadic}),getRelativeTimeFormat:ro(function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return new(e.bind.apply(e,oo([void 0],l,!1)))},{cache:ri(t.relativeTime),strategy:no.variadic}),getPluralRules:a,getListFormat:ro(function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return new(r.bind.apply(r,oo([void 0],l,!1)))},{cache:ri(t.list),strategy:no.variadic}),getDisplayNames:ro(function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return new(n.bind.apply(n,oo([void 0],l,!1)))},{cache:ri(t.displayNames),strategy:no.variadic})}}function Df(t,e,r,n){var o=t&&t[e],i;if(o&&(i=o[r]),i)return i;n(new E3("No ".concat(e," format named: ").concat(r)))}function el(t,e){return Object.keys(t).reduce(function(r,n){return r[n]=q({timeZone:e},t[n]),r},{})}function Dg(t,e){var r=Object.keys(q(q({},t),e));return r.reduce(function(n,o){return n[o]=q(q({},t[o]||{}),e[o]||{}),n},{})}function Bg(t,e){if(!e)return t;var r=Wy.formats;return q(q(q({},r),t),{date:Dg(el(r.date,e),el(t.date||{},e)),time:Dg(el(r.time,e),el(t.time||{},e))})}var sd=function(t,e,r,n,o){var i=t.locale,a=t.formats,l=t.messages,c=t.defaultLocale,h=t.defaultFormats,f=t.fallbackOnEmptyString,p=t.onError,g=t.timeZone,w=t.defaultRichTextElements;r===void 0&&(r={id:""});var C=r.id,S=r.defaultMessage;by(!!C,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var P=String(C),y=l&&Object.prototype.hasOwnProperty.call(l,P)&&l[P];if(Array.isArray(y)&&y.length===1&&y[0].type===Nt.literal)return y[0].value;if(!n&&y&&typeof y=="string"&&!w)return y.replace(/'\{(.*?)\}'/gi,"{$1}");if(n=q(q({},w),n||{}),a=Bg(a,g),h=Bg(h,g),!y){if(f===!1&&y==="")return y;if((!S||i&&i.toLowerCase()!==c.toLowerCase())&&p(new _3(r,i)),S)try{var m=e.getMessageFormat(S,c,h,o);return m.format(n)}catch(x){return p(new Fc('Error formatting default message for: "'.concat(P,'", rendering default message verbatim'),i,r,x)),typeof S=="string"?S:P}return P}try{var m=e.getMessageFormat(y,i,a,q({formatters:e},o||{}));return m.format(n)}catch(x){p(new Fc('Error formatting message: "'.concat(P,'", using ').concat(S?"default message":"id"," as fallback."),i,r,x))}if(S)try{var m=e.getMessageFormat(S,c,h,o);return m.format(n)}catch(x){p(new Fc('Error formatting the default message for: "'.concat(P,'", rendering message verbatim'),i,r,x))}return typeof y=="string"?y:typeof S=="string"?S:P},Vy=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function Xu(t,e,r,n){var o=t.locale,i=t.formats,a=t.onError,l=t.timeZone;n===void 0&&(n={});var c=n.format,h=q(q({},l&&{timeZone:l}),c&&Df(i,e,c,a)),f=$i(n,Vy,h);return e==="time"&&!f.hour&&!f.minute&&!f.second&&!f.timeStyle&&!f.dateStyle&&(f=q(q({},f),{hour:"numeric",minute:"numeric"})),r(o,f)}function M3(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=r[0],i=r[1],a=i===void 0?{}:i,l=typeof o=="string"?new Date(o||0):o;try{return Xu(t,"date",e,a).format(l)}catch(c){t.onError(new en("Error formatting date.",t.locale,c))}return String(l)}function P3(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=r[0],i=r[1],a=i===void 0?{}:i,l=typeof o=="string"?new Date(o||0):o;try{return Xu(t,"time",e,a).format(l)}catch(c){t.onError(new en("Error formatting time.",t.locale,c))}return String(l)}function I3(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=r[0],i=r[1],a=r[2],l=a===void 0?{}:a,c=t.timeZone,h=t.locale,f=t.onError,p=$i(l,Vy,c?{timeZone:c}:{});try{return e(h,p).formatRange(o,i)}catch(g){f(new en("Error formatting date time range.",t.locale,g))}return String(o)}function $3(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=r[0],i=r[1],a=i===void 0?{}:i,l=typeof o=="string"?new Date(o||0):o;try{return Xu(t,"date",e,a).formatToParts(l)}catch(c){t.onError(new en("Error formatting date.",t.locale,c))}return[]}function j3(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=r[0],i=r[1],a=i===void 0?{}:i,l=typeof o=="string"?new Date(o||0):o;try{return Xu(t,"time",e,a).formatToParts(l)}catch(c){t.onError(new en("Error formatting time.",t.locale,c))}return[]}var A3=["style","type","fallback","languageDisplay"];function L3(t,e,r,n){var o=t.locale,i=t.onError,a=Intl.DisplayNames;a||i(new ti(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,co.MISSING_INTL_API));var l=$i(n,A3);try{return e(o,l).of(r)}catch(c){i(new en("Error formatting display name.",o,c))}}var R3=["type","style"],Ng=Date.now();function O3(t){return"".concat(Ng,"_").concat(t,"_").concat(Ng)}function D3(t,e,r,n){n===void 0&&(n={});var o=Xy(t,e,r,n).reduce(function(i,a){var l=a.value;return typeof l!="string"?i.push(l):typeof i[i.length-1]=="string"?i[i.length-1]+=l:i.push(l),i},[]);return o.length===1?o[0]:o.length===0?"":o}function Xy(t,e,r,n){var o=t.locale,i=t.onError;n===void 0&&(n={});var a=Intl.ListFormat;a||i(new ti(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,co.MISSING_INTL_API));var l=$i(n,R3);try{var c={},h=r.map(function(f,p){if(typeof f=="object"){var g=O3(p);return c[g]=f,g}return String(f)});return e(o,l).formatToParts(h).map(function(f){return f.type==="literal"?f:q(q({},f),{value:c[f.value]||f.value})})}catch(f){i(new en("Error formatting list.",o,f))}return r}var B3=["type"];function N3(t,e,r,n){var o=t.locale,i=t.onError;n===void 0&&(n={}),Intl.PluralRules||i(new ti(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,co.MISSING_INTL_API));var a=$i(n,B3);try{return e(o,a).select(r)}catch(l){i(new en("Error formatting plural.",o,l))}return"other"}var H3=["numeric","style"];function z3(t,e,r){var n=t.locale,o=t.formats,i=t.onError;r===void 0&&(r={});var a=r.format,l=!!a&&Df(o,"relative",a,i)||{},c=$i(r,H3,l);return e(n,c)}function F3(t,e,r,n,o){o===void 0&&(o={}),n||(n="second");var i=Intl.RelativeTimeFormat;i||t.onError(new ti(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,co.MISSING_INTL_API));try{return z3(t,e,o).format(r,n)}catch(a){t.onError(new en("Error formatting relative time.",t.locale,a))}return String(r)}var W3=["style","currency","currencyDisplay","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem"];function Ky(t,e,r){var n=t.locale,o=t.formats,i=t.onError;r===void 0&&(r={});var a=r.format,l=a&&Df(o,"number",a,i)||{},c=$i(r,W3,l);return e(n,c)}function G3(t,e,r,n){n===void 0&&(n={});try{return Ky(t,e,n).format(r)}catch(o){t.onError(new en("Error formatting number.",t.locale,o))}return String(r)}function U3(t,e,r,n){n===void 0&&(n={});try{return Ky(t,e,n).formatToParts(r)}catch(o){t.onError(new en("Error formatting number.",t.locale,o))}return[]}function V3(t){var e=t?t[Object.keys(t)[0]]:void 0;return typeof e=="string"}function X3(t){t.onWarn&&t.defaultRichTextElements&&V3(t.messages||{})&&t.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.io/docs/getting-started/message-distribution`)}function K3(t,e){var r=T3(e),n=q(q({},Gy),t),o=n.locale,i=n.defaultLocale,a=n.onError;return o?!Intl.NumberFormat.supportedLocalesOf(o).length&&a?a(new Og('Missing locale data for locale: "'.concat(o,'" in Intl.NumberFormat. Using default locale: "').concat(i,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(o).length&&a&&a(new Og('Missing locale data for locale: "'.concat(o,'" in Intl.DateTimeFormat. Using default locale: "').concat(i,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):(a&&a(new C3('"locale" was not configured, using "'.concat(i,'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details'))),n.locale=n.defaultLocale||"en"),X3(n),q(q({},n),{formatters:r,formatNumber:G3.bind(null,n,r.getNumberFormat),formatNumberToParts:U3.bind(null,n,r.getNumberFormat),formatRelativeTime:F3.bind(null,n,r.getRelativeTimeFormat),formatDate:M3.bind(null,n,r.getDateTimeFormat),formatDateToParts:$3.bind(null,n,r.getDateTimeFormat),formatTime:P3.bind(null,n,r.getDateTimeFormat),formatDateTimeRange:I3.bind(null,n,r.getDateTimeFormat),formatTimeToParts:j3.bind(null,n,r.getDateTimeFormat),formatPlural:N3.bind(null,n,r.getPluralRules),formatMessage:sd.bind(null,n,r),$t:sd.bind(null,n,r),formatList:D3.bind(null,n,r.getListFormat),formatListToParts:Xy.bind(null,n,r.getListFormat),formatDisplayName:L3.bind(null,n,r.getDisplayNames)})}function Yy(t){by(t,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var Zy=q(q({},Gy),{textComponent:A.Fragment});function Y3(t){return function(e){return t(A.Children.toArray(e))}}function ad(t,e){if(t===e)return!0;if(!t||!e)return!1;var r=Object.keys(t),n=Object.keys(e),o=r.length;if(n.length!==o)return!1;for(var i=0;i<o;i++){var a=r[i];if(t[a]!==e[a]||!Object.prototype.hasOwnProperty.call(e,a))return!1}return!0}var Bf=typeof window<"u"?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=A.createContext(null)):A.createContext(null);Bf.Consumer;var Z3=Bf.Provider,Q3=Z3,q3=Bf;function $a(){var t=A.useContext(q3);return Yy(t),t}var ld;(function(t){t.formatDate="FormattedDate",t.formatTime="FormattedTime",t.formatNumber="FormattedNumber",t.formatList="FormattedList",t.formatDisplayName="FormattedDisplayName"})(ld||(ld={}));var ud;(function(t){t.formatDate="FormattedDateParts",t.formatTime="FormattedTimeParts",t.formatNumber="FormattedNumberParts",t.formatList="FormattedListParts"})(ud||(ud={}));function Qy(t){var e=function(r){var n=$a(),o=r.value,i=r.children,a=us(r,["value","children"]),l=typeof o=="string"?new Date(o||0):o,c=t==="formatDate"?n.formatDateToParts(l,a):n.formatTimeToParts(l,a);return i(c)};return e.displayName=ud[t],e}function ja(t){var e=function(r){var n=$a(),o=r.value,i=r.children,a=us(r,["value","children"]),l=n[t](o,a);if(typeof i=="function")return i(l);var c=n.textComponent||A.Fragment;return A.createElement(c,null,l)};return e.displayName=ld[t],e}function Wc(t){return{locale:t.locale,timeZone:t.timeZone,fallbackOnEmptyString:t.fallbackOnEmptyString,formats:t.formats,textComponent:t.textComponent,messages:t.messages,defaultLocale:t.defaultLocale,defaultFormats:t.defaultFormats,onError:t.onError,onWarn:t.onWarn,wrapRichTextChunksInFragment:t.wrapRichTextChunksInFragment,defaultRichTextElements:t.defaultRichTextElements}}function qy(t){return t&&Object.keys(t).reduce(function(e,r){var n=t[r];return e[r]=Fy(n)?Y3(n):n,e},{})}var Hg=function(t,e,r,n){for(var o=[],i=4;i<arguments.length;i++)o[i-4]=arguments[i];var a=qy(n),l=sd.apply(void 0,oo([t,e,r,a],o,!1));return Array.isArray(l)?A.Children.toArray(l):l},zg=function(t,e){var r=t.defaultRichTextElements,n=us(t,["defaultRichTextElements"]),o=qy(r),i=K3(q(q(q({},Zy),n),{defaultRichTextElements:o}),e),a={locale:i.locale,timeZone:i.timeZone,fallbackOnEmptyString:i.fallbackOnEmptyString,formats:i.formats,defaultLocale:i.defaultLocale,defaultFormats:i.defaultFormats,messages:i.messages,onError:i.onError,defaultRichTextElements:o};return q(q({},i),{formatMessage:Hg.bind(null,a,i.formatters),$t:Hg.bind(null,a,i.formatters)})},J3=function(t){tn(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.cache=Uy(),r.state={cache:r.cache,intl:zg(Wc(r.props),r.cache),prevConfig:Wc(r.props)},r}return e.getDerivedStateFromProps=function(r,n){var o=n.prevConfig,i=n.cache,a=Wc(r);return ad(o,a)?null:{intl:zg(a,i),prevConfig:a}},e.prototype.render=function(){return Yy(this.state.intl),A.createElement(Q3,{value:this.state.intl},this.props.children)},e.displayName="IntlProvider",e.defaultProps=Zy,e}(A.PureComponent);const tE=J3;function eE(t,e){var r=t.values,n=us(t,["values"]),o=e.values,i=us(e,["values"]);return ad(o,r)&&ad(n,i)}function Jy(t){var e=$a(),r=e.formatMessage,n=e.textComponent,o=n===void 0?A.Fragment:n,i=t.id,a=t.description,l=t.defaultMessage,c=t.values,h=t.children,f=t.tagName,p=f===void 0?o:f,g=t.ignoreTag,w={id:i,description:a,defaultMessage:l},C=r(w,c,{ignoreTag:g});return typeof h=="function"?h(Array.isArray(C)?C:[C]):p?A.createElement(p,null,A.Children.toArray(C)):A.createElement(A.Fragment,null,C)}Jy.displayName="FormattedMessage";var tv=A.memo(Jy,eE);tv.displayName="MemoizedFormattedMessage";const rl=tv;ja("formatDate");ja("formatTime");ja("formatNumber");ja("formatList");ja("formatDisplayName");Qy("formatDate");Qy("formatTime");var rE=Object.defineProperty,nE=(t,e,r)=>e in t?rE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,oE=(t,e,r)=>(nE(t,typeof e!="symbol"?e+"":e,r),r);const iE=[];for(let t=0;t<256;++t)iE.push((t+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const sE=(t,e=2)=>Number(t.toFixed(e)),fo=navigator.platform.toLowerCase().includes("win")||navigator.userAgent.includes("Windows");let aE=class{constructor(){oE(this,"eventMap",{})}on(e,r){return this.eventMap[e]||(this.eventMap[e]=[]),this.eventMap[e].push(r),this}emit(e,...r){const n=this.eventMap[e];return!n||n.length===0?!1:(n.forEach(o=>{o(...r)}),!0)}off(e,r){return this.eventMap[e]&&(this.eventMap[e]=this.eventMap[e].filter(n=>n!==r)),this}};var Wt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},cd={},lE={get exports(){return cd},set exports(t){cd=t}};(function(t,e){var r=200,n="__lodash_hash_undefined__",o=9007199254740991,i="[object Arguments]",a="[object Array]",l="[object Boolean]",c="[object Date]",h="[object Error]",f="[object Function]",p="[object GeneratorFunction]",g="[object Map]",w="[object Number]",C="[object Object]",S="[object Promise]",P="[object RegExp]",y="[object Set]",m="[object String]",x="[object Symbol]",k="[object WeakMap]",M="[object ArrayBuffer]",b="[object DataView]",T="[object Float32Array]",I="[object Float64Array]",H="[object Int8Array]",R="[object Int16Array]",O="[object Int32Array]",F="[object Uint8Array]",N="[object Uint8ClampedArray]",V="[object Uint16Array]",Z="[object Uint32Array]",ct=/[\\^$.*+?()[\]{}|]/g,et=/\w*$/,D=/^\[object .+?Constructor\]$/,X=/^(?:0|[1-9]\d*)$/,j={};j[i]=j[a]=j[M]=j[b]=j[l]=j[c]=j[T]=j[I]=j[H]=j[R]=j[O]=j[g]=j[w]=j[C]=j[P]=j[y]=j[m]=j[x]=j[F]=j[N]=j[V]=j[Z]=!0,j[h]=j[f]=j[k]=!1;var dt=typeof Wt=="object"&&Wt&&Wt.Object===Object&&Wt,gt=typeof self=="object"&&self&&self.Object===Object&&self,it=dt||gt||Function("return this")(),zt=e&&!e.nodeType&&e,U=zt&&!0&&t&&!t.nodeType&&t,ne=U&&U.exports===zt;function Ze(s,u){return s.set(u[0],u[1]),s}function wt(s,u){return s.add(u),s}function lr(s,u){for(var d=-1,v=s?s.length:0;++d<v&&u(s[d],d,s)!==!1;);return s}function ur(s,u){for(var d=-1,v=u.length,L=s.length;++d<v;)s[L+d]=u[d];return s}function ke(s,u,d,v){var L=-1,$=s?s.length:0;for(v&&$&&(d=s[++L]);++L<$;)d=u(d,s[L],L,s);return d}function Te(s,u){for(var d=-1,v=Array(s);++d<s;)v[d]=u(d);return v}function cr(s,u){return s==null?void 0:s[u]}function Me(s){var u=!1;if(s!=null&&typeof s.toString!="function")try{u=!!(s+"")}catch{}return u}function hr(s){var u=-1,d=Array(s.size);return s.forEach(function(v,L){d[++u]=[L,v]}),d}function Pe(s,u){return function(d){return s(u(d))}}function dr(s){var u=-1,d=Array(s.size);return s.forEach(function(v){d[++u]=v}),d}var rn=Array.prototype,nn=Function.prototype,ae=Object.prototype,Ie=it["__core-js_shared__"],fr=function(){var s=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),pr=nn.toString,bt=ae.hasOwnProperty,le=ae.toString,on=RegExp("^"+pr.call(bt).replace(ct,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vt=ne?it.Buffer:void 0,ue=it.Symbol,$e=it.Uint8Array,yt=Pe(Object.getPrototypeOf,Object),gr=Object.create,mr=ae.propertyIsEnumerable,sn=rn.splice,je=Object.getOwnPropertySymbols,ce=Vt?Vt.isBuffer:void 0,yr=Pe(Object.keys,Object),he=St(it,"DataView"),Xt=St(it,"Map"),xt=St(it,"Promise"),de=St(it,"Set"),Ae=St(it,"WeakMap"),Kt=St(Object,"create"),Le=ht(he),Yt=ht(Xt),Re=ht(xt),Oe=ht(de),De=ht(Ae),Rt=ue?ue.prototype:void 0,vr=Rt?Rt.valueOf:void 0;function Pt(s){var u=-1,d=s?s.length:0;for(this.clear();++u<d;){var v=s[u];this.set(v[0],v[1])}}function an(){this.__data__=Kt?Kt(null):{}}function ln(s){return this.has(s)&&delete this.__data__[s]}function un(s){var u=this.__data__;if(Kt){var d=u[s];return d===n?void 0:d}return bt.call(u,s)?u[s]:void 0}function wr(s){var u=this.__data__;return Kt?u[s]!==void 0:bt.call(u,s)}function Be(s,u){var d=this.__data__;return d[s]=Kt&&u===void 0?n:u,this}Pt.prototype.clear=an,Pt.prototype.delete=ln,Pt.prototype.get=un,Pt.prototype.has=wr,Pt.prototype.set=Be;function rt(s){var u=-1,d=s?s.length:0;for(this.clear();++u<d;){var v=s[u];this.set(v[0],v[1])}}function cn(){this.__data__=[]}function hn(s){var u=this.__data__,d=pe(u,s);if(d<0)return!1;var v=u.length-1;return d==v?u.pop():sn.call(u,d,1),!0}function dn(s){var u=this.__data__,d=pe(u,s);return d<0?void 0:u[d][1]}function fn(s){return pe(this.__data__,s)>-1}function pn(s,u){var d=this.__data__,v=pe(d,s);return v<0?d.push([s,u]):d[v][1]=u,this}rt.prototype.clear=cn,rt.prototype.delete=hn,rt.prototype.get=dn,rt.prototype.has=fn,rt.prototype.set=pn;function st(s){var u=-1,d=s?s.length:0;for(this.clear();++u<d;){var v=s[u];this.set(v[0],v[1])}}function gn(){this.__data__={hash:new Pt,map:new(Xt||rt),string:new Pt}}function mn(s){return Qt(this,s).delete(s)}function yn(s){return Qt(this,s).get(s)}function vn(s){return Qt(this,s).has(s)}function wn(s,u){return Qt(this,s).set(s,u),this}st.prototype.clear=gn,st.prototype.delete=mn,st.prototype.get=yn,st.prototype.has=vn,st.prototype.set=wn;function ft(s){this.__data__=new rt(s)}function xn(){this.__data__=new rt}function Sn(s){return this.__data__.delete(s)}function En(s){return this.__data__.get(s)}function Cn(s){return this.__data__.has(s)}function _n(s,u){var d=this.__data__;if(d instanceof rt){var v=d.__data__;if(!Xt||v.length<r-1)return v.push([s,u]),this;d=this.__data__=new st(v)}return d.set(s,u),this}ft.prototype.clear=xn,ft.prototype.delete=Sn,ft.prototype.get=En,ft.prototype.has=Cn,ft.prototype.set=_n;function fe(s,u){var d=Fe(s)||me(s)?Te(s.length,String):[],v=d.length,L=!!v;for(var $ in s)(u||bt.call(s,$))&&!(L&&($=="length"||Bn($,v)))&&d.push($);return d}function xr(s,u,d){var v=s[u];(!(bt.call(s,u)&&br(v,d))||d===void 0&&!(u in s))&&(s[u]=d)}function pe(s,u){for(var d=s.length;d--;)if(br(s[d][0],u))return d;return-1}function kt(s,u){return s&&ze(u,Ge(u),s)}function Ne(s,u,d,v,L,$,B){var z;if(v&&(z=$?v(s,L,$,B):v(s)),z!==void 0)return z;if(!Mt(s))return s;var Q=Fe(s);if(Q){if(z=On(s),!u)return An(s,z)}else{var G=$t(s),at=G==f||G==p;if(kr(s))return ge(s,u);if(G==C||G==i||at&&!$){if(Me(s))return $?s:{};if(z=Tt(at?{}:s),!u)return Ln(s,kt(z,s))}else{if(!j[G])return $?s:{};z=Dn(s,G,Ne,u)}}B||(B=new ft);var pt=B.get(s);if(pt)return pt;if(B.set(s,z),!Q)var J=d?Rn(s):Ge(s);return lr(J||s,function(lt,nt){J&&(nt=lt,lt=s[nt]),xr(z,nt,Ne(lt,u,d,v,nt,s,B))}),z}function bn(s){return Mt(s)?gr(s):{}}function kn(s,u,d){var v=u(s);return Fe(s)?v:ur(v,d(s))}function Tn(s){return le.call(s)}function Mn(s){if(!Mt(s)||Hn(s))return!1;var u=We(s)||Me(s)?on:D;return u.test(ht(s))}function Pn(s){if(!Cr(s))return yr(s);var u=[];for(var d in Object(s))bt.call(s,d)&&d!="constructor"&&u.push(d);return u}function ge(s,u){if(u)return s.slice();var d=new s.constructor(s.length);return s.copy(d),d}function He(s){var u=new s.constructor(s.byteLength);return new $e(u).set(new $e(s)),u}function Zt(s,u){var d=u?He(s.buffer):s.buffer;return new s.constructor(d,s.byteOffset,s.byteLength)}function Sr(s,u,d){var v=u?d(hr(s),!0):hr(s);return ke(v,Ze,new s.constructor)}function Er(s){var u=new s.constructor(s.source,et.exec(s));return u.lastIndex=s.lastIndex,u}function In(s,u,d){var v=u?d(dr(s),!0):dr(s);return ke(v,wt,new s.constructor)}function $n(s){return vr?Object(vr.call(s)):{}}function jn(s,u){var d=u?He(s.buffer):s.buffer;return new s.constructor(d,s.byteOffset,s.length)}function An(s,u){var d=-1,v=s.length;for(u||(u=Array(v));++d<v;)u[d]=s[d];return u}function ze(s,u,d,v){d||(d={});for(var L=-1,$=u.length;++L<$;){var B=u[L],z=v?v(d[B],s[B],B,d,s):void 0;xr(d,B,z===void 0?s[B]:z)}return d}function Ln(s,u){return ze(s,It(s),u)}function Rn(s){return kn(s,Ge,It)}function Qt(s,u){var d=s.__data__;return Nn(u)?d[typeof u=="string"?"string":"hash"]:d.map}function St(s,u){var d=cr(s,u);return Mn(d)?d:void 0}var It=je?Pe(je,Object):Fn,$t=Tn;(he&&$t(new he(new ArrayBuffer(1)))!=b||Xt&&$t(new Xt)!=g||xt&&$t(xt.resolve())!=S||de&&$t(new de)!=y||Ae&&$t(new Ae)!=k)&&($t=function(s){var u=le.call(s),d=u==C?s.constructor:void 0,v=d?ht(d):void 0;if(v)switch(v){case Le:return b;case Yt:return g;case Re:return S;case Oe:return y;case De:return k}return u});function On(s){var u=s.length,d=s.constructor(u);return u&&typeof s[0]=="string"&&bt.call(s,"index")&&(d.index=s.index,d.input=s.input),d}function Tt(s){return typeof s.constructor=="function"&&!Cr(s)?bn(yt(s)):{}}function Dn(s,u,d,v){var L=s.constructor;switch(u){case M:return He(s);case l:case c:return new L(+s);case b:return Zt(s,v);case T:case I:case H:case R:case O:case F:case N:case V:case Z:return jn(s,v);case g:return Sr(s,v,d);case w:case m:return new L(s);case P:return Er(s);case y:return In(s,v,d);case x:return $n(s)}}function Bn(s,u){return u=u??o,!!u&&(typeof s=="number"||X.test(s))&&s>-1&&s%1==0&&s<u}function Nn(s){var u=typeof s;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?s!=="__proto__":s===null}function Hn(s){return!!fr&&fr in s}function Cr(s){var u=s&&s.constructor,d=typeof u=="function"&&u.prototype||ae;return s===d}function ht(s){if(s!=null){try{return pr.call(s)}catch{}try{return s+""}catch{}}return""}function _r(s){return Ne(s,!0,!0)}function br(s,u){return s===u||s!==s&&u!==u}function me(s){return zn(s)&&bt.call(s,"callee")&&(!mr.call(s,"callee")||le.call(s)==i)}var Fe=Array.isArray;function ye(s){return s!=null&&Tr(s.length)&&!We(s)}function zn(s){return Mr(s)&&ye(s)}var kr=ce||Wn;function We(s){var u=Mt(s)?le.call(s):"";return u==f||u==p}function Tr(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=o}function Mt(s){var u=typeof s;return!!s&&(u=="object"||u=="function")}function Mr(s){return!!s&&typeof s=="object"}function Ge(s){return ye(s)?fe(s):Pn(s)}function Fn(){return[]}function Wn(){return!1}t.exports=_r})(lE,cd);var uE="Expected a function",Fg=NaN,cE="[object Symbol]",hE=/^\s+|\s+$/g,dE=/^[-+]0x[0-9a-f]+$/i,fE=/^0b[01]+$/i,pE=/^0o[0-7]+$/i,gE=parseInt,mE=typeof Wt=="object"&&Wt&&Wt.Object===Object&&Wt,yE=typeof self=="object"&&self&&self.Object===Object&&self,vE=mE||yE||Function("return this")(),wE=Object.prototype,xE=wE.toString,SE=Math.max,EE=Math.min,Gc=function(){return vE.Date.now()};function CE(t,e,r){var n,o,i,a,l,c,h=0,f=!1,p=!1,g=!0;if(typeof t!="function")throw new TypeError(uE);e=Wg(e)||0,hd(r)&&(f=!!r.leading,p="maxWait"in r,i=p?SE(Wg(r.maxWait)||0,e):i,g="trailing"in r?!!r.trailing:g);function w(b){var T=n,I=o;return n=o=void 0,h=b,a=t.apply(I,T),a}function C(b){return h=b,l=setTimeout(y,e),f?w(b):a}function S(b){var T=b-c,I=b-h,H=e-T;return p?EE(H,i-I):H}function P(b){var T=b-c,I=b-h;return c===void 0||T>=e||T<0||p&&I>=i}function y(){var b=Gc();if(P(b))return m(b);l=setTimeout(y,S(b))}function m(b){return l=void 0,g&&n?w(b):(n=o=void 0,a)}function x(){l!==void 0&&clearTimeout(l),h=0,n=c=o=l=void 0}function k(){return l===void 0?a:m(Gc())}function M(){var b=Gc(),T=P(b);if(n=arguments,o=this,c=b,T){if(l===void 0)return C(c);if(p)return l=setTimeout(y,e),w(c)}return l===void 0&&(l=setTimeout(y,e)),a}return M.cancel=x,M.flush=k,M}function hd(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function _E(t){return!!t&&typeof t=="object"}function bE(t){return typeof t=="symbol"||_E(t)&&xE.call(t)==cE}function Wg(t){if(typeof t=="number")return t;if(bE(t))return Fg;if(hd(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=hd(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(hE,"");var r=fE.test(t);return r||pE.test(t)?gE(t.slice(2),r?2:8):dE.test(t)?Fg:+t}var kE=CE;const TE=kE;var dd={},ME={get exports(){return dd},set exports(t){dd=t}};(function(t,e){var r=200,n="__lodash_hash_undefined__",o=1,i=2,a=9007199254740991,l="[object Arguments]",c="[object Array]",h="[object AsyncFunction]",f="[object Boolean]",p="[object Date]",g="[object Error]",w="[object Function]",C="[object GeneratorFunction]",S="[object Map]",P="[object Number]",y="[object Null]",m="[object Object]",x="[object Promise]",k="[object Proxy]",M="[object RegExp]",b="[object Set]",T="[object String]",I="[object Symbol]",H="[object Undefined]",R="[object WeakMap]",O="[object ArrayBuffer]",F="[object DataView]",N="[object Float32Array]",V="[object Float64Array]",Z="[object Int8Array]",ct="[object Int16Array]",et="[object Int32Array]",D="[object Uint8Array]",X="[object Uint8ClampedArray]",j="[object Uint16Array]",dt="[object Uint32Array]",gt=/[\\^$.*+?()[\]{}|]/g,it=/^\[object .+?Constructor\]$/,zt=/^(?:0|[1-9]\d*)$/,U={};U[N]=U[V]=U[Z]=U[ct]=U[et]=U[D]=U[X]=U[j]=U[dt]=!0,U[l]=U[c]=U[O]=U[f]=U[F]=U[p]=U[g]=U[w]=U[S]=U[P]=U[m]=U[M]=U[b]=U[T]=U[R]=!1;var ne=typeof Wt=="object"&&Wt&&Wt.Object===Object&&Wt,Ze=typeof self=="object"&&self&&self.Object===Object&&self,wt=ne||Ze||Function("return this")(),lr=e&&!e.nodeType&&e,ur=lr&&!0&&t&&!t.nodeType&&t,ke=ur&&ur.exports===lr,Te=ke&&ne.process,cr=function(){try{return Te&&Te.binding&&Te.binding("util")}catch{}}(),Me=cr&&cr.isTypedArray;function hr(s,u){for(var d=-1,v=s==null?0:s.length,L=0,$=[];++d<v;){var B=s[d];u(B,d,s)&&($[L++]=B)}return $}function Pe(s,u){for(var d=-1,v=u.length,L=s.length;++d<v;)s[L+d]=u[d];return s}function dr(s,u){for(var d=-1,v=s==null?0:s.length;++d<v;)if(u(s[d],d,s))return!0;return!1}function rn(s,u){for(var d=-1,v=Array(s);++d<s;)v[d]=u(d);return v}function nn(s){return function(u){return s(u)}}function ae(s,u){return s.has(u)}function Ie(s,u){return s==null?void 0:s[u]}function fr(s){var u=-1,d=Array(s.size);return s.forEach(function(v,L){d[++u]=[L,v]}),d}function pr(s,u){return function(d){return s(u(d))}}function bt(s){var u=-1,d=Array(s.size);return s.forEach(function(v){d[++u]=v}),d}var le=Array.prototype,on=Function.prototype,Vt=Object.prototype,ue=wt["__core-js_shared__"],$e=on.toString,yt=Vt.hasOwnProperty,gr=function(){var s=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),mr=Vt.toString,sn=RegExp("^"+$e.call(yt).replace(gt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),je=ke?wt.Buffer:void 0,ce=wt.Symbol,yr=wt.Uint8Array,he=Vt.propertyIsEnumerable,Xt=le.splice,xt=ce?ce.toStringTag:void 0,de=Object.getOwnPropertySymbols,Ae=je?je.isBuffer:void 0,Kt=pr(Object.keys,Object),Le=It(wt,"DataView"),Yt=It(wt,"Map"),Re=It(wt,"Promise"),Oe=It(wt,"Set"),De=It(wt,"WeakMap"),Rt=It(Object,"create"),vr=ht(Le),Pt=ht(Yt),an=ht(Re),ln=ht(Oe),un=ht(De),wr=ce?ce.prototype:void 0,Be=wr?wr.valueOf:void 0;function rt(s){var u=-1,d=s==null?0:s.length;for(this.clear();++u<d;){var v=s[u];this.set(v[0],v[1])}}function cn(){this.__data__=Rt?Rt(null):{},this.size=0}function hn(s){var u=this.has(s)&&delete this.__data__[s];return this.size-=u?1:0,u}function dn(s){var u=this.__data__;if(Rt){var d=u[s];return d===n?void 0:d}return yt.call(u,s)?u[s]:void 0}function fn(s){var u=this.__data__;return Rt?u[s]!==void 0:yt.call(u,s)}function pn(s,u){var d=this.__data__;return this.size+=this.has(s)?0:1,d[s]=Rt&&u===void 0?n:u,this}rt.prototype.clear=cn,rt.prototype.delete=hn,rt.prototype.get=dn,rt.prototype.has=fn,rt.prototype.set=pn;function st(s){var u=-1,d=s==null?0:s.length;for(this.clear();++u<d;){var v=s[u];this.set(v[0],v[1])}}function gn(){this.__data__=[],this.size=0}function mn(s){var u=this.__data__,d=ge(u,s);if(d<0)return!1;var v=u.length-1;return d==v?u.pop():Xt.call(u,d,1),--this.size,!0}function yn(s){var u=this.__data__,d=ge(u,s);return d<0?void 0:u[d][1]}function vn(s){return ge(this.__data__,s)>-1}function wn(s,u){var d=this.__data__,v=ge(d,s);return v<0?(++this.size,d.push([s,u])):d[v][1]=u,this}st.prototype.clear=gn,st.prototype.delete=mn,st.prototype.get=yn,st.prototype.has=vn,st.prototype.set=wn;function ft(s){var u=-1,d=s==null?0:s.length;for(this.clear();++u<d;){var v=s[u];this.set(v[0],v[1])}}function xn(){this.size=0,this.__data__={hash:new rt,map:new(Yt||st),string:new rt}}function Sn(s){var u=St(this,s).delete(s);return this.size-=u?1:0,u}function En(s){return St(this,s).get(s)}function Cn(s){return St(this,s).has(s)}function _n(s,u){var d=St(this,s),v=d.size;return d.set(s,u),this.size+=d.size==v?0:1,this}ft.prototype.clear=xn,ft.prototype.delete=Sn,ft.prototype.get=En,ft.prototype.has=Cn,ft.prototype.set=_n;function fe(s){var u=-1,d=s==null?0:s.length;for(this.__data__=new ft;++u<d;)this.add(s[u])}function xr(s){return this.__data__.set(s,n),this}function pe(s){return this.__data__.has(s)}fe.prototype.add=fe.prototype.push=xr,fe.prototype.has=pe;function kt(s){var u=this.__data__=new st(s);this.size=u.size}function Ne(){this.__data__=new st,this.size=0}function bn(s){var u=this.__data__,d=u.delete(s);return this.size=u.size,d}function kn(s){return this.__data__.get(s)}function Tn(s){return this.__data__.has(s)}function Mn(s,u){var d=this.__data__;if(d instanceof st){var v=d.__data__;if(!Yt||v.length<r-1)return v.push([s,u]),this.size=++d.size,this;d=this.__data__=new ft(v)}return d.set(s,u),this.size=d.size,this}kt.prototype.clear=Ne,kt.prototype.delete=bn,kt.prototype.get=kn,kt.prototype.has=Tn,kt.prototype.set=Mn;function Pn(s,u){var d=me(s),v=!d&&br(s),L=!d&&!v&&ye(s),$=!d&&!v&&!L&&Mr(s),B=d||v||L||$,z=B?rn(s.length,String):[],Q=z.length;for(var G in s)(u||yt.call(s,G))&&!(B&&(G=="length"||L&&(G=="offset"||G=="parent")||$&&(G=="buffer"||G=="byteLength"||G=="byteOffset")||Dn(G,Q)))&&z.push(G);return z}function ge(s,u){for(var d=s.length;d--;)if(_r(s[d][0],u))return d;return-1}function He(s,u,d){var v=u(s);return me(s)?v:Pe(v,d(s))}function Zt(s){return s==null?s===void 0?H:y:xt&&xt in Object(s)?$t(s):Cr(s)}function Sr(s){return Mt(s)&&Zt(s)==l}function Er(s,u,d,v,L){return s===u?!0:s==null||u==null||!Mt(s)&&!Mt(u)?s!==s&&u!==u:In(s,u,d,v,Er,L)}function In(s,u,d,v,L,$){var B=me(s),z=me(u),Q=B?c:Tt(s),G=z?c:Tt(u);Q=Q==l?m:Q,G=G==l?m:G;var at=Q==m,pt=G==m,J=Q==G;if(J&&ye(s)){if(!ye(u))return!1;B=!0,at=!1}if(J&&!at)return $||($=new kt),B||Mr(s)?ze(s,u,d,v,L,$):Ln(s,u,Q,d,v,L,$);if(!(d&o)){var lt=at&&yt.call(s,"__wrapped__"),nt=pt&&yt.call(u,"__wrapped__");if(lt||nt){var Ot=lt?s.value():s,jt=nt?u.value():u;return $||($=new kt),L(Ot,jt,d,v,$)}}return J?($||($=new kt),Rn(s,u,d,v,L,$)):!1}function $n(s){if(!Tr(s)||Nn(s))return!1;var u=kr(s)?sn:it;return u.test(ht(s))}function jn(s){return Mt(s)&&We(s.length)&&!!U[Zt(s)]}function An(s){if(!Hn(s))return Kt(s);var u=[];for(var d in Object(s))yt.call(s,d)&&d!="constructor"&&u.push(d);return u}function ze(s,u,d,v,L,$){var B=d&o,z=s.length,Q=u.length;if(z!=Q&&!(B&&Q>z))return!1;var G=$.get(s);if(G&&$.get(u))return G==u;var at=-1,pt=!0,J=d&i?new fe:void 0;for($.set(s,u),$.set(u,s);++at<z;){var lt=s[at],nt=u[at];if(v)var Ot=B?v(nt,lt,at,u,s,$):v(lt,nt,at,s,u,$);if(Ot!==void 0){if(Ot)continue;pt=!1;break}if(J){if(!dr(u,function(jt,qt){if(!ae(J,qt)&&(lt===jt||L(lt,jt,d,v,$)))return J.push(qt)})){pt=!1;break}}else if(!(lt===nt||L(lt,nt,d,v,$))){pt=!1;break}}return $.delete(s),$.delete(u),pt}function Ln(s,u,d,v,L,$,B){switch(d){case F:if(s.byteLength!=u.byteLength||s.byteOffset!=u.byteOffset)return!1;s=s.buffer,u=u.buffer;case O:return!(s.byteLength!=u.byteLength||!$(new yr(s),new yr(u)));case f:case p:case P:return _r(+s,+u);case g:return s.name==u.name&&s.message==u.message;case M:case T:return s==u+"";case S:var z=fr;case b:var Q=v&o;if(z||(z=bt),s.size!=u.size&&!Q)return!1;var G=B.get(s);if(G)return G==u;v|=i,B.set(s,u);var at=ze(z(s),z(u),v,L,$,B);return B.delete(s),at;case I:if(Be)return Be.call(s)==Be.call(u)}return!1}function Rn(s,u,d,v,L,$){var B=d&o,z=Qt(s),Q=z.length,G=Qt(u),at=G.length;if(Q!=at&&!B)return!1;for(var pt=Q;pt--;){var J=z[pt];if(!(B?J in u:yt.call(u,J)))return!1}var lt=$.get(s);if(lt&&$.get(u))return lt==u;var nt=!0;$.set(s,u),$.set(u,s);for(var Ot=B;++pt<Q;){J=z[pt];var jt=s[J],qt=u[J];if(v)var Mo=B?v(qt,jt,J,u,s,$):v(jt,qt,J,s,u,$);if(!(Mo===void 0?jt===qt||L(jt,qt,d,v,$):Mo)){nt=!1;break}Ot||(Ot=J=="constructor")}if(nt&&!Ot){var Pr=s.constructor,Ir=u.constructor;Pr!=Ir&&"constructor"in s&&"constructor"in u&&!(typeof Pr=="function"&&Pr instanceof Pr&&typeof Ir=="function"&&Ir instanceof Ir)&&(nt=!1)}return $.delete(s),$.delete(u),nt}function Qt(s){return He(s,Ge,On)}function St(s,u){var d=s.__data__;return Bn(u)?d[typeof u=="string"?"string":"hash"]:d.map}function It(s,u){var d=Ie(s,u);return $n(d)?d:void 0}function $t(s){var u=yt.call(s,xt),d=s[xt];try{s[xt]=void 0;var v=!0}catch{}var L=mr.call(s);return v&&(u?s[xt]=d:delete s[xt]),L}var On=de?function(s){return s==null?[]:(s=Object(s),hr(de(s),function(u){return he.call(s,u)}))}:Fn,Tt=Zt;(Le&&Tt(new Le(new ArrayBuffer(1)))!=F||Yt&&Tt(new Yt)!=S||Re&&Tt(Re.resolve())!=x||Oe&&Tt(new Oe)!=b||De&&Tt(new De)!=R)&&(Tt=function(s){var u=Zt(s),d=u==m?s.constructor:void 0,v=d?ht(d):"";if(v)switch(v){case vr:return F;case Pt:return S;case an:return x;case ln:return b;case un:return R}return u});function Dn(s,u){return u=u??a,!!u&&(typeof s=="number"||zt.test(s))&&s>-1&&s%1==0&&s<u}function Bn(s){var u=typeof s;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?s!=="__proto__":s===null}function Nn(s){return!!gr&&gr in s}function Hn(s){var u=s&&s.constructor,d=typeof u=="function"&&u.prototype||Vt;return s===d}function Cr(s){return mr.call(s)}function ht(s){if(s!=null){try{return $e.call(s)}catch{}try{return s+""}catch{}}return""}function _r(s,u){return s===u||s!==s&&u!==u}var br=Sr(function(){return arguments}())?Sr:function(s){return Mt(s)&&yt.call(s,"callee")&&!he.call(s,"callee")},me=Array.isArray;function Fe(s){return s!=null&&We(s.length)&&!kr(s)}var ye=Ae||Wn;function zn(s,u){return Er(s,u)}function kr(s){if(!Tr(s))return!1;var u=Zt(s);return u==w||u==C||u==h||u==k}function We(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=a}function Tr(s){var u=typeof s;return s!=null&&(u=="object"||u=="function")}function Mt(s){return s!=null&&typeof s=="object"}var Mr=Me?nn(Me):jn;function Ge(s){return Fe(s)?Pn(s):An(s)}function Fn(){return[]}function Wn(){return!1}t.exports=zn})(ME,dd);var PE=200,Nf="__lodash_hash_undefined__",IE=1/0,ev=9007199254740991,$E="[object Arguments]",jE="[object Function]",AE="[object GeneratorFunction]",LE="[object Symbol]",RE=/[\\^$.*+?()[\]{}|]/g,OE=/^\[object .+?Constructor\]$/,DE=/^(?:0|[1-9]\d*)$/,BE=typeof Wt=="object"&&Wt&&Wt.Object===Object&&Wt,NE=typeof self=="object"&&self&&self.Object===Object&&self,Hf=BE||NE||Function("return this")();function HE(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function zE(t,e){var r=t?t.length:0;return!!r&&GE(t,e,0)>-1}function FE(t,e,r){for(var n=-1,o=t?t.length:0;++n<o;)if(r(e,t[n]))return!0;return!1}function rv(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}function zf(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function WE(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}function GE(t,e,r){if(e!==e)return WE(t,UE,r);for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}function UE(t){return t!==t}function VE(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function XE(t){return function(e){return t(e)}}function KE(t,e){return t.has(e)}function YE(t,e){return t==null?void 0:t[e]}function ZE(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}function nv(t,e){return function(r){return t(e(r))}}var QE=Array.prototype,qE=Function.prototype,Ku=Object.prototype,Uc=Hf["__core-js_shared__"],Gg=function(){var t=/[^.]+$/.exec(Uc&&Uc.keys&&Uc.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ov=qE.toString,ys=Ku.hasOwnProperty,Ff=Ku.toString,JE=RegExp("^"+ov.call(ys).replace(RE,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ug=Hf.Symbol,tC=nv(Object.getPrototypeOf,Object),eC=Ku.propertyIsEnumerable,rC=QE.splice,Vg=Ug?Ug.isConcatSpreadable:void 0,fd=Object.getOwnPropertySymbols,Xg=Math.max,nC=sv(Hf,"Map"),ma=sv(Object,"create");function wi(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function oC(){this.__data__=ma?ma(null):{}}function iC(t){return this.has(t)&&delete this.__data__[t]}function sC(t){var e=this.__data__;if(ma){var r=e[t];return r===Nf?void 0:r}return ys.call(e,t)?e[t]:void 0}function aC(t){var e=this.__data__;return ma?e[t]!==void 0:ys.call(e,t)}function lC(t,e){var r=this.__data__;return r[t]=ma&&e===void 0?Nf:e,this}wi.prototype.clear=oC;wi.prototype.delete=iC;wi.prototype.get=sC;wi.prototype.has=aC;wi.prototype.set=lC;function vs(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function uC(){this.__data__=[]}function cC(t){var e=this.__data__,r=Yu(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():rC.call(e,r,1),!0}function hC(t){var e=this.__data__,r=Yu(e,t);return r<0?void 0:e[r][1]}function dC(t){return Yu(this.__data__,t)>-1}function fC(t,e){var r=this.__data__,n=Yu(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}vs.prototype.clear=uC;vs.prototype.delete=cC;vs.prototype.get=hC;vs.prototype.has=dC;vs.prototype.set=fC;function ws(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function pC(){this.__data__={hash:new wi,map:new(nC||vs),string:new wi}}function gC(t){return Zu(this,t).delete(t)}function mC(t){return Zu(this,t).get(t)}function yC(t){return Zu(this,t).has(t)}function vC(t,e){return Zu(this,t).set(t,e),this}ws.prototype.clear=pC;ws.prototype.delete=gC;ws.prototype.get=mC;ws.prototype.has=yC;ws.prototype.set=vC;function Ql(t){var e=-1,r=t?t.length:0;for(this.__data__=new ws;++e<r;)this.add(t[e])}function wC(t){return this.__data__.set(t,Nf),this}function xC(t){return this.__data__.has(t)}Ql.prototype.add=Ql.prototype.push=wC;Ql.prototype.has=xC;function SC(t,e){var r=Wf(t)||av(t)?VE(t.length,String):[],n=r.length,o=!!n;for(var i in t)(e||ys.call(t,i))&&!(o&&(i=="length"||AC(i,n)))&&r.push(i);return r}function Yu(t,e){for(var r=t.length;r--;)if(HC(t[r][0],e))return r;return-1}function EC(t,e,r,n){var o=-1,i=zE,a=!0,l=t.length,c=[],h=e.length;if(!l)return c;r&&(e=rv(e,XE(r))),n?(i=FE,a=!1):e.length>=PE&&(i=KE,a=!1,e=new Ql(e));t:for(;++o<l;){var f=t[o],p=r?r(f):f;if(f=n||f!==0?f:0,a&&p===p){for(var g=h;g--;)if(e[g]===p)continue t;c.push(f)}else i(e,p,n)||c.push(f)}return c}function iv(t,e,r,n,o){var i=-1,a=t.length;for(r||(r=jC),o||(o=[]);++i<a;){var l=t[i];e>0&&r(l)?e>1?iv(l,e-1,r,n,o):zf(o,l):n||(o[o.length]=l)}return o}function CC(t,e,r){var n=e(t);return Wf(t)?n:zf(n,r(t))}function _C(t){if(!Gf(t)||RC(t))return!1;var e=uv(t)||ZE(t)?JE:OE;return e.test(NC(t))}function bC(t){if(!Gf(t))return DC(t);var e=OC(t),r=[];for(var n in t)n=="constructor"&&(e||!ys.call(t,n))||r.push(n);return r}function kC(t,e){return t=Object(t),TC(t,e,function(r,n){return n in t})}function TC(t,e,r){for(var n=-1,o=e.length,i={};++n<o;){var a=e[n],l=t[a];r(l,a)&&(i[a]=l)}return i}function MC(t,e){return e=Xg(e===void 0?t.length-1:e,0),function(){for(var r=arguments,n=-1,o=Xg(r.length-e,0),i=Array(o);++n<o;)i[n]=r[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=r[n];return a[e]=i,HE(t,this,a)}}function PC(t){return CC(t,GC,$C)}function Zu(t,e){var r=t.__data__;return LC(e)?r[typeof e=="string"?"string":"hash"]:r.map}function sv(t,e){var r=YE(t,e);return _C(r)?r:void 0}var IC=fd?nv(fd,Object):hv,$C=fd?function(t){for(var e=[];t;)zf(e,IC(t)),t=tC(t);return e}:hv;function jC(t){return Wf(t)||av(t)||!!(Vg&&t&&t[Vg])}function AC(t,e){return e=e??ev,!!e&&(typeof t=="number"||DE.test(t))&&t>-1&&t%1==0&&t<e}function LC(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function RC(t){return!!Gg&&Gg in t}function OC(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||Ku;return t===r}function DC(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}function BC(t){if(typeof t=="string"||WC(t))return t;var e=t+"";return e=="0"&&1/t==-IE?"-0":e}function NC(t){if(t!=null){try{return ov.call(t)}catch{}try{return t+""}catch{}}return""}function HC(t,e){return t===e||t!==t&&e!==e}function av(t){return zC(t)&&ys.call(t,"callee")&&(!eC.call(t,"callee")||Ff.call(t)==$E)}var Wf=Array.isArray;function lv(t){return t!=null&&FC(t.length)&&!uv(t)}function zC(t){return cv(t)&&lv(t)}function uv(t){var e=Gf(t)?Ff.call(t):"";return e==jE||e==AE}function FC(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ev}function Gf(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function cv(t){return!!t&&typeof t=="object"}function WC(t){return typeof t=="symbol"||cv(t)&&Ff.call(t)==LE}function GC(t){return lv(t)?SC(t,!0):bC(t)}MC(function(t,e){return t==null?{}:(e=rv(iv(e,1),BC),kC(t,EC(PC(t),e)))});function hv(){return[]}var UC=1/0,VC=9007199254740991,XC="[object Arguments]",KC="[object Function]",YC="[object GeneratorFunction]",ZC="[object Symbol]",QC=typeof Wt=="object"&&Wt&&Wt.Object===Object&&Wt,qC=typeof self=="object"&&self&&self.Object===Object&&self,JC=QC||qC||Function("return this")();function t_(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function e_(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}function r_(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}var Uf=Object.prototype,n_=Uf.hasOwnProperty,Vf=Uf.toString,Kg=JC.Symbol,o_=Uf.propertyIsEnumerable,Yg=Kg?Kg.isConcatSpreadable:void 0,Zg=Math.max;function dv(t,e,r,n,o){var i=-1,a=t.length;for(r||(r=l_),o||(o=[]);++i<a;){var l=t[i];e>0&&r(l)?e>1?dv(l,e-1,r,n,o):r_(o,l):n||(o[o.length]=l)}return o}function i_(t,e){return t=Object(t),s_(t,e,function(r,n){return n in t})}function s_(t,e,r){for(var n=-1,o=e.length,i={};++n<o;){var a=e[n],l=t[a];r(l,a)&&(i[a]=l)}return i}function a_(t,e){return e=Zg(e===void 0?t.length-1:e,0),function(){for(var r=arguments,n=-1,o=Zg(r.length-e,0),i=Array(o);++n<o;)i[n]=r[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=r[n];return a[e]=i,t_(t,this,a)}}function l_(t){return h_(t)||c_(t)||!!(Yg&&t&&t[Yg])}function u_(t){if(typeof t=="string"||y_(t))return t;var e=t+"";return e=="0"&&1/t==-UC?"-0":e}function c_(t){return f_(t)&&n_.call(t,"callee")&&(!o_.call(t,"callee")||Vf.call(t)==XC)}var h_=Array.isArray;function d_(t){return t!=null&&g_(t.length)&&!p_(t)}function f_(t){return fv(t)&&d_(t)}function p_(t){var e=m_(t)?Vf.call(t):"";return e==KC||e==YC}function g_(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=VC}function m_(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function fv(t){return!!t&&typeof t=="object"}function y_(t){return typeof t=="symbol"||fv(t)&&Vf.call(t)==ZC}a_(function(t,e){return t==null?{}:i_(t,e_(dv(e,1),u_))});var pv="Expected a function",Qg=NaN,v_="[object Symbol]",w_=/^\s+|\s+$/g,x_=/^[-+]0x[0-9a-f]+$/i,S_=/^0b[01]+$/i,E_=/^0o[0-7]+$/i,C_=parseInt,__=typeof Wt=="object"&&Wt&&Wt.Object===Object&&Wt,b_=typeof self=="object"&&self&&self.Object===Object&&self,k_=__||b_||Function("return this")(),T_=Object.prototype,M_=T_.toString,P_=Math.max,I_=Math.min,Vc=function(){return k_.Date.now()};function $_(t,e,r){var n,o,i,a,l,c,h=0,f=!1,p=!1,g=!0;if(typeof t!="function")throw new TypeError(pv);e=qg(e)||0,ql(r)&&(f=!!r.leading,p="maxWait"in r,i=p?P_(qg(r.maxWait)||0,e):i,g="trailing"in r?!!r.trailing:g);function w(b){var T=n,I=o;return n=o=void 0,h=b,a=t.apply(I,T),a}function C(b){return h=b,l=setTimeout(y,e),f?w(b):a}function S(b){var T=b-c,I=b-h,H=e-T;return p?I_(H,i-I):H}function P(b){var T=b-c,I=b-h;return c===void 0||T>=e||T<0||p&&I>=i}function y(){var b=Vc();if(P(b))return m(b);l=setTimeout(y,S(b))}function m(b){return l=void 0,g&&n?w(b):(n=o=void 0,a)}function x(){l!==void 0&&clearTimeout(l),h=0,n=c=o=l=void 0}function k(){return l===void 0?a:m(Vc())}function M(){var b=Vc(),T=P(b);if(n=arguments,o=this,c=b,T){if(l===void 0)return C(c);if(p)return l=setTimeout(y,e),w(c)}return l===void 0&&(l=setTimeout(y,e)),a}return M.cancel=x,M.flush=k,M}function j_(t,e,r){var n=!0,o=!0;if(typeof t!="function")throw new TypeError(pv);return ql(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),$_(t,e,{leading:n,maxWait:e,trailing:o})}function ql(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function A_(t){return!!t&&typeof t=="object"}function L_(t){return typeof t=="symbol"||A_(t)&&M_.call(t)==v_}function qg(t){if(typeof t=="number")return t;if(L_(t))return Qg;if(ql(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=ql(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(w_,"");var r=S_.test(t);return r||E_.test(t)?C_(t.slice(2),r?2:8):x_.test(t)?Qg:+t}var R_=j_;const O_=R_;var D_=Object.defineProperty,B_=(t,e,r)=>e in t?D_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,E=(t,e,r)=>(B_(t,typeof e!="symbol"?e+"":e,r),r);let Qu=class{constructor(e,r,n){this.desc=e,this.editor=r,this.elements=n}redo(){var e;for(const r of this.elements){r.setDeleted(!1);const n=r.getParent();n&&n.insertChild(r,(e=r.attrs.parentIndex)==null?void 0:e.position)}this.editor.selectedElements.setItems(this.elements)}undo(){this.elements.forEach(e=>{e.setDeleted(!0),e.removeFromParent()}),this.editor.selectedElements.clear()}};var N_=Object.defineProperty,H_=(t,e,r)=>e in t?N_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,z_=(t,e,r)=>(H_(t,typeof e!="symbol"?e+"":e,r),r);const Jg=(t,e)=>{for(let r=0,n=t.length;r<n;r++)e(t[r],r)},ni=(t,e)=>{const r=[];for(let n=0,o=t.length;n<o;n++)r.push(e(t[n],n));return r},gv=(t,e,r)=>{const n=t[e];t[e]=t[r],t[r]=n},Jr=({r:t,g:e,b:r,a:n})=>`rgba(${t},${e},${r},${n})`,F_=t=>{t=t.toUpperCase();const e=t.match(/[0-9A-F]{1,6}/);return e?(t=e[0],t.length===6?t:((t.length===4||t.length===5)&&(t=t.slice(0,3)),t.length===3?t.split("").map(r=>r+r).join(""):t.padEnd(6,t))):""},nl=t=>{const{r:e,g:r,b:n}=t;return(e<<16|r<<8|n).toString(16).toUpperCase().padStart(6,"0")},Ce=t=>{if(t=F_(t),!t)return null;const e=parseInt(t.slice(0,2),16),r=parseInt(t.slice(2,4),16),n=parseInt(t.slice(4,6),16),o=t.slice(6,8),i=o?parseInt(o,16)/255:1;return{r:e,g:r,b:n,a:i}};let ol;const W_=new Uint8Array(16);function G_(){if(!ol&&(ol=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ol))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ol(W_)}const Ue=[];for(let t=0;t<256;++t)Ue.push((t+256).toString(16).slice(1));function U_(t,e=0){return(Ue[t[e+0]]+Ue[t[e+1]]+Ue[t[e+2]]+Ue[t[e+3]]+"-"+Ue[t[e+4]]+Ue[t[e+5]]+"-"+Ue[t[e+6]]+Ue[t[e+7]]+"-"+Ue[t[e+8]]+Ue[t[e+9]]+"-"+Ue[t[e+10]]+Ue[t[e+11]]+Ue[t[e+12]]+Ue[t[e+13]]+Ue[t[e+14]]+Ue[t[e+15]]).toLowerCase()}const V_=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),tm={randomUUID:V_};function X_(t,e,r){if(tm.randomUUID&&!e&&!t)return tm.randomUUID();t=t||{};const n=t.random||(t.rng||G_)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let o=0;o<16;++o)e[r+o]=n[o];return e}return U_(n)}const xi=()=>{},ya=()=>X_(),K_=()=>{let t=0;return()=>{const e=String(t);return t++,e}},em={maxIdxMap:new Map,gen(t){let e=this.maxIdxMap.get(t)??0;return e++,this.maxIdxMap.set(t,e),`${t} ${e}`},setMaxIdx(t){const e=t.match(/^(.*)\s+(\d+)$/);if(e){const[,r,n]=e,o=Number(n);this.maxIdxMap.set(r,Math.max(this.maxIdxMap.get(r)??0,o))}}},ie=(t,e)=>{const r=Math.floor(t/e),n=e*r,o=e*(r+1);return t-n<=o-t?n:o},mv=(t,e,r,n,o,i=!1)=>{let a=n+t/r,l=o+e/r;return i&&(a=Math.round(a),l=Math.round(l)),{x:a,y:l}},Y_=(t,e,r,n,o)=>({x:(t-n)*r,y:(e-o)*r}),Jl=t=>{const e=Math.floor(t),r=Math.ceil(t);return(t-e<r-t?e:r)+.5},Z_=(t,e)=>{if(t.length!==e.length)return!1;const r=new Map;for(let n=0,o=t.length;n<o;n++)r.set(t[n],!0);for(let n=0,o=e.length;n<o;n++)if(!r.get(e[n]))return!1;return!0},pd=()=>window.devicePixelRatio||1,Q_=(t,e,r,n)=>{if(t===0||e===0)return 1;const o=r/t,i=n/e;return Math.max(o,i)},rm=(t,e)=>{if(t.length===0)throw new Error("sortedArr can not be empty");if(t.length===1)return t[0];let r=0,n=t.length-1;for(;r<=n;){const o=Math.floor((r+n)/2);if(t[o]===e)return t[o];t[o]<e?r=o+1:n=o-1}return r>=t.length?t[n]:n<0?t[r]:Math.abs(t[n]-e)<=Math.abs(t[r]-e)?t[n]:t[r]},q_=navigator.platform.toLowerCase().includes("win")||navigator.userAgent.includes("Windows"),J_=t=>typeof t=="string"?t.replace(/<|&|>/g,e=>({"<":"&lt;",">":"&gt;","&":"&amp;"})[e]):"";class ar{constructor(){z_(this,"eventMap",{})}on(e,r){return this.eventMap[e]||(this.eventMap[e]=[]),this.eventMap[e].push(r),this}emit(e,...r){const n=this.eventMap[e];return!n||n.length===0?!1:(n.forEach(o=>{o(...r)}),!0)}off(e,r){return this.eventMap[e]&&(this.eventMap[e]=this.eventMap[e].filter(n=>n!==r)),this}}var Gt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tu={},tb={get exports(){return tu},set exports(t){tu=t}};(function(t,e){var r=200,n="__lodash_hash_undefined__",o=9007199254740991,i="[object Arguments]",a="[object Array]",l="[object Boolean]",c="[object Date]",h="[object Error]",f="[object Function]",p="[object GeneratorFunction]",g="[object Map]",w="[object Number]",C="[object Object]",S="[object Promise]",P="[object RegExp]",y="[object Set]",m="[object String]",x="[object Symbol]",k="[object WeakMap]",M="[object ArrayBuffer]",b="[object DataView]",T="[object Float32Array]",I="[object Float64Array]",H="[object Int8Array]",R="[object Int16Array]",O="[object Int32Array]",F="[object Uint8Array]",N="[object Uint8ClampedArray]",V="[object Uint16Array]",Z="[object Uint32Array]",ct=/[\\^$.*+?()[\]{}|]/g,et=/\w*$/,D=/^\[object .+?Constructor\]$/,X=/^(?:0|[1-9]\d*)$/,j={};j[i]=j[a]=j[M]=j[b]=j[l]=j[c]=j[T]=j[I]=j[H]=j[R]=j[O]=j[g]=j[w]=j[C]=j[P]=j[y]=j[m]=j[x]=j[F]=j[N]=j[V]=j[Z]=!0,j[h]=j[f]=j[k]=!1;var dt=typeof Gt=="object"&&Gt&&Gt.Object===Object&&Gt,gt=typeof self=="object"&&self&&self.Object===Object&&self,it=dt||gt||Function("return this")(),zt=e&&!e.nodeType&&e,U=zt&&!0&&t&&!t.nodeType&&t,ne=U&&U.exports===zt;function Ze(s,u){return s.set(u[0],u[1]),s}function wt(s,u){return s.add(u),s}function lr(s,u){for(var d=-1,v=s?s.length:0;++d<v&&u(s[d],d,s)!==!1;);return s}function ur(s,u){for(var d=-1,v=u.length,L=s.length;++d<v;)s[L+d]=u[d];return s}function ke(s,u,d,v){var L=-1,$=s?s.length:0;for(v&&$&&(d=s[++L]);++L<$;)d=u(d,s[L],L,s);return d}function Te(s,u){for(var d=-1,v=Array(s);++d<s;)v[d]=u(d);return v}function cr(s,u){return s==null?void 0:s[u]}function Me(s){var u=!1;if(s!=null&&typeof s.toString!="function")try{u=!!(s+"")}catch{}return u}function hr(s){var u=-1,d=Array(s.size);return s.forEach(function(v,L){d[++u]=[L,v]}),d}function Pe(s,u){return function(d){return s(u(d))}}function dr(s){var u=-1,d=Array(s.size);return s.forEach(function(v){d[++u]=v}),d}var rn=Array.prototype,nn=Function.prototype,ae=Object.prototype,Ie=it["__core-js_shared__"],fr=function(){var s=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),pr=nn.toString,bt=ae.hasOwnProperty,le=ae.toString,on=RegExp("^"+pr.call(bt).replace(ct,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vt=ne?it.Buffer:void 0,ue=it.Symbol,$e=it.Uint8Array,yt=Pe(Object.getPrototypeOf,Object),gr=Object.create,mr=ae.propertyIsEnumerable,sn=rn.splice,je=Object.getOwnPropertySymbols,ce=Vt?Vt.isBuffer:void 0,yr=Pe(Object.keys,Object),he=St(it,"DataView"),Xt=St(it,"Map"),xt=St(it,"Promise"),de=St(it,"Set"),Ae=St(it,"WeakMap"),Kt=St(Object,"create"),Le=ht(he),Yt=ht(Xt),Re=ht(xt),Oe=ht(de),De=ht(Ae),Rt=ue?ue.prototype:void 0,vr=Rt?Rt.valueOf:void 0;function Pt(s){var u=-1,d=s?s.length:0;for(this.clear();++u<d;){var v=s[u];this.set(v[0],v[1])}}function an(){this.__data__=Kt?Kt(null):{}}function ln(s){return this.has(s)&&delete this.__data__[s]}function un(s){var u=this.__data__;if(Kt){var d=u[s];return d===n?void 0:d}return bt.call(u,s)?u[s]:void 0}function wr(s){var u=this.__data__;return Kt?u[s]!==void 0:bt.call(u,s)}function Be(s,u){var d=this.__data__;return d[s]=Kt&&u===void 0?n:u,this}Pt.prototype.clear=an,Pt.prototype.delete=ln,Pt.prototype.get=un,Pt.prototype.has=wr,Pt.prototype.set=Be;function rt(s){var u=-1,d=s?s.length:0;for(this.clear();++u<d;){var v=s[u];this.set(v[0],v[1])}}function cn(){this.__data__=[]}function hn(s){var u=this.__data__,d=pe(u,s);if(d<0)return!1;var v=u.length-1;return d==v?u.pop():sn.call(u,d,1),!0}function dn(s){var u=this.__data__,d=pe(u,s);return d<0?void 0:u[d][1]}function fn(s){return pe(this.__data__,s)>-1}function pn(s,u){var d=this.__data__,v=pe(d,s);return v<0?d.push([s,u]):d[v][1]=u,this}rt.prototype.clear=cn,rt.prototype.delete=hn,rt.prototype.get=dn,rt.prototype.has=fn,rt.prototype.set=pn;function st(s){var u=-1,d=s?s.length:0;for(this.clear();++u<d;){var v=s[u];this.set(v[0],v[1])}}function gn(){this.__data__={hash:new Pt,map:new(Xt||rt),string:new Pt}}function mn(s){return Qt(this,s).delete(s)}function yn(s){return Qt(this,s).get(s)}function vn(s){return Qt(this,s).has(s)}function wn(s,u){return Qt(this,s).set(s,u),this}st.prototype.clear=gn,st.prototype.delete=mn,st.prototype.get=yn,st.prototype.has=vn,st.prototype.set=wn;function ft(s){this.__data__=new rt(s)}function xn(){this.__data__=new rt}function Sn(s){return this.__data__.delete(s)}function En(s){return this.__data__.get(s)}function Cn(s){return this.__data__.has(s)}function _n(s,u){var d=this.__data__;if(d instanceof rt){var v=d.__data__;if(!Xt||v.length<r-1)return v.push([s,u]),this;d=this.__data__=new st(v)}return d.set(s,u),this}ft.prototype.clear=xn,ft.prototype.delete=Sn,ft.prototype.get=En,ft.prototype.has=Cn,ft.prototype.set=_n;function fe(s,u){var d=Fe(s)||me(s)?Te(s.length,String):[],v=d.length,L=!!v;for(var $ in s)(u||bt.call(s,$))&&!(L&&($=="length"||Bn($,v)))&&d.push($);return d}function xr(s,u,d){var v=s[u];(!(bt.call(s,u)&&br(v,d))||d===void 0&&!(u in s))&&(s[u]=d)}function pe(s,u){for(var d=s.length;d--;)if(br(s[d][0],u))return d;return-1}function kt(s,u){return s&&ze(u,Ge(u),s)}function Ne(s,u,d,v,L,$,B){var z;if(v&&(z=$?v(s,L,$,B):v(s)),z!==void 0)return z;if(!Mt(s))return s;var Q=Fe(s);if(Q){if(z=On(s),!u)return An(s,z)}else{var G=$t(s),at=G==f||G==p;if(kr(s))return ge(s,u);if(G==C||G==i||at&&!$){if(Me(s))return $?s:{};if(z=Tt(at?{}:s),!u)return Ln(s,kt(z,s))}else{if(!j[G])return $?s:{};z=Dn(s,G,Ne,u)}}B||(B=new ft);var pt=B.get(s);if(pt)return pt;if(B.set(s,z),!Q)var J=d?Rn(s):Ge(s);return lr(J||s,function(lt,nt){J&&(nt=lt,lt=s[nt]),xr(z,nt,Ne(lt,u,d,v,nt,s,B))}),z}function bn(s){return Mt(s)?gr(s):{}}function kn(s,u,d){var v=u(s);return Fe(s)?v:ur(v,d(s))}function Tn(s){return le.call(s)}function Mn(s){if(!Mt(s)||Hn(s))return!1;var u=We(s)||Me(s)?on:D;return u.test(ht(s))}function Pn(s){if(!Cr(s))return yr(s);var u=[];for(var d in Object(s))bt.call(s,d)&&d!="constructor"&&u.push(d);return u}function ge(s,u){if(u)return s.slice();var d=new s.constructor(s.length);return s.copy(d),d}function He(s){var u=new s.constructor(s.byteLength);return new $e(u).set(new $e(s)),u}function Zt(s,u){var d=u?He(s.buffer):s.buffer;return new s.constructor(d,s.byteOffset,s.byteLength)}function Sr(s,u,d){var v=u?d(hr(s),!0):hr(s);return ke(v,Ze,new s.constructor)}function Er(s){var u=new s.constructor(s.source,et.exec(s));return u.lastIndex=s.lastIndex,u}function In(s,u,d){var v=u?d(dr(s),!0):dr(s);return ke(v,wt,new s.constructor)}function $n(s){return vr?Object(vr.call(s)):{}}function jn(s,u){var d=u?He(s.buffer):s.buffer;return new s.constructor(d,s.byteOffset,s.length)}function An(s,u){var d=-1,v=s.length;for(u||(u=Array(v));++d<v;)u[d]=s[d];return u}function ze(s,u,d,v){d||(d={});for(var L=-1,$=u.length;++L<$;){var B=u[L],z=v?v(d[B],s[B],B,d,s):void 0;xr(d,B,z===void 0?s[B]:z)}return d}function Ln(s,u){return ze(s,It(s),u)}function Rn(s){return kn(s,Ge,It)}function Qt(s,u){var d=s.__data__;return Nn(u)?d[typeof u=="string"?"string":"hash"]:d.map}function St(s,u){var d=cr(s,u);return Mn(d)?d:void 0}var It=je?Pe(je,Object):Fn,$t=Tn;(he&&$t(new he(new ArrayBuffer(1)))!=b||Xt&&$t(new Xt)!=g||xt&&$t(xt.resolve())!=S||de&&$t(new de)!=y||Ae&&$t(new Ae)!=k)&&($t=function(s){var u=le.call(s),d=u==C?s.constructor:void 0,v=d?ht(d):void 0;if(v)switch(v){case Le:return b;case Yt:return g;case Re:return S;case Oe:return y;case De:return k}return u});function On(s){var u=s.length,d=s.constructor(u);return u&&typeof s[0]=="string"&&bt.call(s,"index")&&(d.index=s.index,d.input=s.input),d}function Tt(s){return typeof s.constructor=="function"&&!Cr(s)?bn(yt(s)):{}}function Dn(s,u,d,v){var L=s.constructor;switch(u){case M:return He(s);case l:case c:return new L(+s);case b:return Zt(s,v);case T:case I:case H:case R:case O:case F:case N:case V:case Z:return jn(s,v);case g:return Sr(s,v,d);case w:case m:return new L(s);case P:return Er(s);case y:return In(s,v,d);case x:return $n(s)}}function Bn(s,u){return u=u??o,!!u&&(typeof s=="number"||X.test(s))&&s>-1&&s%1==0&&s<u}function Nn(s){var u=typeof s;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?s!=="__proto__":s===null}function Hn(s){return!!fr&&fr in s}function Cr(s){var u=s&&s.constructor,d=typeof u=="function"&&u.prototype||ae;return s===d}function ht(s){if(s!=null){try{return pr.call(s)}catch{}try{return s+""}catch{}}return""}function _r(s){return Ne(s,!0,!0)}function br(s,u){return s===u||s!==s&&u!==u}function me(s){return zn(s)&&bt.call(s,"callee")&&(!mr.call(s,"callee")||le.call(s)==i)}var Fe=Array.isArray;function ye(s){return s!=null&&Tr(s.length)&&!We(s)}function zn(s){return Mr(s)&&ye(s)}var kr=ce||Wn;function We(s){var u=Mt(s)?le.call(s):"";return u==f||u==p}function Tr(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=o}function Mt(s){var u=typeof s;return!!s&&(u=="object"||u=="function")}function Mr(s){return!!s&&typeof s=="object"}function Ge(s){return ye(s)?fe(s):Pn(s)}function Fn(){return[]}function Wn(){return!1}t.exports=_r})(tb,tu);const tt=tu;var eb="Expected a function",nm=NaN,rb="[object Symbol]",nb=/^\s+|\s+$/g,ob=/^[-+]0x[0-9a-f]+$/i,ib=/^0b[01]+$/i,sb=/^0o[0-7]+$/i,ab=parseInt,lb=typeof Gt=="object"&&Gt&&Gt.Object===Object&&Gt,ub=typeof self=="object"&&self&&self.Object===Object&&self,cb=lb||ub||Function("return this")(),hb=Object.prototype,db=hb.toString,fb=Math.max,pb=Math.min,Xc=function(){return cb.Date.now()};function gb(t,e,r){var n,o,i,a,l,c,h=0,f=!1,p=!1,g=!0;if(typeof t!="function")throw new TypeError(eb);e=om(e)||0,gd(r)&&(f=!!r.leading,p="maxWait"in r,i=p?fb(om(r.maxWait)||0,e):i,g="trailing"in r?!!r.trailing:g);function w(b){var T=n,I=o;return n=o=void 0,h=b,a=t.apply(I,T),a}function C(b){return h=b,l=setTimeout(y,e),f?w(b):a}function S(b){var T=b-c,I=b-h,H=e-T;return p?pb(H,i-I):H}function P(b){var T=b-c,I=b-h;return c===void 0||T>=e||T<0||p&&I>=i}function y(){var b=Xc();if(P(b))return m(b);l=setTimeout(y,S(b))}function m(b){return l=void 0,g&&n?w(b):(n=o=void 0,a)}function x(){l!==void 0&&clearTimeout(l),h=0,n=c=o=l=void 0}function k(){return l===void 0?a:m(Xc())}function M(){var b=Xc(),T=P(b);if(n=arguments,o=this,c=b,T){if(l===void 0)return C(c);if(p)return l=setTimeout(y,e),w(c)}return l===void 0&&(l=setTimeout(y,e)),a}return M.cancel=x,M.flush=k,M}function gd(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function mb(t){return!!t&&typeof t=="object"}function yb(t){return typeof t=="symbol"||mb(t)&&db.call(t)==rb}function om(t){if(typeof t=="number")return t;if(yb(t))return nm;if(gd(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=gd(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(nb,"");var r=ib.test(t);return r||sb.test(t)?ab(t.slice(2),r?2:8):ob.test(t)?nm:+t}var vb=gb;const wb=vb;var eu={},xb={get exports(){return eu},set exports(t){eu=t}};(function(t,e){var r=200,n="__lodash_hash_undefined__",o=1,i=2,a=9007199254740991,l="[object Arguments]",c="[object Array]",h="[object AsyncFunction]",f="[object Boolean]",p="[object Date]",g="[object Error]",w="[object Function]",C="[object GeneratorFunction]",S="[object Map]",P="[object Number]",y="[object Null]",m="[object Object]",x="[object Promise]",k="[object Proxy]",M="[object RegExp]",b="[object Set]",T="[object String]",I="[object Symbol]",H="[object Undefined]",R="[object WeakMap]",O="[object ArrayBuffer]",F="[object DataView]",N="[object Float32Array]",V="[object Float64Array]",Z="[object Int8Array]",ct="[object Int16Array]",et="[object Int32Array]",D="[object Uint8Array]",X="[object Uint8ClampedArray]",j="[object Uint16Array]",dt="[object Uint32Array]",gt=/[\\^$.*+?()[\]{}|]/g,it=/^\[object .+?Constructor\]$/,zt=/^(?:0|[1-9]\d*)$/,U={};U[N]=U[V]=U[Z]=U[ct]=U[et]=U[D]=U[X]=U[j]=U[dt]=!0,U[l]=U[c]=U[O]=U[f]=U[F]=U[p]=U[g]=U[w]=U[S]=U[P]=U[m]=U[M]=U[b]=U[T]=U[R]=!1;var ne=typeof Gt=="object"&&Gt&&Gt.Object===Object&&Gt,Ze=typeof self=="object"&&self&&self.Object===Object&&self,wt=ne||Ze||Function("return this")(),lr=e&&!e.nodeType&&e,ur=lr&&!0&&t&&!t.nodeType&&t,ke=ur&&ur.exports===lr,Te=ke&&ne.process,cr=function(){try{return Te&&Te.binding&&Te.binding("util")}catch{}}(),Me=cr&&cr.isTypedArray;function hr(s,u){for(var d=-1,v=s==null?0:s.length,L=0,$=[];++d<v;){var B=s[d];u(B,d,s)&&($[L++]=B)}return $}function Pe(s,u){for(var d=-1,v=u.length,L=s.length;++d<v;)s[L+d]=u[d];return s}function dr(s,u){for(var d=-1,v=s==null?0:s.length;++d<v;)if(u(s[d],d,s))return!0;return!1}function rn(s,u){for(var d=-1,v=Array(s);++d<s;)v[d]=u(d);return v}function nn(s){return function(u){return s(u)}}function ae(s,u){return s.has(u)}function Ie(s,u){return s==null?void 0:s[u]}function fr(s){var u=-1,d=Array(s.size);return s.forEach(function(v,L){d[++u]=[L,v]}),d}function pr(s,u){return function(d){return s(u(d))}}function bt(s){var u=-1,d=Array(s.size);return s.forEach(function(v){d[++u]=v}),d}var le=Array.prototype,on=Function.prototype,Vt=Object.prototype,ue=wt["__core-js_shared__"],$e=on.toString,yt=Vt.hasOwnProperty,gr=function(){var s=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),mr=Vt.toString,sn=RegExp("^"+$e.call(yt).replace(gt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),je=ke?wt.Buffer:void 0,ce=wt.Symbol,yr=wt.Uint8Array,he=Vt.propertyIsEnumerable,Xt=le.splice,xt=ce?ce.toStringTag:void 0,de=Object.getOwnPropertySymbols,Ae=je?je.isBuffer:void 0,Kt=pr(Object.keys,Object),Le=It(wt,"DataView"),Yt=It(wt,"Map"),Re=It(wt,"Promise"),Oe=It(wt,"Set"),De=It(wt,"WeakMap"),Rt=It(Object,"create"),vr=ht(Le),Pt=ht(Yt),an=ht(Re),ln=ht(Oe),un=ht(De),wr=ce?ce.prototype:void 0,Be=wr?wr.valueOf:void 0;function rt(s){var u=-1,d=s==null?0:s.length;for(this.clear();++u<d;){var v=s[u];this.set(v[0],v[1])}}function cn(){this.__data__=Rt?Rt(null):{},this.size=0}function hn(s){var u=this.has(s)&&delete this.__data__[s];return this.size-=u?1:0,u}function dn(s){var u=this.__data__;if(Rt){var d=u[s];return d===n?void 0:d}return yt.call(u,s)?u[s]:void 0}function fn(s){var u=this.__data__;return Rt?u[s]!==void 0:yt.call(u,s)}function pn(s,u){var d=this.__data__;return this.size+=this.has(s)?0:1,d[s]=Rt&&u===void 0?n:u,this}rt.prototype.clear=cn,rt.prototype.delete=hn,rt.prototype.get=dn,rt.prototype.has=fn,rt.prototype.set=pn;function st(s){var u=-1,d=s==null?0:s.length;for(this.clear();++u<d;){var v=s[u];this.set(v[0],v[1])}}function gn(){this.__data__=[],this.size=0}function mn(s){var u=this.__data__,d=ge(u,s);if(d<0)return!1;var v=u.length-1;return d==v?u.pop():Xt.call(u,d,1),--this.size,!0}function yn(s){var u=this.__data__,d=ge(u,s);return d<0?void 0:u[d][1]}function vn(s){return ge(this.__data__,s)>-1}function wn(s,u){var d=this.__data__,v=ge(d,s);return v<0?(++this.size,d.push([s,u])):d[v][1]=u,this}st.prototype.clear=gn,st.prototype.delete=mn,st.prototype.get=yn,st.prototype.has=vn,st.prototype.set=wn;function ft(s){var u=-1,d=s==null?0:s.length;for(this.clear();++u<d;){var v=s[u];this.set(v[0],v[1])}}function xn(){this.size=0,this.__data__={hash:new rt,map:new(Yt||st),string:new rt}}function Sn(s){var u=St(this,s).delete(s);return this.size-=u?1:0,u}function En(s){return St(this,s).get(s)}function Cn(s){return St(this,s).has(s)}function _n(s,u){var d=St(this,s),v=d.size;return d.set(s,u),this.size+=d.size==v?0:1,this}ft.prototype.clear=xn,ft.prototype.delete=Sn,ft.prototype.get=En,ft.prototype.has=Cn,ft.prototype.set=_n;function fe(s){var u=-1,d=s==null?0:s.length;for(this.__data__=new ft;++u<d;)this.add(s[u])}function xr(s){return this.__data__.set(s,n),this}function pe(s){return this.__data__.has(s)}fe.prototype.add=fe.prototype.push=xr,fe.prototype.has=pe;function kt(s){var u=this.__data__=new st(s);this.size=u.size}function Ne(){this.__data__=new st,this.size=0}function bn(s){var u=this.__data__,d=u.delete(s);return this.size=u.size,d}function kn(s){return this.__data__.get(s)}function Tn(s){return this.__data__.has(s)}function Mn(s,u){var d=this.__data__;if(d instanceof st){var v=d.__data__;if(!Yt||v.length<r-1)return v.push([s,u]),this.size=++d.size,this;d=this.__data__=new ft(v)}return d.set(s,u),this.size=d.size,this}kt.prototype.clear=Ne,kt.prototype.delete=bn,kt.prototype.get=kn,kt.prototype.has=Tn,kt.prototype.set=Mn;function Pn(s,u){var d=me(s),v=!d&&br(s),L=!d&&!v&&ye(s),$=!d&&!v&&!L&&Mr(s),B=d||v||L||$,z=B?rn(s.length,String):[],Q=z.length;for(var G in s)(u||yt.call(s,G))&&!(B&&(G=="length"||L&&(G=="offset"||G=="parent")||$&&(G=="buffer"||G=="byteLength"||G=="byteOffset")||Dn(G,Q)))&&z.push(G);return z}function ge(s,u){for(var d=s.length;d--;)if(_r(s[d][0],u))return d;return-1}function He(s,u,d){var v=u(s);return me(s)?v:Pe(v,d(s))}function Zt(s){return s==null?s===void 0?H:y:xt&&xt in Object(s)?$t(s):Cr(s)}function Sr(s){return Mt(s)&&Zt(s)==l}function Er(s,u,d,v,L){return s===u?!0:s==null||u==null||!Mt(s)&&!Mt(u)?s!==s&&u!==u:In(s,u,d,v,Er,L)}function In(s,u,d,v,L,$){var B=me(s),z=me(u),Q=B?c:Tt(s),G=z?c:Tt(u);Q=Q==l?m:Q,G=G==l?m:G;var at=Q==m,pt=G==m,J=Q==G;if(J&&ye(s)){if(!ye(u))return!1;B=!0,at=!1}if(J&&!at)return $||($=new kt),B||Mr(s)?ze(s,u,d,v,L,$):Ln(s,u,Q,d,v,L,$);if(!(d&o)){var lt=at&&yt.call(s,"__wrapped__"),nt=pt&&yt.call(u,"__wrapped__");if(lt||nt){var Ot=lt?s.value():s,jt=nt?u.value():u;return $||($=new kt),L(Ot,jt,d,v,$)}}return J?($||($=new kt),Rn(s,u,d,v,L,$)):!1}function $n(s){if(!Tr(s)||Nn(s))return!1;var u=kr(s)?sn:it;return u.test(ht(s))}function jn(s){return Mt(s)&&We(s.length)&&!!U[Zt(s)]}function An(s){if(!Hn(s))return Kt(s);var u=[];for(var d in Object(s))yt.call(s,d)&&d!="constructor"&&u.push(d);return u}function ze(s,u,d,v,L,$){var B=d&o,z=s.length,Q=u.length;if(z!=Q&&!(B&&Q>z))return!1;var G=$.get(s);if(G&&$.get(u))return G==u;var at=-1,pt=!0,J=d&i?new fe:void 0;for($.set(s,u),$.set(u,s);++at<z;){var lt=s[at],nt=u[at];if(v)var Ot=B?v(nt,lt,at,u,s,$):v(lt,nt,at,s,u,$);if(Ot!==void 0){if(Ot)continue;pt=!1;break}if(J){if(!dr(u,function(jt,qt){if(!ae(J,qt)&&(lt===jt||L(lt,jt,d,v,$)))return J.push(qt)})){pt=!1;break}}else if(!(lt===nt||L(lt,nt,d,v,$))){pt=!1;break}}return $.delete(s),$.delete(u),pt}function Ln(s,u,d,v,L,$,B){switch(d){case F:if(s.byteLength!=u.byteLength||s.byteOffset!=u.byteOffset)return!1;s=s.buffer,u=u.buffer;case O:return!(s.byteLength!=u.byteLength||!$(new yr(s),new yr(u)));case f:case p:case P:return _r(+s,+u);case g:return s.name==u.name&&s.message==u.message;case M:case T:return s==u+"";case S:var z=fr;case b:var Q=v&o;if(z||(z=bt),s.size!=u.size&&!Q)return!1;var G=B.get(s);if(G)return G==u;v|=i,B.set(s,u);var at=ze(z(s),z(u),v,L,$,B);return B.delete(s),at;case I:if(Be)return Be.call(s)==Be.call(u)}return!1}function Rn(s,u,d,v,L,$){var B=d&o,z=Qt(s),Q=z.length,G=Qt(u),at=G.length;if(Q!=at&&!B)return!1;for(var pt=Q;pt--;){var J=z[pt];if(!(B?J in u:yt.call(u,J)))return!1}var lt=$.get(s);if(lt&&$.get(u))return lt==u;var nt=!0;$.set(s,u),$.set(u,s);for(var Ot=B;++pt<Q;){J=z[pt];var jt=s[J],qt=u[J];if(v)var Mo=B?v(qt,jt,J,u,s,$):v(jt,qt,J,s,u,$);if(!(Mo===void 0?jt===qt||L(jt,qt,d,v,$):Mo)){nt=!1;break}Ot||(Ot=J=="constructor")}if(nt&&!Ot){var Pr=s.constructor,Ir=u.constructor;Pr!=Ir&&"constructor"in s&&"constructor"in u&&!(typeof Pr=="function"&&Pr instanceof Pr&&typeof Ir=="function"&&Ir instanceof Ir)&&(nt=!1)}return $.delete(s),$.delete(u),nt}function Qt(s){return He(s,Ge,On)}function St(s,u){var d=s.__data__;return Bn(u)?d[typeof u=="string"?"string":"hash"]:d.map}function It(s,u){var d=Ie(s,u);return $n(d)?d:void 0}function $t(s){var u=yt.call(s,xt),d=s[xt];try{s[xt]=void 0;var v=!0}catch{}var L=mr.call(s);return v&&(u?s[xt]=d:delete s[xt]),L}var On=de?function(s){return s==null?[]:(s=Object(s),hr(de(s),function(u){return he.call(s,u)}))}:Fn,Tt=Zt;(Le&&Tt(new Le(new ArrayBuffer(1)))!=F||Yt&&Tt(new Yt)!=S||Re&&Tt(Re.resolve())!=x||Oe&&Tt(new Oe)!=b||De&&Tt(new De)!=R)&&(Tt=function(s){var u=Zt(s),d=u==m?s.constructor:void 0,v=d?ht(d):"";if(v)switch(v){case vr:return F;case Pt:return S;case an:return x;case ln:return b;case un:return R}return u});function Dn(s,u){return u=u??a,!!u&&(typeof s=="number"||zt.test(s))&&s>-1&&s%1==0&&s<u}function Bn(s){var u=typeof s;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?s!=="__proto__":s===null}function Nn(s){return!!gr&&gr in s}function Hn(s){var u=s&&s.constructor,d=typeof u=="function"&&u.prototype||Vt;return s===d}function Cr(s){return mr.call(s)}function ht(s){if(s!=null){try{return $e.call(s)}catch{}try{return s+""}catch{}}return""}function _r(s,u){return s===u||s!==s&&u!==u}var br=Sr(function(){return arguments}())?Sr:function(s){return Mt(s)&&yt.call(s,"callee")&&!he.call(s,"callee")},me=Array.isArray;function Fe(s){return s!=null&&We(s.length)&&!kr(s)}var ye=Ae||Wn;function zn(s,u){return Er(s,u)}function kr(s){if(!Tr(s))return!1;var u=Zt(s);return u==w||u==C||u==h||u==k}function We(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=a}function Tr(s){var u=typeof s;return s!=null&&(u=="object"||u=="function")}function Mt(s){return s!=null&&typeof s=="object"}var Mr=Me?nn(Me):jn;function Ge(s){return Fe(s)?Pn(s):An(s)}function Fn(){return[]}function Wn(){return!1}t.exports=zn})(xb,eu);const Aa=eu;var Sb=200,Xf="__lodash_hash_undefined__",Eb=1/0,yv=9007199254740991,Cb="[object Arguments]",_b="[object Function]",bb="[object GeneratorFunction]",kb="[object Symbol]",Tb=/[\\^$.*+?()[\]{}|]/g,Mb=/^\[object .+?Constructor\]$/,Pb=/^(?:0|[1-9]\d*)$/,Ib=typeof Gt=="object"&&Gt&&Gt.Object===Object&&Gt,$b=typeof self=="object"&&self&&self.Object===Object&&self,Kf=Ib||$b||Function("return this")();function jb(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Ab(t,e){var r=t?t.length:0;return!!r&&Ob(t,e,0)>-1}function Lb(t,e,r){for(var n=-1,o=t?t.length:0;++n<o;)if(r(e,t[n]))return!0;return!1}function vv(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}function Yf(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function Rb(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}function Ob(t,e,r){if(e!==e)return Rb(t,Db,r);for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}function Db(t){return t!==t}function Bb(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function Nb(t){return function(e){return t(e)}}function Hb(t,e){return t.has(e)}function zb(t,e){return t==null?void 0:t[e]}function Fb(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}function wv(t,e){return function(r){return t(e(r))}}var Wb=Array.prototype,Gb=Function.prototype,qu=Object.prototype,Kc=Kf["__core-js_shared__"],im=function(){var t=/[^.]+$/.exec(Kc&&Kc.keys&&Kc.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),xv=Gb.toString,xs=qu.hasOwnProperty,Zf=qu.toString,Ub=RegExp("^"+xv.call(xs).replace(Tb,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),sm=Kf.Symbol,Vb=wv(Object.getPrototypeOf,Object),Xb=qu.propertyIsEnumerable,Kb=Wb.splice,am=sm?sm.isConcatSpreadable:void 0,md=Object.getOwnPropertySymbols,lm=Math.max,Yb=Ev(Kf,"Map"),va=Ev(Object,"create");function Si(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Zb(){this.__data__=va?va(null):{}}function Qb(t){return this.has(t)&&delete this.__data__[t]}function qb(t){var e=this.__data__;if(va){var r=e[t];return r===Xf?void 0:r}return xs.call(e,t)?e[t]:void 0}function Jb(t){var e=this.__data__;return va?e[t]!==void 0:xs.call(e,t)}function tk(t,e){var r=this.__data__;return r[t]=va&&e===void 0?Xf:e,this}Si.prototype.clear=Zb;Si.prototype.delete=Qb;Si.prototype.get=qb;Si.prototype.has=Jb;Si.prototype.set=tk;function Ss(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function ek(){this.__data__=[]}function rk(t){var e=this.__data__,r=Ju(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Kb.call(e,r,1),!0}function nk(t){var e=this.__data__,r=Ju(e,t);return r<0?void 0:e[r][1]}function ok(t){return Ju(this.__data__,t)>-1}function ik(t,e){var r=this.__data__,n=Ju(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}Ss.prototype.clear=ek;Ss.prototype.delete=rk;Ss.prototype.get=nk;Ss.prototype.has=ok;Ss.prototype.set=ik;function Es(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function sk(){this.__data__={hash:new Si,map:new(Yb||Ss),string:new Si}}function ak(t){return tc(this,t).delete(t)}function lk(t){return tc(this,t).get(t)}function uk(t){return tc(this,t).has(t)}function ck(t,e){return tc(this,t).set(t,e),this}Es.prototype.clear=sk;Es.prototype.delete=ak;Es.prototype.get=lk;Es.prototype.has=uk;Es.prototype.set=ck;function ru(t){var e=-1,r=t?t.length:0;for(this.__data__=new Es;++e<r;)this.add(t[e])}function hk(t){return this.__data__.set(t,Xf),this}function dk(t){return this.__data__.has(t)}ru.prototype.add=ru.prototype.push=hk;ru.prototype.has=dk;function fk(t,e){var r=Qf(t)||Cv(t)?Bb(t.length,String):[],n=r.length,o=!!n;for(var i in t)(e||xs.call(t,i))&&!(o&&(i=="length"||bk(i,n)))&&r.push(i);return r}function Ju(t,e){for(var r=t.length;r--;)if(jk(t[r][0],e))return r;return-1}function pk(t,e,r,n){var o=-1,i=Ab,a=!0,l=t.length,c=[],h=e.length;if(!l)return c;r&&(e=vv(e,Nb(r))),n?(i=Lb,a=!1):e.length>=Sb&&(i=Hb,a=!1,e=new ru(e));t:for(;++o<l;){var f=t[o],p=r?r(f):f;if(f=n||f!==0?f:0,a&&p===p){for(var g=h;g--;)if(e[g]===p)continue t;c.push(f)}else i(e,p,n)||c.push(f)}return c}function Sv(t,e,r,n,o){var i=-1,a=t.length;for(r||(r=_k),o||(o=[]);++i<a;){var l=t[i];e>0&&r(l)?e>1?Sv(l,e-1,r,n,o):Yf(o,l):n||(o[o.length]=l)}return o}function gk(t,e,r){var n=e(t);return Qf(t)?n:Yf(n,r(t))}function mk(t){if(!qf(t)||Tk(t))return!1;var e=bv(t)||Fb(t)?Ub:Mb;return e.test($k(t))}function yk(t){if(!qf(t))return Pk(t);var e=Mk(t),r=[];for(var n in t)n=="constructor"&&(e||!xs.call(t,n))||r.push(n);return r}function vk(t,e){return t=Object(t),wk(t,e,function(r,n){return n in t})}function wk(t,e,r){for(var n=-1,o=e.length,i={};++n<o;){var a=e[n],l=t[a];r(l,a)&&(i[a]=l)}return i}function xk(t,e){return e=lm(e===void 0?t.length-1:e,0),function(){for(var r=arguments,n=-1,o=lm(r.length-e,0),i=Array(o);++n<o;)i[n]=r[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=r[n];return a[e]=i,jb(t,this,a)}}function Sk(t){return gk(t,Ok,Ck)}function tc(t,e){var r=t.__data__;return kk(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Ev(t,e){var r=zb(t,e);return mk(r)?r:void 0}var Ek=md?wv(md,Object):Tv,Ck=md?function(t){for(var e=[];t;)Yf(e,Ek(t)),t=Vb(t);return e}:Tv;function _k(t){return Qf(t)||Cv(t)||!!(am&&t&&t[am])}function bk(t,e){return e=e??yv,!!e&&(typeof t=="number"||Pb.test(t))&&t>-1&&t%1==0&&t<e}function kk(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function Tk(t){return!!im&&im in t}function Mk(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||qu;return t===r}function Pk(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}function Ik(t){if(typeof t=="string"||Rk(t))return t;var e=t+"";return e=="0"&&1/t==-Eb?"-0":e}function $k(t){if(t!=null){try{return xv.call(t)}catch{}try{return t+""}catch{}}return""}function jk(t,e){return t===e||t!==t&&e!==e}function Cv(t){return Ak(t)&&xs.call(t,"callee")&&(!Xb.call(t,"callee")||Zf.call(t)==Cb)}var Qf=Array.isArray;function _v(t){return t!=null&&Lk(t.length)&&!bv(t)}function Ak(t){return kv(t)&&_v(t)}function bv(t){var e=qf(t)?Zf.call(t):"";return e==_b||e==bb}function Lk(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=yv}function qf(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function kv(t){return!!t&&typeof t=="object"}function Rk(t){return typeof t=="symbol"||kv(t)&&Zf.call(t)==kb}function Ok(t){return _v(t)?fk(t,!0):yk(t)}var Dk=xk(function(t,e){return t==null?{}:(e=vv(Sv(e,1),Ik),vk(t,pk(Sk(t),e)))});function Tv(){return[]}var Bk=Dk;const Nk=Bk;var Hk=1/0,zk=9007199254740991,Fk="[object Arguments]",Wk="[object Function]",Gk="[object GeneratorFunction]",Uk="[object Symbol]",Vk=typeof Gt=="object"&&Gt&&Gt.Object===Object&&Gt,Xk=typeof self=="object"&&self&&self.Object===Object&&self,Kk=Vk||Xk||Function("return this")();function Yk(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Zk(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}function Qk(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}var Jf=Object.prototype,qk=Jf.hasOwnProperty,tp=Jf.toString,um=Kk.Symbol,Jk=Jf.propertyIsEnumerable,cm=um?um.isConcatSpreadable:void 0,hm=Math.max;function Mv(t,e,r,n,o){var i=-1,a=t.length;for(r||(r=n5),o||(o=[]);++i<a;){var l=t[i];e>0&&r(l)?e>1?Mv(l,e-1,r,n,o):Qk(o,l):n||(o[o.length]=l)}return o}function t5(t,e){return t=Object(t),e5(t,e,function(r,n){return n in t})}function e5(t,e,r){for(var n=-1,o=e.length,i={};++n<o;){var a=e[n],l=t[a];r(l,a)&&(i[a]=l)}return i}function r5(t,e){return e=hm(e===void 0?t.length-1:e,0),function(){for(var r=arguments,n=-1,o=hm(r.length-e,0),i=Array(o);++n<o;)i[n]=r[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=r[n];return a[e]=i,Yk(t,this,a)}}function n5(t){return s5(t)||i5(t)||!!(cm&&t&&t[cm])}function o5(t){if(typeof t=="string"||d5(t))return t;var e=t+"";return e=="0"&&1/t==-Hk?"-0":e}function i5(t){return l5(t)&&qk.call(t,"callee")&&(!Jk.call(t,"callee")||tp.call(t)==Fk)}var s5=Array.isArray;function a5(t){return t!=null&&c5(t.length)&&!u5(t)}function l5(t){return Pv(t)&&a5(t)}function u5(t){var e=h5(t)?tp.call(t):"";return e==Wk||e==Gk}function c5(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=zk}function h5(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Pv(t){return!!t&&typeof t=="object"}function d5(t){return typeof t=="symbol"||Pv(t)&&tp.call(t)==Uk}var f5=r5(function(t,e){return t==null?{}:t5(t,Zk(Mv(e,1),o5))}),p5=f5;const g5=p5;var Iv="Expected a function",dm=NaN,m5="[object Symbol]",y5=/^\s+|\s+$/g,v5=/^[-+]0x[0-9a-f]+$/i,w5=/^0b[01]+$/i,x5=/^0o[0-7]+$/i,S5=parseInt,E5=typeof Gt=="object"&&Gt&&Gt.Object===Object&&Gt,C5=typeof self=="object"&&self&&self.Object===Object&&self,_5=E5||C5||Function("return this")(),b5=Object.prototype,k5=b5.toString,T5=Math.max,M5=Math.min,Yc=function(){return _5.Date.now()};function P5(t,e,r){var n,o,i,a,l,c,h=0,f=!1,p=!1,g=!0;if(typeof t!="function")throw new TypeError(Iv);e=fm(e)||0,nu(r)&&(f=!!r.leading,p="maxWait"in r,i=p?T5(fm(r.maxWait)||0,e):i,g="trailing"in r?!!r.trailing:g);function w(b){var T=n,I=o;return n=o=void 0,h=b,a=t.apply(I,T),a}function C(b){return h=b,l=setTimeout(y,e),f?w(b):a}function S(b){var T=b-c,I=b-h,H=e-T;return p?M5(H,i-I):H}function P(b){var T=b-c,I=b-h;return c===void 0||T>=e||T<0||p&&I>=i}function y(){var b=Yc();if(P(b))return m(b);l=setTimeout(y,S(b))}function m(b){return l=void 0,g&&n?w(b):(n=o=void 0,a)}function x(){l!==void 0&&clearTimeout(l),h=0,n=c=o=l=void 0}function k(){return l===void 0?a:m(Yc())}function M(){var b=Yc(),T=P(b);if(n=arguments,o=this,c=b,T){if(l===void 0)return C(c);if(p)return l=setTimeout(y,e),w(c)}return l===void 0&&(l=setTimeout(y,e)),a}return M.cancel=x,M.flush=k,M}function I5(t,e,r){var n=!0,o=!0;if(typeof t!="function")throw new TypeError(Iv);return nu(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),P5(t,e,{leading:n,maxWait:e,trailing:o})}function nu(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function $5(t){return!!t&&typeof t=="object"}function j5(t){return typeof t=="symbol"||$5(t)&&k5.call(t)==m5}function fm(t){if(typeof t=="number")return t;if(j5(t))return dm;if(nu(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=nu(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(y5,"");var r=w5.test(t);return r||x5.test(t)?S5(t.slice(2),r?2:8):v5.test(t)?dm:+t}var A5=I5;const ep=A5;let L5=class{constructor(e){E(this,"redoStack",[]),E(this,"undoStack",[]),E(this,"isEnableRedoUndo",!0),E(this,"emitter",new ar),E(this,"isBatching",!1),this.editor=e}redo(){var e,r;if(this.isEnableRedoUndo&&this.redoStack.length>0){const n=this.redoStack.pop(),o=n.isBatched,i=[n];if(o){for(;this.redoStack.length>0&&this.redoStack.at(-1).isBatched;){const a=this.redoStack.pop();i.push(a)}console.log("------- [redo] batched start -----")}for(const a of i){const l=a.command;console.log(`%c Redo %c [${l.desc}]`,"background: #f04; color: #ee0",""),this.undoStack.push(a),(r=(e=a.hooks)==null?void 0:e.beforeRedo)==null||r.call(e),l.redo()}o&&console.log("------- [redo] batched end -----"),this.editor.render(),this.emitStatusChange()}}undo(){var e,r;if(this.isEnableRedoUndo&&this.undoStack.length>0){const n=this.undoStack.pop(),o=n.isBatched,i=[n];if(o){for(;this.undoStack.length>0&&this.undoStack.at(-1).isBatched;){const a=this.undoStack.pop();i.push(a)}console.log("------- [undo] batched start -----")}for(const a of i){const l=a.command;console.log(`%c Undo %c [${l.desc}]`,"background: #40f; color: #eee",""),this.redoStack.push(a),(r=(e=a.hooks)==null?void 0:e.beforeUndo)==null||r.call(e),l.undo()}o&&console.log("------- [undo] batched end -----"),this.editor.render(),this.emitStatusChange()}}enableRedoUndo(){this.isEnableRedoUndo=!0}disableRedoUndo(){this.isEnableRedoUndo=!1}batchCommandStart(){this.isBatching=!0}batchCommandEnd(){this.isBatching=!1}pushCommand(e,r){this.emitter.emit("beforeExecCmd"),console.log(`%c Exec %c [${e.desc}]`,"background: #222; color: #bada55","");const n={command:e};this.isBatching&&(n.isBatched=!0),r&&(n.hooks=r),this.undoStack.push(n),this.redoStack=[],this.emitStatusChange()}emitStatusChange(){this.emitter.emit("change",{canRedo:this.redoStack.length>0,canUndo:this.undoStack.length>0})}on(e,r){this.emitter.on(e,r)}off(e,r){this.emitter.off(e,r)}clearRecords(){this.redoStack=[],this.undoStack=[],this.emitStatusChange()}},yo=class{constructor(e,r,n,o){if(this.desc=e,this.elements=r,this.attrs=n,this.prevAttrs=o,r.length!==o.length)throw new Error(`elements 和 preAttrs 数量不匹配 ${r.length} ${o.length}`)}redo(){var e;const{elements:r,attrs:n}=this;for(let o=0,i=this.elements.length;o<i;o++){const a=Array.isArray(n)?n[o]:tt(n),l=r[o];if(a.parentIndex&&l.removeFromParent(),l.updateAttrs(a),a.parentIndex){const c=l.getParent();c&&c.insertChild(l,(e=l.attrs.parentIndex)==null?void 0:e.position)}}}undo(){var e;const{elements:r,prevAttrs:n}=this;for(let o=0,i=this.elements.length;o<i;o++){const a=r[o],l=n[o];if(r[o].updateAttrs(n[o]),"parentIndex"in l&&l.parentIndex===void 0)a.removeFromParent();else if(l.parentIndex){const c=a.getParent();c&&c.insertChild(a,(e=a.attrs.parentIndex)==null?void 0:e.position)}}}};E(yo,"type","SetElementsAttrs");class ec{constructor(e,r,n,o,i=new Set,a=new Set){this.desc=e,this.editor=r,this.originAttrsMap=n,this.updatedAttrsMap=o,this.removedIds=i,this.newIds=a,n.size!==o.size&&(console.warn(`originAttrsMap 和 updatedAttrsMap 数量不匹配 ${n.size} ${o.size}`),console.log("origin:",n),console.log("update:",o))}redo(){var e;const r=this.updatedAttrsMap,n=this.editor.doc;for(const[o,i]of r){const a=n.getGraphicsById(o);if(!a){console.warn(`graphics ${o} is lost.`);return}i.parentIndex&&a.removeFromParent(),a.updateAttrs(i),i.parentIndex&&a.insertAtParent(a.attrs.parentIndex.position)}for(const o of this.removedIds){const i=n.getGraphicsById(o);i&&(i.setDeleted(!0),i.removeFromParent())}for(const o of this.newIds){const i=n.getGraphicsById(o);if(i){i.setDeleted(!1);const a=(e=i.attrs.parentIndex)==null?void 0:e.position;a?i.insertAtParent(a):console.error("position lost")}}}undo(){var e;const r=this.originAttrsMap,n=this.editor.doc;for(const[o,i]of r){const a=n.getGraphicsById(o);if(!a){console.warn(`graphics ${o} is lost.`);return}i.parentIndex&&a.removeFromParent(),a.updateAttrs(i),i.parentIndex&&a.insertAtParent(a.attrs.parentIndex.position)}for(const o of this.removedIds){const i=n.getGraphicsById(o);if(i){i.setDeleted(!1);const a=(e=i.attrs.parentIndex)==null?void 0:e.position;a?i.insertAtParent(a):console.error("position lost")}}for(const o of this.newIds){const i=n.getGraphicsById(o);i&&(i.setDeleted(!0),i.removeFromParent())}this.newIds.size!==0&&this.editor.selectedElements.clear()}}E(ec,"type","UpdateGraphicsAttrs");var R5=Object.defineProperty,O5=(t,e,r)=>e in t?R5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Kn=(t,e,r)=>(O5(t,typeof e!="symbol"?e+"":e,r),r);class ot{constructor(e=1,r=0,n=0,o=1,i=0,a=0){Kn(this,"a"),Kn(this,"b"),Kn(this,"c"),Kn(this,"d"),Kn(this,"tx"),Kn(this,"ty"),this.a=e,this.b=r,this.c=n,this.d=o,this.tx=i,this.ty=a}set(e,r,n,o,i,a){return this.a=e,this.b=r,this.c=n,this.d=o,this.tx=i,this.ty=a,this}getArray(){return[this.a,this.b,this.c,this.d,this.tx,this.ty]}apply(e){const r=e.x,n=e.y;return{x:this.a*r+this.c*n+this.tx,y:this.b*r+this.d*n+this.ty}}applyInverse(e){const r=this.a,n=this.b,o=this.c,i=this.d,a=this.tx,l=this.ty,c=1/(r*i+o*-n),h=e.x,f=e.y;return{x:i*c*h+-o*c*f+(l*o-a*i)*c,y:r*c*f+-n*c*h+(-l*r+a*n)*c}}translate(e,r){return this.tx+=e,this.ty+=r,this}scale(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this}rotate(e){const r=Math.cos(e),n=Math.sin(e),o=this.a,i=this.c,a=this.tx;return this.a=o*r-this.b*n,this.b=o*n+this.b*r,this.c=i*r-this.d*n,this.d=i*n+this.d*r,this.tx=a*r-this.ty*n,this.ty=a*n+this.ty*r,this}append(e){const r=this.a,n=this.b,o=this.c,i=this.d;return this.a=e.a*r+e.b*o,this.b=e.a*n+e.b*i,this.c=e.c*r+e.d*o,this.d=e.c*n+e.d*i,this.tx=e.tx*r+e.ty*o+this.tx,this.ty=e.tx*n+e.ty*i+this.ty,this}appendFrom(e,r){const n=e.a,o=e.b,i=e.c,a=e.d,l=e.tx,c=e.ty,h=r.a,f=r.b,p=r.c,g=r.d;return this.a=n*h+o*p,this.b=n*f+o*g,this.c=i*h+a*p,this.d=i*f+a*g,this.tx=l*h+c*p+r.tx,this.ty=l*f+c*g+r.ty,this}prepend(e){const r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,o=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=o*e.a+this.d*e.c,this.d=o*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this}invert(){const e=this.a,r=this.b,n=this.c,o=this.d,i=this.tx,a=e*o-r*n;return this.a=o/a,this.b=-r/a,this.c=-n/a,this.d=e/a,this.tx=(n*this.ty-o*i)/a,this.ty=-(e*this.ty-r*i)/a,this}isIdentity(){return this.a===1&&this.b===0&&this.c===0&&this.d===1&&this.tx===0&&this.ty===0}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new ot;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}equals(e){return e.a===this.a&&e.b===this.b&&e.c===this.c&&e.d===this.d&&e.tx===this.tx&&e.ty===this.ty}toString(){return`[Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}}const yd=Math.PI*2;function wa(t){return t*180/Math.PI}const $v=t=>(t=t%yd,t<0&&(t+=yd),t),vd=t=>(t=t%360,t<0&&(t+=360),t),Ei=(t,e)=>{const r=t.x*e.x+t.y*e.y,n=Math.sqrt(t.x*t.x+t.y*t.y)*Math.sqrt(e.x*e.x+e.y*e.y);let o=r/n;o>1?o=1:o<-1&&(o=-1);let i=Math.acos(o);return t.x*e.y-t.y*e.x<0&&(i=yd-i),i},hs=(t,e={x:0,y:-1})=>{const r=new ot(t[0],t[1],t[2],t[3],0,0).apply(e);return Ei(e,r)},jv=t=>t[0]*t[3]-t[1]*t[2]<0,wd=()=>[1,0,0,1,0,0],Ar=(t,e)=>{const r=t[0],n=t[1],o=t[2],i=t[3];return[e[0]*r+e[1]*o,e[0]*n+e[1]*i,e[2]*r+e[3]*o,e[2]*n+e[3]*i,e[4]*r+e[5]*o+t[4],e[4]*n+e[5]*i+t[5]]},D5=(t,e)=>({x:e.x*t[0]+e.y*t[2]+t[4],y:e.x*t[1]+e.y*t[3]+t[5]}),so=t=>{const e=t[0],r=t[1],n=t[2],o=t[3],i=t[4],a=e*o-r*n;return[o/a,-r/a,-n/a,e/a,(n*t[5]-o*i)/a,-(e*t[5]-r*i)/a]},B5=(t,e,r,n,o)=>{if(!r)return{x:t,y:e};const i=Math.cos(r),a=Math.sin(r);return{x:(t-n)*i-(e-o)*a+n,y:(t-n)*a+(e-o)*i+o}},ou=(t,e)=>({x:t.x+e.x,y:t.y+e.y}),N5=1e-10,H5=(t,e,r=N5)=>Math.abs(t.x-e.x)<r&&Math.abs(t.y-e.y)<r,Kr=(t,e)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),iu=(t,e,r)=>t*(1-r)+e*r,z5=(t,e,r)=>({x:iu(t.x,e.x,r),y:iu(t.y,e.y,r)}),rp=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),width:Math.abs(t.x-e.x),height:Math.abs(t.y-e.y)}),Av=(t,e,r=0)=>(e.transform&&(t=new ot(...e.transform).applyInverse(t)),t.x>=-r&&t.y>=-r&&t.x<=e.width+r&&t.y<=e.height+r),F5=(t,e,r,n=0)=>{const o=e.x-n,i=e.y-n,a=e.width+n*2,l=e.height+n*2;return t.x>=o&&t.y>=i&&t.x<=o+a&&t.y<=i+l?t.x<=o+r[0]&&t.y<=i+r[0]?(t.x-o-r[0])**2+(t.y-i-r[0])**2<=r[0]**2:t.x>=o+a-r[1]&&t.y<=i+r[1]?(t.x-o-a+r[1])**2+(t.y-i-r[1])**2<=r[1]**2:t.x>=o+a-r[2]&&t.y>=i+l-r[2]?(t.x-o-a+r[2])**2+(t.y-i-l+r[2])**2<=r[2]**2:t.x<=o+r[3]&&t.y>=i+l-r[3]?(t.x-o-r[3])**2+(t.y-i-l+r[3])**2<=r[3]**2:!0:!1},La=({x:t,y:e,width:r,height:n})=>{const o=t+r,i=e+n;return rp({x:t,y:e},{x:o,y:i})},W5=(t,e)=>t.x<=e.x+e.width&&t.x+t.width>=e.x&&t.y<=e.y+e.height&&t.y+t.height>=e.y,pm=(t,e)=>{typeof e=="number"&&(e=[e,e,e,e]);const{x:r,y:n,width:o,height:i}=t;return{x:r-e[3],y:n-e[0],width:o+e[1]+e[3],height:i+e[0]+e[2]}},G5=t=>{const{x:e,y:r,width:n,height:o}=t,i=n/2,a=o/2;return[{x:e+i,y:r},{x:e+n,y:r+a},{x:e+i,y:r+o},{x:e,y:r+a}]},U5=(t,e)=>{const{x:r,y:n}=t,o=e.x-t.x,i=e.y-t.y,a=$v(Math.atan2(i,o)),l=r+o/2,c=n+i/2,h=B5(r,n,-a,l,c);return{x:h.x,y:h.y,width:Math.sqrt(o*o+i*i),height:0,rotation:a}},Ci=(t,e)=>{const{x:r,y:n,width:o,height:i}=t;let a=[{x:r,y:n},{x:r+o,y:n},{x:r+o,y:n+i},{x:r,y:n+i}];if(e){const l=new ot(...e);a=a.map(c=>{const h=l.apply(c);return{x:h.x,y:h.y}})}return a},Lv=t=>{const e=new ot(t.transform[0],t.transform[1],t.transform[2],t.transform[3],0,0),r=e.apply({x:t.width,y:0}),n=e.apply({x:0,y:t.height}),o={x:0,y:0};return{width:Kr(r,o),height:Kr(n,o)}},El=t=>{const e=Lv(t),r=e.width?t.width/e.width:1,n=e.height?t.height/e.height:1,o=new ot().scale(r,n),i=new ot(...t.transform).append(o);return{width:e.width,height:e.height,transform:i.getArray()}},V5=t=>({minX:t.x,minY:t.y,maxX:t.x+t.width,maxY:t.y+t.height}),ji=t=>({x:t.minX,y:t.minY,width:t.maxX-t.minX,height:t.maxY-t.minY}),X5=(t,e,r=0)=>e.x>=t.minX-r&&e.y>=t.minY-r&&e.x<=t.maxX+r&&e.y<=t.maxY+r,ei=t=>{if(t.length===0)throw new Error("the count of boxes can not be 0");let e=1/0,r=1/0,n=-1/0,o=-1/0;for(const i of t)e=Math.min(e,i.minX),r=Math.min(r,i.minY),n=Math.max(n,i.maxX),o=Math.max(o,i.maxY);return{minX:e,minY:r,maxX:n,maxY:o}},Rv=(t,e)=>t.minX<=e.maxX&&t.maxX>=e.minX&&t.minY<=e.maxY&&t.maxY>=e.minY,gm=(t,e)=>t.minX<=e.minX&&t.minY<=e.minY&&t.maxX>=e.maxX&&t.maxY>=e.maxY,rc=t=>{let e=1/0,r=1/0,n=-1/0,o=-1/0;for(const i of t)e=Math.min(e,i.x),r=Math.min(r,i.y),n=Math.max(n,i.x),o=Math.max(o,i.y);return{minX:e,minY:r,maxX:n,maxY:o}},Zs=(t,e)=>{let r=0,n=0,o=t.width,i=t.height;e&&(r-=e,n-=e,o+=e*2,i+=e*2);const a=t.transform,l=Ci({x:r,y:n,width:o,height:i}).map(c=>D5(a,c));return rc(l)},K5=(t,e,r,n=!0)=>{if(t.x===e.x&&t.y===e.y)return{t:0,point:{x:t.x,y:t.y}};const o=e.x-t.x,i=e.y-t.y;let a=((r.x-t.x)*o+(r.y-t.y)*i)/(o*o+i*i);n||(a=Math.max(0,Math.min(1,a)));const l={x:t.x+a*o,y:t.y+a*i};return{t:a,point:l}},Y5=(t,e,r=4)=>{let n={x:0,y:0},o=1/0;for(let i=1;i<=r;i++){const a=Math.PI/r*i,l={x:t.x+Math.cos(a),y:t.y+Math.sin(a)},{point:c}=K5(t,l,e),h=Kr(c,e);if(h===0)return c;h<o&&(o=h,n=c)}return n};var Z5=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xd={},Q5={get exports(){return xd},set exports(t){xd=t}};(function(t,e){(function(r,n){n(t)})(Z5,function(r){function n(y,m){if(!(y instanceof m))throw new TypeError("Cannot call a class as a function")}/**
 *  @preserve  JavaScript implementation of
 *  Algorithm for Automatically Fitting Digitized Curves
 *  by Philip J. Schneider
 *  "Graphics Gems", Academic Press, 1990
 *
 *  The MIT License (MIT)
 *
 *  https://github.com/soswow/fit-curves
 */function o(y,m,x){if(!Array.isArray(y))throw new TypeError("First argument should be an array");if(y.forEach(function(T){if(!Array.isArray(T)||T.some(function(I){return typeof I!="number"})||T.length!==y[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),y=y.filter(function(T,I){return I===0||!T.every(function(H,R){return H===y[I-1][R]})}),y.length<2)return[];var k=y.length,M=C(y[1],y[0]),b=C(y[k-2],y[k-1]);return i(y,M,b,m,x)}function i(y,m,x,k,M){var b=20,T,I,H,R,O,F,N,V,Z,ct,et,D,X;if(y.length===2)return D=S.vectorLen(S.subtract(y[0],y[1]))/3,T=[y[0],S.addArrays(y[0],S.mulItems(m,D)),S.addArrays(y[1],S.mulItems(x,D)),y[1]],[T];I=f(y);var j=a(y,I,I,m,x,M);if(T=j[0],R=j[1],F=j[2],R===0||R<k)return[T];if(R<k*k)for(H=I,O=R,N=F,X=0;X<b;X++){H=c(T,y,H);var dt=a(y,I,H,m,x,M);if(T=dt[0],R=dt[1],F=dt[2],R<k)return[T];if(F===N){var gt=R/O;if(gt>.9999&&gt<1.0001)break}O=R,N=F}if(et=[],V=S.subtract(y[F-1],y[F+1]),V.every(function(zt){return zt===0})){V=S.subtract(y[F-1],y[F]);var it=[-V[1],V[0]];V[0]=it[0],V[1]=it[1]}return Z=S.normalize(V),ct=S.mulItems(Z,-1),et=et.concat(i(y.slice(0,F+1),m,Z,k,M)),et=et.concat(i(y.slice(F),ct,x,k,M)),et}function a(y,m,x,k,M,b){var T,I,H;T=l(y,x,k,M);var R=p(y,T,m);return I=R[0],H=R[1],b&&b({bez:T,points:y,params:m,maxErr:I,maxPoint:H}),[T,I,H]}function l(y,m,x,k){var M,b,T,I,H,R,O,F,N,V,Z,ct,et,D,X,j,dt,gt=y[0],it=y[y.length-1];for(M=[gt,null,null,it],b=S.zeros_Xx2x2(m.length),et=0,D=m.length;et<D;et++)j=m[et],dt=1-j,T=b[et],T[0]=S.mulItems(x,3*j*(dt*dt)),T[1]=S.mulItems(k,3*dt*(j*j));for(I=[[0,0],[0,0]],H=[0,0],et=0,D=y.length;et<D;et++)j=m[et],T=b[et],I[0][0]+=S.dot(T[0],T[0]),I[0][1]+=S.dot(T[0],T[1]),I[1][0]+=S.dot(T[0],T[1]),I[1][1]+=S.dot(T[1],T[1]),X=S.subtract(y[et],P.q([gt,gt,it,it],j)),H[0]+=S.dot(T[0],X),H[1]+=S.dot(T[1],X);return R=I[0][0]*I[1][1]-I[1][0]*I[0][1],O=I[0][0]*H[1]-I[1][0]*H[0],F=H[0]*I[1][1]-H[1]*I[0][1],N=R===0?0:F/R,V=R===0?0:O/R,ct=S.vectorLen(S.subtract(gt,it)),Z=1e-6*ct,N<Z||V<Z?(M[1]=S.addArrays(gt,S.mulItems(x,ct/3)),M[2]=S.addArrays(it,S.mulItems(k,ct/3))):(M[1]=S.addArrays(gt,S.mulItems(x,N)),M[2]=S.addArrays(it,S.mulItems(k,V))),M}function c(y,m,x){return x.map(function(k,M){return h(y,m[M],k)})}function h(y,m,x){var k=S.subtract(P.q(y,x),m),M=P.qprime(y,x),b=S.mulMatrix(k,M),T=S.sum(S.squareItems(M))+2*S.mulMatrix(k,P.qprimeprime(y,x));return T===0?x:x-b/T}function f(y){var m=[],x,k,M;return y.forEach(function(b,T){x=T?k+S.vectorLen(S.subtract(b,M)):0,m.push(x),k=x,M=b}),m=m.map(function(b){return b/k}),m}function p(y,m,x){var k,M,b,T,I,H,R,O;M=0,b=Math.floor(y.length/2);var F=g(m,10);for(I=0,H=y.length;I<H;I++)R=y[I],O=w(m,x[I],F,10),T=S.subtract(P.q(m,O),R),k=T[0]*T[0]+T[1]*T[1],k>M&&(M=k,b=I);return[M,b]}var g=function(y,m){for(var x,k=[0],M=y[0],b=0,T=1;T<=m;T++)x=P.q(y,T/m),b+=S.vectorLen(S.subtract(x,M)),k.push(b),M=x;return k=k.map(function(I){return I/b}),k};function w(y,m,x,k){if(m<0)return 0;if(m>1)return 1;for(var M,b,T,I,H,R=1;R<=k;R++)if(m<=x[R]){I=(R-1)/k,T=R/k,b=x[R-1],M=x[R],H=(m-b)/(M-b)*(T-I)+I;break}return H}function C(y,m){return S.normalize(S.subtract(y,m))}var S=function(){function y(){n(this,y)}return y.zeros_Xx2x2=function(m){for(var x=[];m--;)x.push([0,0]);return x},y.mulItems=function(m,x){return m.map(function(k){return k*x})},y.mulMatrix=function(m,x){return m.reduce(function(k,M,b){return k+M*x[b]},0)},y.subtract=function(m,x){return m.map(function(k,M){return k-x[M]})},y.addArrays=function(m,x){return m.map(function(k,M){return k+x[M]})},y.addItems=function(m,x){return m.map(function(k){return k+x})},y.sum=function(m){return m.reduce(function(x,k){return x+k})},y.dot=function(m,x){return y.mulMatrix(m,x)},y.vectorLen=function(m){return Math.hypot.apply(Math,m)},y.divItems=function(m,x){return m.map(function(k){return k/x})},y.squareItems=function(m){return m.map(function(x){return x*x})},y.normalize=function(m){return this.divItems(m,this.vectorLen(m))},y}(),P=function(){function y(){n(this,y)}return y.q=function(m,x){var k=1-x,M=S.mulItems(m[0],k*k*k),b=S.mulItems(m[1],3*k*k*x),T=S.mulItems(m[2],3*k*x*x),I=S.mulItems(m[3],x*x*x);return S.addArrays(S.addArrays(M,b),S.addArrays(T,I))},y.qprime=function(m,x){var k=1-x,M=S.mulItems(S.subtract(m[1],m[0]),3*k*k),b=S.mulItems(S.subtract(m[2],m[1]),6*k*x),T=S.mulItems(S.subtract(m[3],m[2]),3*x*x);return S.addArrays(S.addArrays(M,b),T)},y.qprimeprime=function(m,x){return S.addArrays(S.mulItems(S.addArrays(S.subtract(m[2],S.mulItems(m[1],2)),m[0]),6*(1-x)),S.mulItems(S.addArrays(S.subtract(m[3],S.mulItems(m[2],2)),m[1]),6*x))},y}();r.exports=o,r.exports.fitCubic=i,r.exports.createTangent=C})})(Q5);const q5=xd,J5=(t,e)=>{const r=q5(t.map(({point:o})=>[o.x,o.y]),e),n=[];for(let o=0,i=r.length;o<=i;o++){const a=r[o],l=r[o-1],c=a?{x:a[0][0],y:a[0][1]}:{x:l[3][0],y:l[3][1]},h=a?{x:a[1][0]-c.x,y:a[1][1]-c.y}:{x:0,y:0},f=l?{x:l[2][0]-c.x,y:l[2][1]-c.y}:{x:0,y:0};n.push({point:c,in:f,out:h})}return n};let tT=class{constructor(e){Kn(this,"points"),Kn(this,"dpoints",[]),Kn(this,"_bbox",null),Kn(this,"lut",[]),this.points=e,this.dpoints[0]={x:3*(e[1].x-e[0].x),y:3*(e[1].y-e[0].y)},this.dpoints[1]={x:3*(e[2].x-e[1].x),y:3*(e[2].y-e[1].y)},this.dpoints[2]={x:3*(e[3].x-e[2].x),y:3*(e[3].y-e[2].y)}}compute(e){const r=e*e,n=1-e,o=n*n,i=o*n,a=3*e*o,l=3*r*n,c=r*e,[h,f,p,g]=this.points;return{x:i*h.x+a*f.x+l*p.x+c*g.x,y:i*h.y+a*f.y+l*p.y+c*g.y}}extrema(){const e=this.dpoints,r=[...mm(e[0].x,e[1].x,e[2].x),...mm(e[0].y,e[1].y,e[2].y)].filter(n=>n>=0&&n<=1);return Array.from(new Set(r))}getBbox(){if(!this._bbox){const e=this.extrema().map(r=>this.compute(r));this._bbox=rc([...e,this.points[0],this.points[3]])}return this._bbox}hitTest(e,r){if(!X5(this.getBbox(),e,r))return!1;const n=this.getLookupTable();let o=Number.MAX_SAFE_INTEGER,i=-1;for(let f=0;f<n.length;f++){const p=n[f],g=Kr(e,p.pt);if(g<=r)return!0;g<o&&(o=g,i=f)}const a=n[i].t,l=i>0?n[i-1].t:a,c=i<n.length-1?n[i+1].t:a,h=.001;for(let f=l;f<=c;f+=h){const p=this.compute(f);if(Kr(e,p)<=r)return!0}return!1}getLookupTable(){if(this.lut.length===0)for(let e=0;e<=100;e++){const r=e/100,n=this.compute(r);this.lut[e]={t:r,pt:n}}return this.lut}project(e){const r=this.getLookupTable();let n=Number.MAX_SAFE_INTEGER,o=-1;for(let f=0;f<r.length;f++){const p=r[f],g=Kr(e,p.pt);if(g<n&&(n=g,o=f,g===0))break}if(n===0){const f=this.compute(r[o].t);return{point:f,t:r[o].t,dist:Kr(e,f)}}let i=r[o].t;const a=o>0?r[o-1].t:i,l=o<r.length-1?r[o+1].t:i,c=.001;for(let f=a;f<=l;f+=c){const p=this.compute(f),g=Kr(e,p);if(g<n&&(n=g,i=f,g===0))break}i<0&&(i=0),i>1&&(i=1);const h=this.compute(i);return{point:h,t:i,dist:Kr(e,h)}}};const mm=(t,e,r)=>{const n=t-2*e+r;if(n!==0){const o=e*e-t*r;if(o<0)return[];const i=Math.sqrt(o),a=t-e;return i===0?[(a-i)/n]:[(a-i)/n,(a+i)/n]}else return t!==e?[t/(t-e)/2]:[]};class xa{constructor(e){Kn(this,"bezierLists");const r=[];for(let n=0;n<e.length;n++){const o=e[n],i=o.segs;r[n]=[];for(let a=1;a<=i.length;a++){if(a===i.length&&!o.closed)continue;const l=i[a%i.length],c=i[a-1];r[n].push(new tT([c.point,xa.getHandleOut(c),xa.getHandleIn(l),l.point]))}}this.bezierLists=r}static getHandleIn(e){return ou(e.point,e.in)}static getHandleOut(e){return ou(e.point,e.out)}getBbox(){let e=1/0,r=1/0,n=-1/0,o=-1/0;for(const i of this.bezierLists)for(const a of i){const l=a.getBbox();e=Math.min(e,l.minX),r=Math.min(r,l.minY),n=Math.max(n,l.maxX),o=Math.max(o,l.maxY)}return e===1/0?{x:0,y:0,width:100,height:100}:{x:e,y:r,width:n-e,height:o-r}}hitTest(e,r){for(const n of this.bezierLists)for(const o of n)if(o.hitTest(e,r))return!0;return!1}project(e){let r=1/0,n=null;for(const o of this.bezierLists)for(const i of o){const a=i.project(e);if(a.dist===0)return{dist:a.dist,point:a.point};a.dist<r&&(r=a.dist,n=a.point)}return{dist:r,point:n}}}const eT=(t,e)=>{const r=t.width/2,n=t.height/2,o=[{x:r,y:0}],i=Math.PI*2/e,a=new ot().translate(-r,-n).rotate(i).translate(r,n);let l=o[0];for(let h=1;h<e;h++){const{x:f,y:p}=a.apply(l),g={x:f,y:p};o.push(g),l=g}const c=t.width/t.height;for(let h=1;h<e;h++){const f=o[h];f.x=iu(r,f.x,c)}return o},rT=(t,e)=>{let r;for(let n=0;n<t.length;n++){const o=t[n],i=t[(n+1)%t.length],a={x:i.x-o.x,y:i.y-o.y},l={x:e.x-o.x,y:e.y-o.y},c=Math.sign(a.x*l.y-a.y*l.x);if(c!==0){if(r===void 0)r=c;else if(r!==c)return!1}}return!0},nT=(t,e)=>{let r=!1;for(let n=0;n<t.length;n++){let o=t[n],i=t[(n+1)%t.length];if(o.y>i.y&&([o,i]=[i,o]),o.y<=e.y&&i.y>e.y){const a=(e.x-o.x)*(i.y-o.y)-(i.x-o.x)*(e.y-o.y);if(a===0)return!0;a>0&&(r=!r)}}return r},Ov=(t,e,r,n={keepPolarSnap:!1,scaleFromCenter:!1})=>{if(!["se","ne","nw","sw"].includes(t))throw new Error(`invalid type "${t}"`);const o=t==="se"||t==="ne";let i={x:0,y:0};n.scaleFromCenter?i=new ot(...r.transform).apply({x:r.width/2,y:r.height/2}):o?i={x:r.transform[4],y:r.transform[5]}:i=new ot(...r.transform).apply({x:r.width,y:r.height}),n.keepPolarSnap&&(e=Y5(i,e));let a=Kr(e,i);if(n.scaleFromCenter&&(a*=2),o){const l={x:e.x-i.x,y:e.y-i.y},c=Ei({x:1,y:0},{x:e.x-i.x,y:e.y-i.y}),h=new ot().rotate(c).translate(i.x,i.y);return n.scaleFromCenter&&h.translate(-l.x,-l.y),{width:a,height:0,transform:h.getArray()}}else{const l={x:i.x-e.x,y:i.y-e.y},c=Ei({x:1,y:0},l),h=new ot().rotate(c),f=h.apply({x:a,y:r.height});return h.translate(i.x-f.x,i.y-f.y),n.scaleFromCenter&&h.translate(l.x,l.y),{width:a,height:0,transform:h.getArray()}}},il=(t,e)=>({width:t*2,height:e*2}),oT={sw:{getLocalOrigin:t=>({x:t,y:0}),getNewSize:(t,e)=>({width:e.x-t.x,height:t.y-e.y}),isBaseWidthWhenKeepRatio:t=>t,getSizeWhenScaleFromCenter:il},se:{getLocalOrigin:()=>({x:0,y:0}),getNewSize:(t,e)=>({width:t.x-e.x,height:t.y-e.y}),isBaseWidthWhenKeepRatio:t=>t,getSizeWhenScaleFromCenter:il},nw:{getLocalOrigin:(t,e)=>({x:t,y:e}),getNewSize:(t,e)=>({width:e.x-t.x,height:e.y-t.y}),isBaseWidthWhenKeepRatio:t=>t,getSizeWhenScaleFromCenter:il},ne:{getLocalOrigin:(t,e)=>({x:0,y:e}),getNewSize:(t,e)=>({width:t.x-e.x,height:e.y-t.y}),isBaseWidthWhenKeepRatio:t=>t,getSizeWhenScaleFromCenter:il},n:{getLocalOrigin:(t,e)=>({x:t/2,y:e}),getNewSize:(t,e,r)=>({width:r.width,height:e.y-t.y}),isBaseWidthWhenKeepRatio:()=>!1,getSizeWhenScaleFromCenter:(t,e)=>({width:t,height:e*2})},s:{getLocalOrigin:t=>({x:t/2,y:0}),getNewSize:(t,e,r)=>({width:r.width,height:t.y-e.y}),isBaseWidthWhenKeepRatio:()=>!1,getSizeWhenScaleFromCenter:(t,e)=>({width:t,height:e*2})},e:{getLocalOrigin:(t,e)=>({x:0,y:e/2}),getNewSize:(t,e,r)=>({width:t.x-e.x,height:r.height}),isBaseWidthWhenKeepRatio:()=>!0,getSizeWhenScaleFromCenter:(t,e)=>({width:t*2,height:e})},w:{getLocalOrigin:(t,e)=>({x:t,y:e/2}),getNewSize:(t,e,r)=>({width:e.x-t.x,height:r.height}),isBaseWidthWhenKeepRatio:()=>!0,getSizeWhenScaleFromCenter:(t,e)=>({width:t*2,height:e})}},su=(t,e,r,n)=>{const o=oT[t];if(!o)throw new Error(`resize type ${t} is invalid`);const{keepRatio:i,scaleFromCenter:a,noChangeWidthAndHeight:l,flip:c=!0}=n??{},h=new ot(...r.transform),f={width:0,height:0,transform:h.clone()},p=a?{x:r.width/2,y:r.height/2}:o.getLocalOrigin(r.width,r.height),g=h.applyInverse(e);let w=o.getNewSize(g,p,r);if(a&&(w=o.getSizeWhenScaleFromCenter(w.width,w.height)),i){const k=r.width/r.height,M=Math.abs(w.width/w.height)>k;o.isBaseWidthWhenKeepRatio(M)?w.height=Math.sign(w.height)*Math.abs(w.width)/k:w.width=Math.sign(w.width)*Math.abs(w.height)*k}const C=new ot,S=Math.sign(w.width)||1,P=Math.sign(w.height)||1;l?(C.scale(w.width/r.width,w.height/r.height),f.width=r.width,f.height=r.height):(f.width=Math.abs(w.width),f.height=Math.abs(w.height),C.scale(S,P)),f.transform=f.transform.append(C);const y=f.transform.apply(a?{x:f.width/2,y:f.height/2}:o.getLocalOrigin(f.width,f.height)),m=h.apply(p),x={x:m.x-y.x,y:m.y-y.y};if(f.transform.prepend(new ot().translate(x.x,x.y)),!c){const k=new ot().translate(-f.width/2,-f.height/2).scale(S,P).translate(f.width/2,f.height/2);f.transform.append(k)}return{width:f.width,height:f.height,transform:f.transform.getArray()}},iT=(t,e,r)=>{const n=t.width/2,o=t.height/2,i=new Array(e*2);i[0]={x:n,y:0};const a=Math.PI*2/e,l=new ot().translate(-n,-o).rotate(a).translate(n,o);let c=i[0];for(let p=1;p<e;p++){const{x:g,y:w}=l.apply(c),C={x:g,y:w};i[p*2]=C,c=C}const h=new ot().translate(-n,-o).rotate(a/2).translate(n,o);c=z5({x:n,y:o},h.apply(i[0]),r),i[1]=c;for(let p=1;p<e;p++){const{x:g,y:w}=l.apply(c),C={x:g,y:w};i[p*2+1]=C,c=C}const f=t.width/t.height;for(let p=1;p<i.length;p++){const g=i[p];g.x=iu(n,g.x,f)}return i};let sT=class{constructor(e){E(this,"_active",!1),E(this,"inactiveAfterPointerUp",!1),E(this,"isEnableDragCanvasBySpace",!0),E(this,"_isPressing",!1),E(this,"startVwPos",{x:0,y:0}),E(this,"startViewportPos",{x:0,y:0}),E(this,"eventEmitter",new ar),E(this,"handleSpaceToggle",r=>{this.isEnableDragCanvasBySpace&&(r?this.active():this.inactive())}),E(this,"handleWheelBtnToggle",(r,n)=>{this.isEnableDragCanvasBySpace&&(r?this.active(n):this.inactive())}),E(this,"onStart",r=>{r.nativeEvent.button!==0&&r.nativeEvent.button!==1||(this.editor.cursorManager.setCursor("grabbing"),this._isPressing=!0,this.startVwPos={...r.vwPos},this.startViewportPos=this.editor.viewportManager.getViewport())}),E(this,"onDrag",r=>{if(!this._isPressing)return;const n=r.vwPos.x-this.startVwPos.x,o=r.vwPos.y-this.startVwPos.y,i=this.editor.setting.get("dragBlockStep"),a=this.editor.zoomManager.getZoom();if(r.maxDragDistance>i/a){const l=this.startViewportPos.x-n/a,c=this.startViewportPos.y-o/a;this.editor.viewportManager.setViewport({x:l,y:c}),this.editor.render()}}),E(this,"onEnd",()=>{this.editor.cursorManager.setCursor("grab"),this._isPressing=!1,this.inactiveAfterPointerUp&&(this.inactiveAfterPointerUp=!1,this.inactive())}),this.editor=e,this.editor.hostEventManager.on("spaceToggle",this.handleSpaceToggle),this.editor.mouseEventManager.on("wheelBtnToggle",this.handleWheelBtnToggle)}isPressing(){return this._isPressing}isActive(){return this._active}active(e){if(this._active){console.warn("CanvasDragger already active");return}if(this.eventEmitter.emit("activeChange",!0),this._active=!0,this.editor.setCursor("grab"),this.bindEventWhenActive(),e){this.editor.setCursor("grabbing");const r=this.editor.getCursorXY(e);this.onStart({pos:this.editor.viewportCoordsToScene(r.x,r.y),vwPos:r,nativeEvent:e})}}inactive(){if(this._isPressing)this.inactiveAfterPointerUp=!0;else{if(!this._active)return;this.eventEmitter.emit("activeChange",!1),this._active=!1,this.unbindEventWhenInactive(),this.editor.toolManager.setCursorWhenActive()}}enableDragBySpace(){this.isEnableDragCanvasBySpace=!0}disableDragBySpace(){this.isEnableDragCanvasBySpace=!1}bindEventWhenActive(){this.editor.mouseEventManager.on("start",this.onStart),this.editor.mouseEventManager.on("drag",this.onDrag),this.editor.mouseEventManager.on("end",this.onEnd)}unbindEventWhenInactive(){this.editor.mouseEventManager.off("start",this.onStart),this.editor.mouseEventManager.off("drag",this.onDrag),this.editor.mouseEventManager.off("end",this.onEnd)}destroy(){this.editor.hostEventManager.off("spaceToggle",this.handleSpaceToggle),this.editor.mouseEventManager.off("wheelBtnToggle",this.handleWheelBtnToggle),this.unbindEventWhenInactive()}on(e,r){this.eventEmitter.on(e,r)}off(e,r){this.eventEmitter.off(e,r)}};const Dv="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Vi(t,e,r){const n=r[0];if(e!=null&&t>=e)throw new Error(t+" >= "+e);if(t.slice(-1)===n||e&&e.slice(-1)===n)throw new Error("trailing zero");if(e){let a=0;for(;(t[a]||n)===e[a];)a++;if(a>0)return e.slice(0,a)+Vi(t.slice(a),e.slice(a),r)}const o=t?r.indexOf(t[0]):0,i=e!=null?r.indexOf(e[0]):r.length;if(i-o>1){const a=Math.round(.5*(o+i));return r[a]}else return e&&e.length>1?e.slice(0,1):r[o]+Vi(t.slice(1),null,r)}function Bv(t){if(t.length!==Nv(t[0]))throw new Error("invalid integer part of order key: "+t)}function Nv(t){if(t>="a"&&t<="z")return t.charCodeAt(0)-97+2;if(t>="A"&&t<="Z")return 90-t.charCodeAt(0)+2;throw new Error("invalid order key head: "+t)}function Ns(t){const e=Nv(t[0]);if(e>t.length)throw new Error("invalid order key: "+t);return t.slice(0,e)}function ym(t,e){if(t==="A"+e[0].repeat(26))throw new Error("invalid order key: "+t);const r=Ns(t);if(t.slice(r.length).slice(-1)===e[0])throw new Error("invalid order key: "+t)}function vm(t,e){Bv(t);const[r,...n]=t.split("");let o=!0;for(let i=n.length-1;o&&i>=0;i--){const a=e.indexOf(n[i])+1;a===e.length?n[i]=e[0]:(n[i]=e[a],o=!1)}if(o){if(r==="Z")return"a"+e[0];if(r==="z")return null;const i=String.fromCharCode(r.charCodeAt(0)+1);return i>"a"?n.push(e[0]):n.pop(),i+n.join("")}else return r+n.join("")}function aT(t,e){Bv(t);const[r,...n]=t.split("");let o=!0;for(let i=n.length-1;o&&i>=0;i--){const a=e.indexOf(n[i])-1;a===-1?n[i]=e.slice(-1):(n[i]=e[a],o=!1)}if(o){if(r==="a")return"Z"+e.slice(-1);if(r==="A")return null;const i=String.fromCharCode(r.charCodeAt(0)-1);return i<"Z"?n.push(e.slice(-1)):n.pop(),i+n.join("")}else return r+n.join("")}function mo(t,e,r=Dv){if(t!=null&&ym(t,r),e!=null&&ym(e,r),t!=null&&e!=null&&t>=e)throw new Error(t+" >= "+e);if(t==null){if(e==null)return"a"+r[0];const c=Ns(e),h=e.slice(c.length);if(c==="A"+r[0].repeat(26))return c+Vi("",h,r);if(c<e)return c;const f=aT(c,r);if(f==null)throw new Error("cannot decrement any more");return f}if(e==null){const c=Ns(t),h=t.slice(c.length);return vm(c,r)??c+Vi(h,null,r)}const n=Ns(t),o=t.slice(n.length),i=Ns(e),a=e.slice(i.length);if(n===i)return n+Vi(o,a,r);const l=vm(n,r);if(l==null)throw new Error("cannot increment any more");return l<e?l:n+Vi(o,null,r)}function _i(t,e,r,n=Dv){if(r===0)return[];if(r===1)return[mo(t,e,n)];if(e==null){let a=mo(t,e,n);const l=[a];for(let c=0;c<r-1;c++)a=mo(a,e,n),l.push(a);return l}if(t==null){let a=mo(t,e,n);const l=[a];for(let c=0;c<r-1;c++)a=mo(t,a,n),l.push(a);return l.reverse(),l}const o=Math.floor(r/2),i=mo(t,e,n);return[..._i(t,i,o,n),i,..._i(i,e,r-o-1,n)]}const wm=Math.PI*2,ho=Math.PI/2;var ut=(t=>(t.Solid="Solid",t.Image="Image",t))(ut||{});const Hv=(()=>{const t=document.createElement("canvas");t.width=4,t.height=4;const e=t.getContext("2d");for(let r=0;r<t.width;r++)for(let n=0;n<t.height;n++){const o=(r+n)%2===0?"black":"white";e.fillStyle=o,e.fillRect(r,n,1,1)}return t})();Hv.toDataURL();var mt=(t=>(t.Graph="Graph",t.Rect="Rect",t.Ellipse="Ellipse",t.Text="Text",t.Line="Line",t.Path="Path",t.RegularPolygon="RegularPolygon",t.Star="Star",t.Frame="Frame",t.Canvas="Canvas",t.Document="Document",t))(mt||{}),xo=(t=>(t.Front="Front",t.Back="Back",t.Forward="Forward",t.Backward="Backward",t))(xo||{});const xm=(t,e,r,n)=>{const o=[e-n/2,r-n/2],i=[e+n/2,r-n/2],a=[e-n/2,r+n/2],l=[e+n/2,r+n/2];au(t,o[0],o[1],l[0],l[1]),au(t,i[0],i[1],a[0],a[1])},au=(t,e,r,n,o)=>{t.beginPath(),t.moveTo(e,r),t.lineTo(n,o),t.closePath(),t.stroke()},Sm=(t,e,r,n)=>{t.translate(r,n),t.rotate(e),t.translate(-r,-n)},lT=(t,e,r,n,o,i)=>{t.beginPath(),t.moveTo(e+i,r),t.lineTo(e+n-i,r),t.arcTo(e+n,r,e+n,r+i,i),t.lineTo(e+n,r+o-i),t.arcTo(e+n,r+o,e+n-i,r+o,i),t.lineTo(e+i,r+o),t.arcTo(e,r+o,e,r+o-i,i),t.lineTo(e,r+i),t.arcTo(e,r,e+i,r,i),t.closePath()},Em=t=>({...t,midX:t.minX/2+t.maxX/2,midY:t.minY/2+t.maxY/2}),uT=t=>({x:t.minX/2+t.maxX/2,y:t.minY/2+t.maxY/2}),Cm=t=>{const e=new Map;for(const r of t){const{x:n,y:o}=r;e.has(n)||e.set(n,[]),e.get(n).push(o)}return e},_m=t=>{const e=new Map;for(const r of t){const{x:n,y:o}=r;e.has(o)||e.set(o,[]),e.get(o).push(n)}return e},cT=t=>{const e=Ei({x:0,y:-1},{x:t.width,y:t.height}),{width:r,height:n}=t,o=e%ho;if(o<Math.PI/8||o>Math.PI*3/8)Math.abs(r)>Math.abs(n)?t.height=0:t.width=0;else{const i=Math.min(Math.abs(r),Math.abs(n)),a=Math.max(Math.abs(r),Math.abs(n)),l=i+(a-i)/2;t.height=(Math.sign(n)||1)*l,t.width=(Math.sign(r)||1)*l}return t},Yo=t=>t.reduce((e,r)=>{const n=new Set;for(const o of r.getFrameParentIds()){if(e.has(o))break;n.add(o)}return n.size===0?e:(e.forEach(o=>{n.add(o)}),n)},new Set),nc=(t,e=!1)=>{const r=new Set;for(const n of t){if(r.has(n))return r;e&&r.add(n),nc(n.getChildren(),!0).forEach(o=>{r.add(o)})}return r},Sa=(t,e,r,n)=>{for(const o of e){const i=t.doc.getGraphicsById(o);i&&lu(i)&&!i.isEmpty()&&i.updateSizeByChildren(r,n)}},hT=t=>{let e;const r=function(...n){e===void 0&&(e=requestAnimationFrame(()=>{e=void 0,t(n)}))};return r.cancel=()=>{e!==void 0&&cancelAnimationFrame(e),e=void 0},r};class te{constructor(e,r){E(this,"type",mt.Graph),E(this,"attrs"),E(this,"doc"),E(this,"_cacheBboxWithStroke",null),E(this,"_cacheBbox",null),E(this,"_cacheMinBbox",null),E(this,"noRender",!1),E(this,"_deleted",!1),E(this,"_sortDirty",!1),E(this,"noCollectUpdate"),E(this,"updatedKeys",new Set),E(this,"children",[]),E(this,"isContainer",!1);var n,o;this.doc=r.doc;const i=e.transform??wd(),a=r.advancedAttrs;a&&!e.transform&&(a.x!==void 0&&(i[4]=a.x),a.y!==void 0&&(i[5]=a.y)),this.attrs={...e},(n=this.attrs).id??(n.id=ya()),this.attrs.transform=i,(o=this.attrs).strokeWidth??(o.strokeWidth=1),this.attrs.objectName?em.setMaxIdx(e.objectName):this.attrs.objectName=em.gen(this.attrs.type??""),this.noCollectUpdate=!!(r!=null&&r.noCollectUpdate)}getAttrs(){return tt(this.attrs)}shouldUpdateBbox(e){return e.x!==void 0||e.y!==void 0||e.width!==void 0||e.height!==void 0||e.transform!==void 0||"strokeWidth"in e||"parentIndex"in e}clearBboxCache(){this._cacheBbox=null,this._cacheBboxWithStroke=null,this._cacheMinBbox=null}getUpdatedAttrs(){const e=g5(this.attrs,[...this.updatedKeys]);return this.updatedKeys.clear(),e}updateAttrs(e,r){if(this.shouldUpdateBbox(e)&&this.clearBboxCache(),"strokeWidth"in e&&e.strokeWidth===void 0&&(e.strokeWidth=1),!e.transform&&(e.x!==void 0||e.y!==void 0)){const n=tt(this.attrs.transform);e.x&&(n[4]=e.x),e.y&&(n[5]=e.y),this.attrs.transform=n,this.updatedKeys.add("transform")}e.rotate!==void 0&&this.setRotate(e.rotate),e=Nk(e,"x","y","rotate");for(const n in e)this.updatedKeys.add(n),this.attrs[n]=e[n];(!this.noCollectUpdate||this.attrs.parentIndex)&&this.doc.collectUpdatedGraphics(this.attrs.id)}cancelCollectUpdate(){this.noCollectUpdate=!0}getStrokeWidth(){return this.attrs.strokeWidth??0}getBboxWithStroke(){if(this._cacheBboxWithStroke)return this._cacheBboxWithStroke;const e=Zs({...this.getSize(),transform:this.getWorldTransform()},this.getStrokeWidth()/2);return this._cacheBboxWithStroke=e,e}getBbox(){return Zs({...this.getSize(),transform:this.getWorldTransform()})}getLocalBbox(){if(this._cacheBbox)return this._cacheBbox;const e=Zs({...this.getSize(),transform:this.attrs.transform});return this._cacheBbox=e,e}getMinBbox(){return this.getBbox()}getWorldBboxVerts(){const e={x:0,y:0,width:this.attrs.width,height:this.attrs.height};return Ci(e,this.getWorldTransform())}getLocalPosition(){return{x:this.attrs.transform[4],y:this.attrs.transform[5]}}getWorldPosition(){const e=this.getWorldTransform();return{x:e[4],y:e[5]}}getX(){return this.attrs.transform[4]}getY(){return this.attrs.transform[5]}getSize(){return{width:this.attrs.width,height:this.attrs.height}}getRect(){return{...this.getLocalPosition(),width:this.attrs.width,height:this.attrs.height}}getTransformedSize(){return Lv(this.attrs)}getLocalCenter(){return new ot(...this.attrs.transform).apply({x:this.attrs.width/2,y:this.attrs.height/2})}getWorldCenter(){return new ot(...this.getWorldTransform()).apply({x:this.attrs.width/2,y:this.attrs.height/2})}hitTest(e,r,n=0){return Av({x:e,y:r},{...this.getSize(),transform:this.getWorldTransform()},n+this.getStrokeWidth()/2)}hitTestChildren(e,r,n=0){if(!this.isContainer)return this.hitTest(e,r,n);if(!this.hitTest(e,r,n))return!1;const o=this.getChildren();for(let i=o.length-1;i>=0;i--)if(o[i].hitTest(e,r,n))return!0;return!1}intersectWithChildrenBox(e){if(!this.isContainer)return this.intersectWithBox(e);if(!this.intersectWithBox(e))return!1;const r=this.getChildren();for(const n of r)if(n.isVisible()&&n.intersectWithBox(e))return!0;return!1}intersectWithBox(e){let r=!1;if(!Rv(e,this.getMinBbox()))r=!1;else{const n=this.getRotate();if(!n||n%ho==0)r=!0;else{const[o,i,a,l]=Ci(ji(e),so(this.getWorldTransform())),c=Math.min(o.x,i.x,a.x,l.x),h=Math.min(o.y,i.y,a.y,l.y),f=Math.max(o.x,i.x,a.x,l.x),p=Math.max(o.y,i.y,a.y,l.y),g={x:c,y:h,width:f-c,height:p-h};r=W5(g,{x:0,y:0,...this.getSize()})}}return r}containWithBox(e){const r=this.getMinBbox();return gm(e,r)||gm(r,e)}calcNewAttrsByControlHandle(e,r,n,o,i=!1,a=!1,l){const c=this.getParentWorldTransform();n={width:n.width,height:n.height,transform:o};const h=this.attrs.height===0?Ov(e,r,n,{keepPolarSnap:i,scaleFromCenter:a}):su(e,r,n,{keepRatio:i,scaleFromCenter:a,flip:l});return h.transform=Ar(so(c),h.transform),h}updateByControlHandle(e,r,n,o,i=!1,a=!1,l){const c=this.calcNewAttrsByControlHandle(e,r,n,o,i,a,l);this.updateAttrs(c,{finishRecomputed:!0})}draw(e,r,n){if(this.isVisible()){e.save(),e.transform(...this.attrs.transform);for(const o of this.children)o.draw(e,r,n);e.restore()}}drawOutline(e,r,n){const{width:o,height:i}=this.attrs;e.transform(...this.getWorldTransform()),e.strokeStyle=r,e.lineWidth=n,e.beginPath(),e.rect(0,0,o,i),e.stroke(),e.closePath()}fillImage(e,r,n,o=!0,i=0){const a=r.attrs.src,l=this.attrs.width,c=this.attrs.height,h=0,f=0;let p;if(e.imageSmoothingEnabled=o,a?(n.addImg(a),p=n.getImg(a)):(e.imageSmoothingEnabled=!1,p=Hv),!p)return;const g=Q_(p.width,p.height,l,c),w=p.width/2-l/g/2,C=p.height/2-c/g/2;i&&(e.save(),lT(e,h,f,l,c,i),e.clip()),e.drawImage(p,w,C,l/g,c/g,h,f,l,c),i&&e.restore()}static dMove(e,r,n){for(const o of e){const i=o.getWorldTransform();i[4]+=r,i[5]+=n,o.setWorldTransform(i)}}toJSON(){return{...this.attrs}}isVisible(){return this.attrs.visible??!0}isLock(){return this.attrs.lock??!1}isDeleted(){return this._deleted}setDeleted(e){this._deleted=e,this.doc.collectDeletedGraphics(this)}toObject(){return{type:this.type,id:this.attrs.id,name:this.attrs.objectName,visible:this.isVisible(),lock:this.isLock(),children:this.children.map(e=>e.toObject())}}getControlHandles(e,r){return[]}getRotate(){return hs(this.getWorldTransform())}getRotateDegree(){return wa($v(this.getRotate()))}setRotate(e,r){const n=this.getRotate(),o=e-n;r??(r=this.getWorldCenter());const i=new ot().translate(-r.x,-r.y).rotate(o).translate(r.x,r.y);this.prependWorldTransform(i.getArray())}prependWorldTransform(e){const r=this.getParentWorldTransform(),n=Ar(e,Ar(r,this.attrs.transform));this.updateAttrs(El({...this.getSize(),transform:Ar(so(r),n)}))}dRotate(e,r,n){const o=new ot().translate(-n.x,-n.y).rotate(e).translate(n.x,n.y).append(new ot(...r)).getArray();this.setWorldTransform(o)}getInfoPanelAttrs(){const e=this.getTransformedSize(),r=this.getWorldPosition();return[{label:"X",key:"x",value:r.x,uiType:"number"},{label:"Y",key:"y",value:r.y,uiType:"number"},{label:"W",key:"width",value:e.width,uiType:"number"},{label:"H",key:"height",value:e.height,uiType:"number"},{label:"R",key:"rotation",value:this.getRotateDegree(),suffixValue:"°",uiType:"number"}]}toSVGSegment(e){const r=this.getSVGTagHead(e);if(!r)return console.warn(`please implement getSVGTagHead method of "${this.type}" type`),"";const n=[],{fillPaints:o,strokePaints:i}=this.getFillAndStrokesToSVG();if(o.length<=1&&i.length<=1){const f=o[0];if(f){const g={};if(f.type===ut.Solid){g.fill="#"+nl(f.attrs);const w=f.attrs.a;w!==1&&(g["fill-opacity"]=w)}n.push(g)}const p=i[0];if(p){const g={};if(p.type===ut.Solid){g.stroke="#"+nl(p.attrs);const w=p.attrs.a;w!==1&&(g["stroke-opacity"]=w)}n.push(g)}}else{for(const f of o)if(f&&f.type===ut.Solid){const p={fill:"#"+nl(f.attrs)},g=f.attrs.a;g!==1&&(p["fill-opacity"]=g),n.push(p)}for(const f of i)if(f&&f.type===ut.Solid){const p={stroke:"#"+nl(f.attrs)},g=f.attrs.a;g!==1&&(p["stroke-opacity"]=g),n.push(p)}}const a=this.attrs.strokeWidth??0,l=a>1?` stroke-width="${a}"`:"";let c="";const h=this.getSVGTagTail();for(const f of n){let p="",g;for(g in f)p+=` ${g}="${f[g]}"`;c+=r+p+l+h}return c}getSVGTagHead(e){return""}getSVGTagTail(){return`/>
`}getFillAndStrokesToSVG(){return{fillPaints:this.attrs.fill??[],strokePaints:this.attrs.stroke??[]}}getWorldTransform(){const e=this.getParent();return e?Ar(e.getWorldTransform(),this.attrs.transform):[...this.attrs.transform]}getChildren(){return this.isContainer?(this._sortDirty&&this.sortChildren(),[...this.children]):[]}getChildrenCount(){return this.children.length}setChildren(e){if(!this.isContainer)return;const r=_i(null,null,e.length);for(let n=0;n<e.length;n++)e[n].updateAttrs({parentIndex:{guid:this.attrs.id,position:r[n]}})}insertAtParent(e){const r=this.getParent();r&&r.insertChild(this,e)}insertChild(e,r){if(!this.isContainer){console.warn(`graphics "${this.type}" is not container`);return}if(this.children.some(o=>o.attrs.id===e.attrs.id)){r&&this.sortChildren();return}if(!r){const o=this.getMaxChildIndex();r=mo(o,null)}e.removeFromParent();const n={guid:this.attrs.id,position:r};Aa(e.attrs.parentIndex,n)||e.updateAttrs({parentIndex:n}),this.children.push(e),r&&this.sortChildren()}removeChild(e){this.children=this.children.filter(r=>r.attrs.id!==e.attrs.id)}markSortDirty(){this._sortDirty=!0}sortChildren(){te.sortGraphicsArray(this.children)}static sortGraphicsArray(e){return e.sort((r,n)=>{var o,i;return(((o=r.attrs.parentIndex)==null?void 0:o.position)??"")<(((i=n.attrs.parentIndex)==null?void 0:i.position)??"")?-1:1}),e}getParentId(){var e;return(e=this.attrs.parentIndex)==null?void 0:e.guid}getParent(){const e=this.getParentId();if(e)return this.doc.getGraphicsById(e)}getParentWorldTransform(){const e=this.getParent();return e?e.getWorldTransform():wd()}removeFromParent(){const e=this.getParent();e&&e.removeChild(this)}getMaxChildIndex(){if(this.children.length===0)return null;if(!this._sortDirty)return this.children.at(-1).getSortIndex()??null;let e=this.children[0].getSortIndex();for(let r=1;r<this.children.length;r++){const n=this.children[r].getSortIndex();n>e&&(e=n)}return e}getMinChildIndex(){if(this.children.length===0)return null;if(!this._sortDirty)return this.children.at(0).getSortIndex()??null;let e=this.children[0].getSortIndex();for(let r=1;r<this.children.length;r++){const n=this.children[r].getSortIndex();n<e&&(e=n)}return e}getSortIndex(){var e;return((e=this.attrs.parentIndex)==null?void 0:e.position)??""}getNextSibling(){const e=this.getParent();if(!e)return null;const r=e.getChildren(),n=r.findIndex(o=>o===this);return n==-1&&console.warn("index should not be -1!"),r[n+1]??null}getSortIndexPath(){const e=[];let r=this;for(;r;)e.push(r.getSortIndex()),r=r.getParent();return e.reverse(),e}static sortGraphics(e){const r=e.map(n=>({path:n.getSortIndexPath(),val:n}));return r.sort((n,o)=>{const i=Math.max(n.path.length,o.path.length);for(let a=0;a<i;a++){const l=n.path[a],c=o.path[a];if(l!==c)return l<c?-1:1}return n.path.length<o.path.length?-1:1}),r.map(n=>n.val)}containAncestor(e){let r=this;for(;r;){if(r.attrs.id===e)return!0;r=r.getParent()}return!1}getParentIds(){const e=[];let r=this.getParent();for(;r;)e.push(r.attrs.id),r=r.getParent();return e}getFrameParentIds(){const e=[];let r=this.getParent();for(;r&&r.type!==mt.Canvas;)e.push(r.attrs.id),r=r.getParent();return e}setWorldTransform(e){const r=this.getParentWorldTransform(),n=Ar(so(r),e);this.updateAttrs({transform:n})}getVisibleLeafNodeSet(){const e=new Set;return this.forEachVisibleLeafNode(r=>{e.add(r)}),e}forEachVisibleLeafNode(e){if(this.isVisible())if(this.isContainer)for(const r of this.children)r.forEachVisibleLeafNode(e);else e(this)}}class Ra extends te{constructor(e,r){super({...e,type:mt.Ellipse},r),E(this,"type",mt.Ellipse)}hitTest(e,r,n=0){const o=this.attrs,i=o.width/2,a=o.height/2,l=(o.strokeWidth||0)/2;n=n+l;const c=o.width/2+n,h=o.height/2+n,f=new ot(...this.getWorldTransform()).applyInverse({x:e,y:r});return(f.x-i)**2/c**2+(f.y-a)**2/h**2<=1}draw(e,r,n){if(!this.isVisible())return;const o=this.attrs,i=o.width/2,a=o.height/2;e.save(),e.transform(...o.transform),e.beginPath(),e.ellipse(i,a,o.width/2,o.height/2,0,0,wm);for(const l of o.fill??[])l.type===ut.Solid?(e.fillStyle=Jr(l.attrs),e.fill()):l.type===ut.Image&&(r?(e.clip(),this.fillImage(e,l,r,n)):console.warn("ImgManager is not provided"));if(o.strokeWidth){e.lineWidth=o.strokeWidth;for(const l of o.stroke??[])l.type===ut.Solid?(e.strokeStyle=Jr(l.attrs),e.stroke()):(l.type,ut.Image)}e.closePath(),e.restore()}drawOutline(e,r,n){const{width:o,height:i}=this.attrs,a=o/2,l=i/2;e.transform(...this.getWorldTransform()),e.strokeStyle=r,e.lineWidth=n,e.beginPath(),e.ellipse(a,l,o/2,i/2,0,0,wm),e.stroke(),e.closePath()}getSVGTagHead(e){const r=[...this.attrs.transform];e&&(r[4]+=e.x,r[5]+=e.y);const n=this.attrs.width/2,o=this.attrs.height/2;return this.attrs.width===this.attrs.height?`<circle cx="${n}" cy="${o}" r="${n}" transform="matrix(${r.join(" ")})"`:`<ellipse cx="${n}" cy="${o}" rx="${n}" ry="${o}" transform="matrix(${r.join(" ")})"`}}let Cs=class extends te{constructor(e,r){super({...e,type:mt.Frame},r),E(this,"type",mt.Frame),E(this,"isContainer",!0)}updateSizeByChildren(e,r){const n=ji(ei(this.children.filter(c=>c.isVisible()).map(c=>c.getLocalBbox())));if(n.x===0&&n.y===0&&n.width===this.attrs.width&&n.height===this.attrs.height)return;for(const c of this.children){const h=c.attrs.id;e.set(h,Object.assign({transform:[...c.attrs.transform]},e.get(h)??{}));const f=new ot(...c.attrs.transform).translate(-n.x,-n.y);c.updateAttrs({transform:f.getArray()});const p=Object.assign(r.get(h)??{},{transform:[...c.attrs.transform]});r.set(h,p)}const o=new ot().translate(n.x,n.y),i=new ot(...this.attrs.transform).append(o),a=this.attrs.id;e.has(a)||e.set(a,{width:this.attrs.width,height:this.attrs.height,transform:[...this.attrs.transform]});const l={width:n.width,height:n.height,transform:i.getArray()};this.updateAttrs(l),r.set(a,l)}isEmpty(){return this.children.length===0}};const lu=t=>t instanceof Cs&&t.attrs.resizeToFit,Sd=t=>t instanceof Cs;class np extends te{constructor(e,r){super({...e,height:0,type:mt.Line},r),E(this,"type",mt.Line)}draw(e){if(!this.isVisible())return;const{width:r,transform:n,stroke:o,strokeWidth:i}=this.attrs;if(e.save(),e.transform(...n),e.beginPath(),e.moveTo(0,0),e.lineTo(r,0),i){e.lineWidth=i;for(const a of o??[])switch(a.type){case ut.Solid:{e.strokeStyle=Jr(a.attrs),e.stroke();break}case ut.Image:}e.closePath(),e.restore()}}drawOutline(e,r,n){e.transform(...this.getWorldTransform()),e.beginPath(),e.moveTo(0,0),e.lineTo(this.attrs.width,0),e.lineWidth=n,e.strokeStyle=r,e.stroke(),e.closePath()}getSVGTagHead(e){const r=[...this.attrs.transform];e&&(r[4]+=e.x,r[5]+=e.y);const n=this.getTransformedSize();return`<line x1="0" y1="0" x2="${n.width}" y2="${n.height}" transform="matrix(${r.join(" ")})"`}getFillAndStrokesToSVG(){return{fillPaints:[],strokePaints:this.attrs.stroke??[]}}}class Je extends te{constructor(e,r){super({...e,type:mt.Path},r),E(this,"type",mt.Path),E(this,"geoPath",null)}static computeRect(e){return new xa(e).getBbox()}static recomputeAttrs(e,r){const n=Je.computeRect(e);for(const i of e)for(const a of i.segs)a.point={x:a.point.x-n.x,y:a.point.y-n.y};const o=new ot(...r).apply(n);return{x:o.x,y:o.y,width:n.width,height:n.height,pathData:e}}checkAndFixUpdatedAttrs(e){("width"in e||"height"in e)&&"pathData"in e&&(delete e.width,delete e.height,console.warn("width or height and pathData cannot coexist when updating attribute, removed width and height"))}clearBboxCache(){super.clearBboxCache(),this.geoPath=null}getGeoPath(){return this.geoPath||(this.geoPath=new xa(this.attrs.pathData)),this.geoPath}updateAttrs(e,r){if(r!=null&&r.finishRecomputed){super.updateAttrs(e);return}e=tt(e),this.checkAndFixUpdatedAttrs(e);const n=Object.keys(e);if(e.pathData){const o=e.transform??this.attrs.transform;this.attrs.pathData=e.pathData,e={...e,...Je.recomputeAttrs(e.pathData,o)}}if(n.includes("width")||n.includes("height")){const o=this.recomputedPathData(e.width??this.attrs.width,e.height??this.attrs.height);this.attrs.pathData=o}super.updateAttrs(e)}calcNewAttrsByControlHandle(e,r,n,o,i,a,l){const c=this.getParentWorldTransform();n={width:n.width,height:n.height,transform:o};const h=this.attrs.height===0?Ov(e,r,n,{keepPolarSnap:i,scaleFromCenter:a}):su(e,r,n,{keepRatio:i,scaleFromCenter:a,flip:l});h.transform=Ar(so(c),h.transform);const f=h,p=this.recomputedPathData(h.width,h.height);return{...f,pathData:p}}recomputedPathData(e,r){const n=e/(this.attrs.width||1),o=r/(this.attrs.height||1),i=tt(this.attrs.pathData);for(const a of i)for(const l of a.segs)l.point.x*=n,l.point.y*=o,l.in.x*=n,l.in.y*=o,l.out.x*=n,l.out.y*=o;return i}draw(e,r,n){this.isVisible()&&this._realDraw(e,r,n)}drawOutline(e,r,n){this._realDraw(e,void 0,void 0,{stroke:[{type:ut.Solid,attrs:Ce(r)}],strokeWidth:n,transform:this.getWorldTransform()})}_realDraw(e,r,n,o){const{pathData:i}=this.attrs,a=(o==null?void 0:o.transform)??this.attrs.transform,{fill:l,strokeWidth:c,stroke:h}=o||this.attrs;e.save(),e.transform(...a),e.beginPath();for(const f of i){const p=f.segs[0];if(!p)continue;e.moveTo(p.point.x,p.point.y);const g=f.segs;for(let w=1;w<=g.length;w++){if(w===g.length&&!f.closed)continue;const C=g[w%g.length],S=g[w-1],P=C.point.x,y=C.point.y,m=Je.getHandleOut(S),x=Je.getHandleIn(C),k=this.calculateSegmentLength(S.point,C.point,m,x);if(!m&&!x?e.lineTo(P,y):e.bezierCurveTo(m.x,m.y,x.x,x.y,P,y),this.drawSegmentLength(e,S.point,C.point,k),w>1){const M=g[w-2];this.drawAngleBetweenLines(e,M.point,S.point,C.point)}if(w===g.length&&f.closed){const M=g[g.length-1],b=g[0],T=g[1];this.drawAngleBetweenLines(e,M.point,b.point,T.point)}}f.closed&&e.closePath()}for(const f of l??[])switch(f.type){case ut.Solid:{e.fillStyle=Jr(f.attrs),e.fill();break}case ut.Image:r?(e.clip(),this.fillImage(e,f,r,n)):console.warn("ImgManager is not provided")}if(c){e.lineWidth=c;for(const f of h??[])switch(f.type){case ut.Solid:{e.strokeStyle=Jr(f.attrs),e.stroke();break}case ut.Image:}}e.closePath(),e.restore()}drawAngleBetweenLines(e,r,n,o){const i=this.calculateAngle(r,n,o);if(i!==null){const a=n.x,l=n.y;e.save(),e.font="12px Arial",e.fillStyle="blue",e.textAlign="center",e.textBaseline="middle",e.fillText(`${i.toFixed(1)}°`,a,l-15),e.restore()}}calculateAngle(e,r,n){const o={x:e.x-r.x,y:e.y-r.y},i={x:n.x-r.x,y:n.y-r.y},a=o.x*i.x+o.y*i.y,l=Math.sqrt(o.x*o.x+o.y*o.y),c=Math.sqrt(i.x*i.x+i.y*i.y);if(l===0||c===0)return null;const h=a/(l*c);return Math.acos(Math.max(-1,Math.min(1,h)))*(180/Math.PI)}calculateSegmentLength(e,r,n,o){if(!n||!o)return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2));{let i=0,a=e;for(let l=0;l<=1;l+=1/100){const c=this.getBezierPoint(e,n,o,r,l);i+=Math.sqrt(Math.pow(c.x-a.x,2)+Math.pow(c.y-a.y,2)),a=c}return i}}getBezierPoint(e,r,n,o,i){const a=Math.pow(1-i,3)*e.x+3*Math.pow(1-i,2)*i*r.x+3*(1-i)*Math.pow(i,2)*n.x+Math.pow(i,3)*o.x,l=Math.pow(1-i,3)*e.y+3*Math.pow(1-i,2)*i*r.y+3*(1-i)*Math.pow(i,2)*n.y+Math.pow(i,3)*o.y;return{x:a,y:l}}drawSegmentLength(e,r,n,o){const i=(r.x+n.x)/2,a=(r.y+n.y)/2;e.save(),e.font="12px Arial",e.fillStyle="black",e.textAlign="center",e.textBaseline="middle",e.fillText(`${o.toFixed(2)}px`,i,a),e.restore()}hitTest(e,r,n=0){var o;if(!super.hitTest(e,r,n))return!1;if((o=this.attrs.fill)!=null&&o.length)return!0;const i=new ot(...this.getWorldTransform()).applyInverse({x:e,y:r});return this.getGeoPath().hitTest(i,n+this.getStrokeWidth()/2)}toJSON(){return{...super.toJSON(),pathData:this.attrs.pathData}}static getHandleIn(e){return ou(e.point,e.in)}static getHandleOut(e){return ou(e.point,e.out)}static getSeg(e,r,n){const o=e[r];return o?o.segs[n]??null:null}getLastSeg(e,r){const n=this.getSegCount(e)-1;return this.getSeg(e,n,r)}getSeg(e,r,n){let o=Je.getSeg(this.attrs.pathData,e,r);if(o=tt(o),o&&n!=null&&n.applyTransform){const i=new ot(...this.getWorldTransform()),a=i.apply(o.point);o.point.x=a.x,o.point.y=a.y,i.tx=0,i.ty=0;const l=i.apply(o.in);o.in.x=l.x,o.in.y=l.y;const c=i.apply(o.out);o.out.x=c.x,o.out.y=c.y}return o}setSeg(e,r,n){const o=this.attrs.pathData,i={...o[e]},a=this.getSeg(e,r);if(!a)throw new Error(`can not find pathIdx ${e} segIdx ${r}`);n=tt(n);const l=this.getWorldTransform();if(n.point){const c=new ot(...l).invert().apply(n.point);n.point.x=c.x,n.point.y=c.y}if(n.in||n.out){const c=new ot(l[0],l[1],l[2],l[3],0,0).invert();if(n.in){const h=c.apply(n.in);n.in.x=h.x,n.in.y=h.y}if(n.out){const h=c.apply(n.out);n.out.x=h.x,n.out.y=h.y}}i.segs[r]={...a,...n},this.updateAttrs({pathData:o})}addSeg(e,r){const n=this.attrs.pathData,o=n[e];if(!o)throw new Error(`pathIdx ${e} is out of range`);const i=new ot(...this.getWorldTransform()).invert().apply(r.point);o.segs.push({point:i,in:r.in,out:r.out}),this.updateAttrs({pathData:n})}addEmptyPath(){const e=this.attrs.pathData;e.push({segs:[],closed:!1}),this.updateAttrs({pathData:e})}setPathItemClosed(e,r){const n=this.attrs.pathData,o=n[e];if(!o)throw new Error(`pathIdx ${e} is out of range`);o.closed=r,this.updateAttrs({pathData:n})}checkPathItemClosed(e){const r=this.attrs.pathData[e];if(!r)throw new Error(`pathIdx ${e} is out of range`);return r.closed}getPathItemCount(){return this.attrs.pathData.length}hasPath(e){return!!this.attrs.pathData[e]}getSegCount(e){const r=this.attrs.pathData[e];return r?r.segs.length:0}getSVGTagHead(e){const r=[...this.attrs.transform];e&&(r[4]+=e.x,r[5]+=e.y);let n="";for(const o of this.attrs.pathData){const i=o.segs[0];if(!i)continue;n+=`M${i.point.x} ${i.point.y}`;const a=o.segs;for(let l=1;l<=a.length;l++){if(l===a.length&&!o.closed)continue;const c=a[l%a.length],h=a[l-1],f=c.point.x,p=c.point.y,g=Je.getHandleOut(h),w=Je.getHandleIn(c);!g&&!w?n+=`L${f} ${p}`:n+=`C${g.x} ${g.y} ${w.x} ${w.y} ${f} ${p}`}o.closed&&(n+="Z")}return`<path d="${n}" transform="matrix(${r.join(" ")})"`}}class Se{constructor(e){E(this,"cx"),E(this,"cy"),E(this,"rotation"),E(this,"transform"),E(this,"type"),E(this,"graphics"),E(this,"padding"),E(this,"isTransformHandle"),E(this,"hitTest"),E(this,"getCursor"),this.cx=e.cx??0,this.cy=e.cy??0,e.rotation!==void 0&&(this.rotation=e.rotation),e.transform&&(this.transform=e.transform),this.type=e.type,this.padding=e.padding??0,this.graphics=e.graphics,this.getCursor=e.getCursor,e.hitTest&&(this.hitTest=e.hitTest),this.isTransformHandle=e.isTransformHandle??!1,this.graphics.cancelCollectUpdate()}}const Io=(t,e)=>{if(!e)return"default";if(e.height===0)return"move";if(t==="n"||t==="s"){const i=new ot().rotate(ho).prepend(new ot(...e.transform)).rotate(ho),a=hs([i.a,i.b,i.c,i.d,i.tx,i.ty]);return{type:"resize",degree:wa(a)}}const r=hs(e.transform),n=jv(e.transform);let o=0;switch(t){case"se":case"nw":o=-45;break;case"ne":case"sw":o=45;break;case"e":case"w":o=90;break;default:console.warn("unknown type",t)}return{type:"resize",degree:wa(r)+(n?-o:o)}},Hs=(t,e)=>{if(!e)return"default";const r=hs(e.transform),n=jv(e.transform);let o=0;return e.height===0?o={neRotation:90,seRotation:90,swRotation:270,nwRotation:270}[t]:o={neRotation:45,seRotation:135,swRotation:225,nwRotation:315}[t],{type:"rotation",degree:vd(wa(r)+(n?-o:o))}},dT=(t,e)=>{const r=()=>({width:t.size,height:t.size,fill:[{type:ut.Solid,attrs:Ce(t.fill)}],stroke:[{type:ut.Solid,attrs:Ce(t.stroke)}],strokeWidth:1}),n={doc:e,noCollectChange:!0},o=new Se({graphics:new $r({objectName:"nw",...r()},n),type:"nw",padding:3,getCursor:Io,isTransformHandle:!0}),i=new Se({graphics:new $r({objectName:"ne",...r()},n),type:"ne",padding:3,getCursor:Io,isTransformHandle:!0}),a=new Se({graphics:new $r({objectName:"se",...r()},n),type:"se",padding:3,getCursor:Io,isTransformHandle:!0}),l=new Se({graphics:new $r({objectName:"sw",...r()},n),type:"sw",padding:3,getCursor:Io,isTransformHandle:!0}),c=t.size*2.5,h=new Se({graphics:new $r({objectName:"nwRotation",...r(),width:c,height:c,visible:!1},n),type:"nwRotation",getCursor:Hs,isTransformHandle:!0}),f=new Se({graphics:new $r({objectName:"neRotation",...r(),width:c,height:c,visible:!1},n),type:"neRotation",getCursor:Hs,isTransformHandle:!0}),p=new Se({graphics:new $r({objectName:"seRotation",...r(),width:c,height:c,visible:!1},n),type:"seRotation",getCursor:Hs,isTransformHandle:!0}),g=new Se({graphics:new $r({objectName:"swRotation",...r(),width:c,height:c,visible:!1},n),type:"swRotation",getCursor:Hs,isTransformHandle:!0}),w=function(m,x,k,M){return!M||M.width===0||M.height===0?!1:this.graphics.hitTest(m,x,k)},C=new Se({graphics:new $r({objectName:"n",...r(),visible:!1},n),type:"n",hitTest:w,getCursor:Io,isTransformHandle:!0}),S=new Se({graphics:new $r({objectName:"e",...r(),visible:!1},n),type:"e",hitTest:w,getCursor:Io,isTransformHandle:!0}),P=new Se({graphics:new $r({objectName:"s",...r(),visible:!1},n),type:"s",hitTest:w,getCursor:Io,isTransformHandle:!0}),y=new Se({graphics:new $r({objectName:"w",...r(),visible:!1},n),type:"w",hitTest:w,getCursor:Io,isTransformHandle:!0});return new Map([["n",C],["e",S],["s",P],["w",y],["nwRotation",h],["neRotation",f],["seRotation",p],["swRotation",g],["nw",o],["ne",i],["se",a],["sw",l]])},zv=["n","e","s","w","nwRotation","neRotation","seRotation","swRotation","nw","ne","se","sw"];let fT=class{constructor(e){E(this,"transformHandles"),E(this,"customHandlesVisible",!1),E(this,"customHandles",[]),E(this,"selectedBoxRect",null),E(this,"enableTransformControl",!0),E(this,"onHoverItemChange",()=>{if(!this.editor.pathEditor.isActive()){const n=this.editor.selectedElements.getHoverItem(),o=this.editor.selectedElements.size()===1,i=o?this.editor.selectedElements.getItems()[0]:null,a=this.editor.selectedBox.isHover();if(o&&i&&(n===i||a)){const l=this.editor.zoomManager.getZoom();this.setCustomHandles(i.getControlHandles(l,!0))}else this.setCustomHandles([])}this.editor.render()}),this.editor=e;const r=e.setting;this.transformHandles=dT({size:r.get("handleSize"),fill:r.get("handleFill"),stroke:r.get("handleStroke"),strokeWidth:r.get("handleStrokeWidth")},e.doc)}bindEvents(){this.editor.selectedElements.on("hoverItemChange",this.onHoverItemChange),this.editor.selectedBox.on("hoverChange",this.onHoverItemChange),this.editor.zoomManager.on("zoomChange",this.onHoverItemChange),this.editor.commandManager.on("change",this.onHoverItemChange)}unbindEvents(){this.editor.selectedElements.off("hoverItemChange",this.onHoverItemChange),this.editor.selectedBox.off("hoverChange",this.onHoverItemChange),this.editor.zoomManager.off("zoomChange",this.onHoverItemChange),this.editor.commandManager.off("change",this.onHoverItemChange)}updateTransformHandles(e){const r=this.editor.zoomManager.getZoom(),n=this.editor.setting.get("handleSize"),o=this.editor.setting.get("handleStrokeWidth"),i=this.editor.setting.get("neswHandleWidth"),a={x:0,y:0,width:e.width,height:e.height},l=(()=>{const C=Ci(a,e.transform),S=n/2/r,P=Ci(pm(a,S),e.transform),y=40,m=new Array(4).fill(0);e.width*r<y&&(m[1]=m[3]=i/2/r),e.height*r<y&&(m[0]=m[2]=i/2/r);const x=pm(a,m),k=new ot(...e.transform),M=G5(x).map(b=>{const{x:T,y:I}=k.apply(b);return{x:T,y:I}});return{nw:C[0],ne:C[1],se:C[2],sw:C[3],n:M[0],e:M[1],s:M[2],w:M[3],nwRotation:P[0],neRotation:P[1],seRotation:P[2],swRotation:P[3]}})();for(const C of zv){const S=l[C],P=this.transformHandles.get(C);if(!P){console.warn(`handle ${C} not found`);continue}P.cx=S.x,P.cy=S.y}const c=this.transformHandles.get("n"),h=this.transformHandles.get("s"),f=this.transformHandles.get("w"),p=this.transformHandles.get("e");c.graphics.attrs.width=h.graphics.attrs.width=e.width*r-n-o,f.graphics.attrs.height=p.graphics.attrs.height=e.height*r-n-o,c.graphics.attrs.height=h.graphics.attrs.height=f.graphics.attrs.width=p.graphics.attrs.width=i;const g=new ot().rotate(ho).prepend(new ot(...e.transform)).rotate(ho),w=hs([g.a,g.b,g.c,g.d,g.tx,g.ty]);c.rotation=w,h.rotation=w}draw(e){this.selectedBoxRect=e,e&&this.updateTransformHandles(e);const r=[];this.shouldRenderTransformControl()&&r.push(...Array.from(this.transformHandles.values())),this.customHandlesVisible&&r.push(...this.customHandles);const n=this.editor.ctx,o=e?hs(e.transform):0;r.forEach(i=>{const a=i.graphics;if(a.type!==mt.Path){const{x:l,y:c}=this.editor.sceneCoordsToViewport(i.cx,i.cy);a.updateAttrs({transform:[1,0,0,1,l-a.attrs.width/2,c-a.attrs.height/2]})}e&&i.isTransformHandle&&a.setRotate(o),i.rotation!==void 0&&a.setRotate(i.rotation),a.isVisible()&&(n.save(),a.draw(n),n.restore())})}getHandleInfoByPoint(e){const r=[];if(this.shouldRenderTransformControl()&&r.push(...Array.from(this.transformHandles.values())),this.customHandlesVisible&&r.push(...this.customHandles),r.length===0)return null;const n=this.editor.sceneCoordsToViewport(e.x,e.y),o=this.editor.selectedBox.getBox();for(let i=r.length-1;i>=0;i--){const a=r[i],l=a.type;if(!a){console.warn(`handle ${l} not found`);continue}if(a.hitTest?a.hitTest(n.x,n.y,a.padding,o):a.graphics.hitTest(n.x,n.y,a.padding))return{handleName:l,cursor:a.getCursor(l,o)}}return null}shouldRenderTransformControl(){return this.selectedBoxRect&&this.enableTransformControl}setCustomHandles(e){this.customHandles=e}getCustomHandlesIntersectedWithRect(e){const r=this.editor.sceneCoordsToViewport(e.x,e.y),n=this.editor.sceneCoordsToViewport(e.x+e.width,e.y+e.height),o={minX:r.x,minY:r.y,maxX:n.x,maxY:n.y};return this.customHandles.filter(i=>i.graphics.intersectWithBox(o))}clearCustomHandles(){this.customHandles=[]}hasCustomHandles(){return this.customHandles.length>0}showCustomHandles(){this.customHandlesVisible||(this.customHandlesVisible=!0,this.editor.render())}hideCustomHandles(){this.customHandlesVisible&&(this.customHandlesVisible=!1,this.editor.render())}};const bm=t=>zv.includes(t);class $r extends te{constructor(e,r){super({...e,type:mt.Rect},r),E(this,"type",mt.Rect)}getAttrs(){return tt({...this.attrs,cornerRadius:this.attrs.cornerRadius??0})}toJSON(){return{...super.toJSON(),cornerRadius:this.attrs.cornerRadius}}getMaxCornerRadius(){return Math.min(this.attrs.width,this.attrs.height)/2}_realDraw(e,r,n,o){const i=this.attrs,{fill:a,strokeWidth:l,stroke:c,transform:h}=o||this.attrs;e.save(),e.transform(...h),e.beginPath(),i.cornerRadius?e.roundRect(0,0,i.width,i.height,i.cornerRadius):e.rect(0,0,i.width,i.height);for(const f of a??[])switch(f.type){case ut.Solid:{e.fillStyle=Jr(f.attrs),e.fill();break}case ut.Image:if(r){const p=this.getMaxCornerRadius(),g=Math.min(i.cornerRadius??0,p);this.fillImage(e,f,r,n,g)}else console.warn("ImgManager is not provided")}if(l){e.lineWidth=l;for(const f of c??[])switch(f.type){case ut.Solid:{e.strokeStyle=Jr(f.attrs),e.stroke();break}case ut.Image:}}e.closePath(),e.restore()}draw(e,r,n){this.isVisible()&&this._realDraw(e,r,n)}drawOutline(e,r,n){this._realDraw(e,void 0,void 0,{stroke:[{type:ut.Solid,attrs:Ce(r)}],strokeWidth:n,transform:this.getWorldTransform()})}getRect(){return{...this.getLocalPosition(),width:this.attrs.width,height:this.attrs.height}}createCornerRadiusHandleGraph(){return new Ra({objectName:"cornerRadius",width:8,height:8,fill:[{type:ut.Solid,attrs:Ce("#fff")}],stroke:[{type:ut.Solid,attrs:Ce("#1592fe")}],strokeWidth:1},{doc:this.doc})}hitTest(e,r,n=0){const o=new ot(...this.getWorldTransform()).applyInverse({x:e,y:r}),i=this.getMaxCornerRadius();return F5(o,{x:0,y:0,width:this.attrs.width,height:this.attrs.height},new Array(4).fill(Math.min(this.attrs.cornerRadius??0,i)),n+(this.attrs.strokeWidth??0)/2)}getControlHandles(e,r){let n=0;r&&(n=14/e);const o=108,i=this.attrs;if(i.width*e<o||i.height*e<o)return[];const a=Math.min(i.width,i.height)/2,l=i.cornerRadius??0,c=[l,l,l,l],h=[],f={x:0,y:0,width:i.width,height:i.height},p=[{type:"nwCornerRadius",origin:{x:f.x,y:f.y},direction:{x:1,y:1},cornerRadius:c[0]},{type:"neCornerRadius",origin:{x:f.x+f.width,y:f.y},direction:{x:-1,y:1},cornerRadius:c[1]},{type:"seCornerRadius",origin:{x:f.x+f.width,y:f.y+f.height},direction:{x:-1,y:-1},cornerRadius:c[2]},{type:"swCornerRadius",origin:{x:f.x,y:f.y+f.height},direction:{x:1,y:-1},cornerRadius:c[3]}];for(let g=0;g<p.length;g++){const w=p[g];let C=w.cornerRadius;C<n?C=n:C>a&&(C=a);let S=w.origin.x+w.direction.x*C,P=w.origin.y+w.direction.y*C;const y=new ot(...this.getWorldTransform()).apply({x:S,y:P});S=y.x,P=y.y;const m=new Se({cx:S,cy:P,type:w.type,graphics:this.createCornerRadiusHandleGraph(),getCursor:()=>"default"});h.push(m)}return h}calcNewAttrsByControlHandle(e,r,n,o,i,a,l){const c={};if(e.endsWith("CornerRadius")){const h=this.attrs,f=new ot(...o).applyInverse(r);let p={x:0,y:0},g={x:0,y:0};const w={x:0,y:0,width:h.width,height:h.height};switch(e){case"nwCornerRadius":{p={x:1,y:1},g={x:f.x-w.x,y:f.y-w.y};break}case"neCornerRadius":{p={x:-1,y:1},g={x:f.x-(w.x+w.width),y:f.y-w.y};break}case"seCornerRadius":{p={x:-1,y:-1},g={x:f.x-(w.x+w.width),y:f.y-(w.y+w.height)};break}case"swCornerRadius":{p={x:1,y:-1},g={x:f.x-w.x,y:f.y-(w.y+w.height)};break}}const C=(p.x*g.x+p.y*g.y)/Math.sqrt(p.x*p.x+p.y*p.y);c.cornerRadius=Math.min(this.getMaxCornerRadius(),Math.round(Math.max(C,0)*Math.cos(Math.PI/4)))}else Object.assign(c,super.calcNewAttrsByControlHandle(e,r,n,o,i,a,l));return c}getInfoPanelAttrs(){return[...super.getInfoPanelAttrs(),{label:"C",key:"cornerRadius",value:this.attrs.cornerRadius??0,uiType:"number"}]}getSVGTagHead(e){const r=[...this.attrs.transform];e&&(r[4]+=e.x,r[5]+=e.y);const n=this.attrs.cornerRadius??0,o=n>1?` rx="${n}"`:"";return`<rect width="${this.attrs.width}" height="${this.attrs.height}" transform="matrix(${r.join(" ")})"${o}`}}const pT=80,gT=30,km=document.createElement("canvas").getContext("2d");let oc=class extends te{constructor(e,r){if(super({...e,type:mt.Text,width:e.width??pT,height:e.height??gT},r),E(this,"type",mt.Text),e.autoFit){km.font=`${e.fontSize}px sans-serif`;const{width:n}=km.measureText(e.content);this.attrs.width=n,this.attrs.height=e.fontSize}}updateAttrs(e){super.updateAttrs(e)}draw(e){if(!this.isVisible())return;const{transform:r,fill:n,stroke:o,fontSize:i,content:a}=this.attrs;e.save(),e.transform(...r),e.beginPath(),e.textBaseline="top",e.font=`${i}px sans-serif`;for(const l of n??[])switch(l.type){case ut.Solid:{e.fillStyle=Jr(l.attrs);break}case ut.Image:}e.fillText(a,0,0),e.restore()}getSVGTagHead(e){const r=[...this.attrs.transform];return r[5]+=this.attrs.fontSize,e&&(r[4]+=e.x,r[5]+=e.y),`<text x="0" y="0" transform="matrix(${r.join(" ")})"`}getSVGTagTail(){return`>${J_(this.attrs.content)}</text>`}};class ds extends te{constructor(e,r){super({...e,type:mt.Canvas},r),E(this,"type",mt.Canvas),E(this,"isContainer",!0)}getWorldTransform(){return wd()}}const mT=t=>t instanceof ds,yT=t=>{const e=ei(t.map(l=>l.getBboxWithStroke())),r=ji(e),n={x:-e.minX,y:-e.minY},o=`<svg width="${r.width}" height="${r.height}" viewBox="0 0 ${r.width} ${r.height}" fill="none" xmlns="http://www.w3.org/2000/svg">
`,i="</svg>";let a="";for(const l of t)a+=l.toSVGSegment(n);return o+a+i};let Xe=class{constructor(e){E(this,"originAttrsMap",new Map),E(this,"updatedAttrsMap",new Map),E(this,"removedIds",new Set),E(this,"newIds",new Set),E(this,"isCommitDone",!1),this.editor=e}recordOld(e,r){return this.originAttrsMap.set(e,r),this}update(e,r){return this.updatedAttrsMap.set(e,r),this}remove(e){return this.removedIds.add(e),this}addNewIds(e){for(const r of e)this.newIds.add(r);return this}updateParentSize(e){return Sa(this.editor,Yo(e),this.originAttrsMap,this.updatedAttrsMap),this}updateNodeSize(e){return Sa(this.editor,e,this.originAttrsMap,this.updatedAttrsMap),this}commit(e){if(this.isCommitDone){console.error("It had committed before, can not commit again!");return}this.editor.commandManager.pushCommand(new ec(e,this.editor,this.originAttrsMap,this.updatedAttrsMap,this.removedIds,this.newIds)),this.isCommitDone=!0}},vT=class{constructor(e){E(this,"unbindEvents",xi),E(this,"hasBindEvents",!1),this.editor=e}bindEvents(){if(this.hasBindEvents){console.log("ClipboardManager has bind events, please destroy first");return}this.hasBindEvents=!0;const e=()=>{this.copy()},r=n=>{const o=n.clipboardData;if(!o||n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement)return;const i=o.getData("Text");this.addGraphsFromClipboard(i)};this.editor.keybindingManager.register({key:{metaKey:!0,keyCode:"KeyC"},winKey:{ctrlKey:!0,keyCode:"KeyC"},actionName:"Copy",action:e}),window.addEventListener("paste",r),this.unbindEvents=()=>{window.removeEventListener("paste",r)}}copy(){const e=this.getSelectedItemsSnapshot();e&&navigator.clipboard.writeText(e).then(()=>{console.log("copied")})}copyAsSVG(){const e=this.editor.selectedElements.getItems();if(e.length===0)return;const r=yT(e);navigator.clipboard.writeText(r).then(()=>{console.log("SVG copied")})}pasteAt(e,r){navigator.clipboard.readText().then(n=>{this.addGraphsFromClipboard(n,e,r)})}getSelectedItemsSnapshot(){const e=te.sortGraphics(this.editor.selectedElements.getItems());if(e.length===0)return null;const r=K_(),n=new Map,o=[];for(const a of e){const l=a.getAttrs();l.transform=a.getWorldTransform(),l.parentIndex=void 0;const c=r();n.set(l.id,c),l.id=c,o.push(l)}const i=nc(e);for(const a of i){const l=a.getAttrs(),c=r();n.set(l.id,c),l.id=c,l.parentIndex&&(l.parentIndex.guid=n.get(l.parentIndex.guid)),o.push(l)}return JSON.stringify({appVersion:this.editor.appVersion,paperId:this.editor.paperId,data:o})}updateAttrsParentIndex(e){let r=null,n=null;const o=te.sortGraphics(this.editor.selectedElements.getItems()).at(-1)??this.editor.doc.getCurrCanvas();let i=o;if(mT(o)||Sd(o))r=o.getMaxChildIndex();else{i=o.getParent(),r=o.getSortIndex();const g=o.getNextSibling();n=g?g.getSortIndex():null}const a=i.attrs.id,l=so(i.getWorldTransform());let c=0;for(;c<e.length&&!e[c].parentIndex;)c++;const h=c,f=_i(r,n,h),p=new Map;for(let g=0;g<h;g++){const w=e[g];w.parentIndex={guid:a,position:f[g]};const C=ya();p.set(w.id,C),w.id=C,w.transform=Ar(l,w.transform)}for(;c<e.length;){const g=e[c],w=ya();p.set(g.id,w),g.id=w,g.parentIndex.guid=p.get(g.parentIndex.guid),c++}return h}addGraphsFromClipboard(e,r,n){let o=null;try{o=JSON.parse(e)}catch{return}if(!(o&&typeof o=="object"&&o.appVersion.startsWith("suika-editor")&&o.data))return;const i=this.editor;if(o.data.length===0)return;const a=this.updateAttrsParentIndex(o.data),l=i.sceneGraph.createGraphicsArr(o.data);i.sceneGraph.addItems(l),i.sceneGraph.initGraphicsTree(l);const c=l.slice(0,a);i.selectedElements.setItems(c);const h=ji(ei(c.map(f=>f.getBbox())));if((r===void 0||n===void 0)&&o.paperId!==i.paperId){const f=this.editor.viewportManager.getCenter();r=f.x-h.width/2,n=f.y-h.height/2}if(r!==void 0&&n!==void 0){const f=r-h.x,p=n-h.y;(f||p)&&te.dMove(c,f,p)}new Xe(i).addNewIds(l.map(f=>f.attrs.id)).updateParentSize(c).commit("pasted graphs"),i.render()}destroy(){this.hasBindEvents=!1,this.unbindEvents()}};const wT=t=>`<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g filter="url(#filter0_d_1139_2)" transform="rotate(${t} 16 16)"><path d="M4.38452 17.3499L9.68782 16.9963L7.78571 15.0942C8.84801 14.0319 10.1091 13.1892 11.4971 12.6143C12.8851 12.0394 14.3727 11.7435 15.875 11.7435C17.3773 11.7435 18.8649 12.0394 20.2529 12.6143C21.6409 13.1892 22.902 14.0319 23.9643 15.0942L22.0622 16.9963L27.3655 17.3499L27.0119 12.0466L25.0674 13.9911C23.8602 12.784 22.4271 11.8264 20.8499 11.1731C19.2727 10.5198 17.5822 10.1835 15.875 10.1835C14.1678 10.1835 12.4774 10.5198 10.9001 11.1731C9.32289 11.8264 7.88978 12.784 6.68262 13.9911L4.73807 12.0466L4.38452 17.3499Z" fill="#000000"/><path d="M9.72108 17.4952L10.8205 17.4219L10.0414 16.6428L8.5009 15.1023C9.43698 14.2481 10.5153 13.5622 11.6884 13.0763C13.0158 12.5265 14.4383 12.2435 15.875 12.2435C17.3117 12.2435 18.7343 12.5265 20.0616 13.0763C21.2347 13.5622 22.313 14.2481 23.2491 15.1023L21.7086 16.6428L20.9295 17.4219L22.0289 17.4952L27.3322 17.8488L27.9024 17.8868L27.8644 17.3166L27.5108 12.0133L27.4375 10.9139L26.6584 11.693L25.0608 13.2906C23.8859 12.1996 22.525 11.3257 21.0412 10.7111C19.4033 10.0327 17.6479 9.68351 15.875 9.68351C14.1022 9.68351 12.3467 10.0327 10.7088 10.7111C9.22503 11.3257 7.86411 12.1996 6.68917 13.2906L5.09163 11.693L4.31248 10.9139L4.23918 12.0133L3.88563 17.3166L3.84762 17.8868L4.41778 17.8488L9.72108 17.4952Z" stroke="white"/></g><defs><filter id="filter0_d_1139_2" x="1.3107" y="7.18351" width="29.1286" height="13.2402" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset/><feGaussianBlur stdDeviation="1"/><feComposite in2="hardAlpha" operator="out"/><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1139_2"/><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1139_2" result="shape"/></filter></defs></svg>`,xT=t=>`<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g filter="url(#filter0_d_1173_45)" transform="rotate(${t} 16 16)"><path d="M16 6L12.5 10H19.5L16 6Z" fill="#000000"/><path d="M16 26L12.5 22H19.5L16 26Z" fill="#000000"/><path d="M15.25 10H16.75V22H15.25V10Z" fill="#000000"/><path d="M12.1237 9.67075L11.3981 10.5H12.5H14.75V21.5H12.5H11.3981L12.1237 22.3293L15.6237 26.3293L16 26.7593L16.3763 26.3293L19.8763 22.3293L20.6019 21.5H19.5H17.25V10.5H19.5H20.6019L19.8763 9.67075L16.3763 5.67075L16 5.2407L15.6237 5.67075L12.1237 9.67075Z" stroke="white"/></g><defs><filter id="filter0_d_1173_45" x="8.29623" y="2.48141" width="15.4075" height="27.0372" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset/><feGaussianBlur stdDeviation="1"/><feComposite in2="hardAlpha" operator="out"/><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1173_45"/><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1173_45" result="shape"/></filter></defs></svg>`,Zc=new Map,ST=(t,e)=>{const r=t+e;if(Zc.has(r))return Zc.get(r);let n="";switch(t){case"resize":n=xT(e);break;case"rotation":n=wT(e);break;default:console.warn("getIconSvgDataUrl: unknown type",t)}const o=`url("data:image/svg+xml,${n.replace(/"/g,"'").replace(/#/g,"%23")}") 16 16, auto`;return Zc.set(r,o),o};let ET=class{constructor(e){E(this,"cursor"),E(this,"customClassCursor",new Set(["default","move","move-ns","move-ew","pen","pen-close","crosshair"])),this.editor=e,this.setCursor("default")}getCursor(){return this.cursor}normalizeCursor(e){return typeof e=="string"?e:e.type==="resize"?{type:e.type,degree:vd(e.degree)%180}:e.type==="rotation"?{type:e.type,degree:vd(Math.round(e.degree))}:e}setCursor(e){if(e=this.normalizeCursor(e),Aa(e,this.cursor))return;this.cursor=e;const r="suika-cursor-",n=this.editor.canvasElement;if(n.classList.forEach(o=>{o.startsWith(r)&&n.classList.remove(o)}),this.editor.canvasElement.style.cursor="",this.customClassCursor.has(e)){const o=`${r}${e}`;this.editor.canvasElement.classList.add(o)}else typeof e=="string"?this.editor.canvasElement.style.cursor=e:(e.type==="resize"||e.type==="rotation")&&(this.editor.canvasElement.style.cursor=ST(e.type,e.degree))}};const CT=t=>typeof t=="object"&&(t==null?void 0:t.type)==="rotation";class _T{constructor(){E(this,"graphicsStore",new Map),E(this,"canvasStore",new Map)}add(e){const r=e.attrs.id,n=this.graphicsStore;n.has(r)&&console.warn(`graphics ${r} has added`),e instanceof ds&&this.canvasStore.set(r,e),n.set(r,e)}get(e){return this.graphicsStore.get(e)}getAll(){const e=[];for(const[,r]of this.graphicsStore)r.isDeleted()||e.push(r);return e}getCanvas(){return Array.from(this.canvasStore.values())[0]}clear(){this.graphicsStore.clear(),this.canvasStore.clear()}}class Fv extends te{constructor(e){super({...e,type:mt.Document},{}),E(this,"type",mt.Document),E(this,"isContainer",!0),E(this,"graphicsStore",new _T),E(this,"emitter",new ar),E(this,"changes",{added:new Map,deleted:new Set,updatedIds:new Set}),E(this,"emitSceneChangeThrottle",ep(()=>{const r=this.flushChanges();this.emitter.emit("sceneChange",r,"unknown")},100))}clear(){this.graphicsStore.clear()}getCanvas(){return this.graphicsStore.getCanvas()}getGraphicsById(e){return this.graphicsStore.get(e)}getGraphicsArrByIds(e){const r=[];for(const n of e){const o=this.getGraphicsById(n);if(!o){console.warn(`id ${n} is no exist in graphics array`);continue}r.push(o)}return r}getAllGraphicsArr(){return this.graphicsStore.getAll()}getCurrCanvas(){return this.graphicsStore.getCanvas()}addGraphics(e){this.graphicsStore.add(e),this.changes.added.set(e.attrs.id,e.getAttrs()),this.emitSceneChangeThrottle()}collectDeletedGraphics(e){const r=e.attrs.id;e.isDeleted()?(this.changes.deleted.add(r),this.changes.added.delete(r)):(this.changes.deleted.delete(r),this.changes.added.set(r,e.getAttrs())),this.emitSceneChangeThrottle()}collectUpdatedGraphics(e){this.changes.updatedIds.add(e),this.emitSceneChangeThrottle()}flushChanges(){const e=new Map;for(const n of this.changes.updatedIds){const o=this.getGraphicsById(n);if(!o){console.warn(`graphics ${n} is lost!`);continue}e.set(n,o.getUpdatedAttrs())}const r={added:this.changes.added,deleted:this.changes.deleted,update:e};return this.clearChanges(),r}clearChanges(){this.changes={added:new Map,deleted:new Set,updatedIds:new Set}}on(e,r){this.emitter.on(e,r)}off(e,r){this.emitter.off(e,r)}}const sl=(t,e)=>{t.selectedElements.size()===0&&console.warn("can't arrange, no element");const r=t.selectedElements.getItems(),n=new Xe(t),o=new Map;for(const a of r){const l=a.getParent();o.has(l)||o.set(l,new Set),o.get(l).add(a)}let i=!0;switch(e){case xo.Front:{i=bT(n,o);break}case xo.Back:{i=kT(n,o);break}case xo.Forward:{i=TT(n,o);break}case xo.Backward:{i=MT(n,o);break}default:console.warn(`invalid type ${e}`);break}i?(n.commit(`Arrange ${e}`),t.render()):console.log("No need to arrange.")},bT=(t,e)=>{let r=!1;for(const[n,o]of e){if(n.getChildrenCount()===o.size)continue;const{count:i}=Gv(n.getChildren(),o);if(i===o.size)continue;r=!0;const a=n.getMaxChildIndex(),l=te.sortGraphicsArray(Array.from(o)),c=_i(a,null,l.length);for(let h=0;h<l.length;h++){const f=l[h];t.recordOld(f.attrs.id,{parentIndex:tt(f.attrs.parentIndex)}),f.updateAttrs({parentIndex:{guid:n.attrs.id,position:c[h]}}),t.update(f.attrs.id,{parentIndex:tt(f.attrs.parentIndex)})}n.markSortDirty(),n.sortChildren()}return r},kT=(t,e)=>{let r=!1;for(const[n,o]of e){if(n.getChildrenCount()===o.size)continue;const{count:i}=Wv(n.getChildren(),o);if(i===o.size)continue;r=!0;const a=n.getMinChildIndex(),l=te.sortGraphicsArray(Array.from(o)),c=_i(null,a,l.length);for(let h=0;h<l.length;h++){const f=l[h];t.recordOld(f.attrs.id,{parentIndex:tt(f.attrs.parentIndex)}),f.updateAttrs({parentIndex:{guid:n.attrs.id,position:c[h]}}),t.update(f.attrs.id,{parentIndex:tt(f.attrs.parentIndex)})}n.markSortDirty(),n.sortChildren()}return r},TT=(t,e)=>{var r;let n=!1;for(const[o,i]of e){if(o.getChildrenCount()===i.size)continue;const a=o.getChildren(),{index:l,count:c}=Gv(a,i);if(c!==i.size){n=!0;for(let h=l;h>=0;h--){const f=a[h];if(i.has(f)){const p=a[h+1].getSortIndex(),g=((r=a[h+2])==null?void 0:r.getSortIndex())??null,w=mo(p,g);gv(a,h,h+1),t.recordOld(f.attrs.id,{parentIndex:tt(f.attrs.parentIndex)}),f.updateAttrs({parentIndex:{guid:o.attrs.id,position:w}}),t.update(f.attrs.id,{parentIndex:tt(f.attrs.parentIndex)})}}o.markSortDirty(),o.sortChildren()}}return n},MT=(t,e)=>{var r;let n=!1;for(const[o,i]of e){if(o.getChildrenCount()===i.size)continue;const a=o.getChildren(),{index:l,count:c}=Wv(a,i);if(c!==i.size){n=!0;for(let h=l;h<=a.length;h++){const f=a[h];if(i.has(f)){const p=((r=a[h-2])==null?void 0:r.getSortIndex())??null,g=a[h-1].getSortIndex(),w=mo(p,g);gv(a,h,h-1),t.recordOld(f.attrs.id,{parentIndex:tt(f.attrs.parentIndex)}),f.updateAttrs({parentIndex:{guid:o.attrs.id,position:w}}),t.update(f.attrs.id,{parentIndex:tt(f.attrs.parentIndex)})}}o.markSortDirty(),o.sortChildren()}}return n},Wv=(t,e)=>{let r=0,n=0;for(;r<t.length&&e.has(t[r]);r++)n++;return{index:r,count:n}},Gv=(t,e)=>{let r=t.length-1,n=0;for(;r>=0&&e.has(t[r]);r--)n++;return{index:r,count:n}},PT={exportOriginFile:(t,e="design")=>{const r=t.sceneGraph.toJSON(),n=new Blob([r],{type:"application/json"});IT(n,e+".suika")}},IT=(t,e)=>{const r=URL.createObjectURL(t),n=document.createElement("a");n.href=r,n.setAttribute("download",e),n.click()},$T=(t,e)=>{Uv(t,e,{x:-1,y:1})},jT=(t,e)=>{Uv(t,e,{x:1,y:-1})},Uv=(t,e,r)=>{const n=e.length;if(n===0){console.warn("graphics should not be empty");return}let o;n===1?o=e[0].getWorldCenter():o=uT(ei(e.map(a=>a.getBbox())));const i=new ot().translate(-o.x,-o.y).scale(r.x,r.y).translate(o.x,o.y);AT(t,e,i.getArray(),"Flip Vertical")},AT=(t,e,r,n)=>{const o=new Xe(t);for(const i of e)o.recordOld(i.attrs.id,{transform:tt(i.attrs.transform)}),i.prependWorldTransform(r),o.update(i.attrs.id,{transform:tt(i.attrs.transform)});o.updateParentSize(e),o.commit(n)},LT=(t,e)=>{if(t.length===0){console.warn("graphics should not be empty");return}t=te.sortGraphics(t);const r=Yo(t),n=t.at(-1),o=n.getParent(),i=so(o.getWorldTransform()),a=n.getSortIndex(),l=ji(ei(t.map(p=>Zs({...p.getSize(),transform:Ar(i,p.getWorldTransform())})))),c=new Cs({objectName:"",width:l.width,height:l.height,resizeToFit:!0},{advancedAttrs:{x:l.x,y:l.y},doc:e.doc});o.insertChild(c,a);const h=so(c.getWorldTransform()),f=new Xe(e);f.addNewIds([c.attrs.id]);for(const p of t)f.recordOld(p.attrs.id,{parentIndex:tt(p.attrs.parentIndex),transform:tt(p.attrs.transform)}),p.updateAttrs({transform:Ar(h,p.getWorldTransform())}),c.insertChild(p),f.update(p.attrs.id,{parentIndex:tt(p.attrs.parentIndex),transform:tt(p.attrs.transform)});f.updateNodeSize(r),f.commit("group"),e.sceneGraph.addItems([c]),e.selectedElements.setItems([c])},RT={importOriginFile:t=>{OT(".suika",e=>{t.setContents(JSON.parse(e))})}};function OT(t,e){const r=document.createElement("input");r.type="file",r.accept=t,r.style.display="none",r.addEventListener("change",function(n){var o;const i=(o=n.target.files)==null?void 0:o[0];if(!i)return;const a=new FileReader;a.onload=function(l){var c;const h=(c=l.target)==null?void 0:c.result;h&&e(h)},a.readAsText(i)}),r.click()}const Qs={setX(t,e,r){if(e.length===0)return;const n=new Xe(t);for(const o of e){n.recordOld(o.attrs.id,{transform:tt(o.attrs.transform)});const i=o.getWorldTransform();i[4]=r,o.setWorldTransform(i),n.update(o.attrs.id,{transform:tt(o.attrs.transform)})}n.updateParentSize(e),n.commit("Update X of Elements")},setY(t,e,r){if(e.length===0)return;const n=new Xe(t);for(const o of e){n.recordOld(o.attrs.id,{transform:tt(o.attrs.transform)});const i=o.getWorldTransform();i[5]=r,o.setWorldTransform(i),n.update(o.attrs.id,{transform:tt(o.attrs.transform)})}n.updateParentSize(e),n.commit("Update Y of Elements")},setWidth(t,e,r){if(e.length===0)return;const n=new Xe(t);for(const o of e)n.recordOld(o.attrs.id,{width:o.attrs.width}),o.updateAttrs({width:r}),n.update(o.attrs.id,{width:o.attrs.width});n.updateParentSize(e),n.commit("Update Width of Elements")},setHeight(t,e,r){if(e.length===0)return;const n=new Xe(t);for(const o of e)n.recordOld(o.attrs.id,{height:o.attrs.height}),o.updateAttrs({height:r}),n.update(o.attrs.id,{height:o.attrs.height});n.updateParentSize(e),n.commit("Update Height of Elements")},setRotation(t,e,r){if(e.length===0)return;const n=new Xe(t);for(const o of e)n.recordOld(o.attrs.id,{transform:tt(o.attrs.transform)}),o.setRotate(r),n.update(o.attrs.id,{transform:tt(o.attrs.transform)});n.updateParentSize(e),n.commit("Update Rotation")},setCornerRadius(t,e,r){if(e.length===0)return;const n=e.filter(i=>i.type===mt.Rect),o=n.map(i=>({cornerRadius:i.attrs.cornerRadius||0}));n.forEach(i=>{i.attrs.cornerRadius=r}),t.commandManager.pushCommand(new yo("update Corner Radius",n,{cornerRadius:r},o))},setCount(t,e,r){if(e.length===0)return;const n=e.filter(i=>i.type===mt.RegularPolygon||i.type===mt.Star),o=n.map(i=>({count:i.attrs.count}));n.forEach(i=>{i.updateAttrs({count:r})}),t.commandManager.pushCommand(new yo("update Count",n,{count:r},o))},setStarInnerScale(t,e,r){if(e.length===0)return;const n=e.filter(i=>i.type===mt.Star),o=n.map(i=>({starInnerScale:i.attrs.starInnerScale}));n.forEach(i=>{i.updateAttrs({starInnerScale:r})}),t.commandManager.pushCommand(new yo("update Star InnerScale",n,{count:r},o))},toggleVisible(t,e){if(e.length===0)return;const r=e.some(o=>!o.isVisible()),n=new Xe(t);for(const o of e)n.recordOld(o.attrs.id,{visible:o.attrs.visible}),o.updateAttrs({visible:r}),n.update(o.attrs.id,{visible:r});n.updateParentSize(e),n.commit("update visible of graphs")},toggleLock(t,e){if(e.length===0)return;const r=e.some(o=>!o.isLock()),n=e.map(o=>({lock:o.attrs.lock}));e.forEach(o=>{o.updateAttrs({lock:r})}),t.commandManager.pushCommand(new yo("update lock of graphs",e,{lock:r},n))},setGraphName(t,e,r){const n=[{objectName:e.attrs.objectName}];e.updateAttrs({objectName:r}),t.commandManager.pushCommand(new yo("update name of graphics",[e],{objectName:r},n))}},DT=(t,e)=>{var r;const n=t.filter(c=>Sd(c));if(n.length===0){console.log("no frame graphics, no ungroup");return}const o=Yo(t),i=new Map;for(const c of n){const h=c.getParentId();if(!h){console.warn(`graphics ${h} lost`);continue}i.has(h)||i.set(h,new Set),i.get(h).add(c)}const a=new Xe(e);let l=[];for(const[c,h]of i){const f=e.doc.getGraphicsById(c).getChildren();for(let p=0;p<f.length;p++){const g=f[p];if(!Sd(g)||!h.has(g))continue;const w=((r=f[p-1])==null?void 0:r.getSortIndex())??null,C=g.getSortIndex();g.removeFromParent(),g.setDeleted(!0),a.remove(g.attrs.id);const S=BT(a,c,g,w,C);l=l.concat(S)}}a.updateNodeSize(o),a.commit("ungroup"),e.selectedElements.setItems(l),e.selectedElements.setHoverItem(null)},BT=(t,e,r,n,o)=>{const i=r.getChildren(),a=_i(n,o,i.length);for(let l=0;l<i.length;l++){const c=i[l],h=c.getWorldTransform();t.recordOld(c.attrs.id,{parentIndex:tt(c.attrs.parentIndex),transform:tt(c.attrs.transform)}),c.updateAttrs({parentIndex:{guid:e,position:a[l]}}),c.insertAtParent(a[l]),c.setWorldTransform(h),t.update(c.attrs.id,{parentIndex:tt(c.attrs.parentIndex),transform:tt(c.attrs.transform)})}return i};class NT{constructor(e){E(this,"isBound",!1),this.editor=e}bindKey(){if(this.isBound){console.warn("CommandKeyBinding has been bound, please destroy it first");return}this.isBound=!0;const e=this.editor,r=()=>e.commandManager.undo();e.keybindingManager.register({key:{metaKey:!0,keyCode:"KeyZ"},winKey:{ctrlKey:!0,keyCode:"KeyZ"},when:O=>!O.isToolDragging,actionName:"Undo",action:r});const n=()=>e.commandManager.redo();e.keybindingManager.register({key:{metaKey:!0,shiftKey:!0,keyCode:"KeyZ"},winKey:{ctrlKey:!0,shiftKey:!0,keyCode:"KeyZ"},when:O=>!O.isToolDragging,actionName:"Redo",action:n});const o=()=>{e.hostEventManager.isEnableDelete&&e.selectedElements.removeFromScene()};e.keybindingManager.register({key:[{keyCode:"Backspace"},{keyCode:"Delete"}],when:O=>!O.isToolDragging,actionName:"Delete",action:o});const i=()=>{e.selectedElements.selectAll(),e.render()};e.keybindingManager.register({key:{metaKey:!0,keyCode:"KeyA"},winKey:{ctrlKey:!0,keyCode:"KeyA"},actionName:"Select All",action:i});const a=()=>{this.editor.toolManager.getActiveToolName()==="select"?e.selectedElements.clear():this.editor.toolManager.setActiveTool("select"),e.render()};e.keybindingManager.register({key:{keyCode:"Escape"},when:O=>!O.isToolDragging,actionName:"Back to Select Tool or Cancel Select",action:a});const l=()=>{e.setting.set("enableRuler",!e.setting.get("enableRuler")),e.render()};e.keybindingManager.register({key:{shiftKey:!0,keyCode:"KeyR"},actionName:"Toggle Rulers",action:l});const c=()=>{e.zoomManager.zoomToFit(),e.render()};e.keybindingManager.register({key:{shiftKey:!0,keyCode:"Digit1"},actionName:"Zoom To Fit",action:c});const h=()=>{e.zoomManager.zoomToSelection(),e.render()};e.keybindingManager.register({key:{shiftKey:!0,keyCode:"Digit2"},actionName:"Zoom To Selection",action:h});const f=()=>{e.zoomManager.zoomIn({isLevelZoom:!0}),e.render()};e.keybindingManager.register({key:[{metaKey:!0,keyCode:"Equal"},{keyCode:"Equal"}],winKey:{ctrlKey:!0,keyCode:"Equal"},actionName:"Zoom In",action:f});const p=()=>{e.zoomManager.zoomOut({isLevelZoom:!0}),e.render()};e.keybindingManager.register({key:[{metaKey:!0,keyCode:"Minus"},{keyCode:"Minus"}],winKey:{ctrlKey:!0,keyCode:"Minus"},actionName:"Zoom Out",action:p});const g=()=>{e.zoomManager.setZoomAndUpdateViewport(1),e.render()};e.keybindingManager.register({key:[{metaKey:!0,keyCode:"Digit0"},{shiftKey:!0,keyCode:"Digit0"}],winKey:[{ctrlKey:!0,keyCode:"Digit0"},{shiftKey:!0,keyCode:"Digit0"}],actionName:"Zoom To 100%",action:g});const w=()=>{e.setting.set("enablePixelGrid",!e.setting.get("enablePixelGrid")),e.render()};e.keybindingManager.register({key:{metaKey:!0,keyCode:"Quote"},winKey:{ctrlKey:!0,keyCode:"Quote"},actionName:"Toggle Grid",action:w});const C=()=>{e.setting.set("snapToGrid",!e.setting.get("snapToGrid")),e.render()};e.keybindingManager.register({key:{shiftKey:!0,metaKey:!0,keyCode:"Quote"},winKey:{shiftKey:!0,ctrlKey:!0,keyCode:"Quote"},actionName:"Snap To Grid",action:C});const S=()=>{sl(e,xo.Front),e.render()};e.keybindingManager.register({key:{keyCode:"BracketRight"},when:O=>!O.isToolDragging,actionName:"Front",action:S});const P=()=>{sl(e,xo.Back),e.render()};e.keybindingManager.register({key:{keyCode:"BracketLeft"},when:O=>!O.isToolDragging,actionName:"Back",action:P});const y=()=>{sl(e,xo.Forward),e.render()};e.keybindingManager.register({key:{metaKey:!0,keyCode:"BracketRight"},winKey:{ctrlKey:!0,keyCode:"BracketRight"},when:O=>!O.isToolDragging,actionName:"Forward",action:y});const m=()=>{sl(e,xo.Backward),e.render()};e.keybindingManager.register({key:{metaKey:!0,keyCode:"BracketLeft"},winKey:{ctrlKey:!0,keyCode:"BracketLeft"},when:O=>!O.isToolDragging,actionName:"Backward",action:m});const x=()=>{LT(this.editor.selectedElements.getItems(),e),e.render()};e.keybindingManager.register({key:{metaKey:!0,keyCode:"KeyG"},winKey:{ctrlKey:!0,keyCode:"KeyG"},when:O=>!O.isToolDragging,actionName:"Group",action:x});const k=()=>{DT(this.editor.selectedElements.getItems(),e),e.render()};e.keybindingManager.register({key:{metaKey:!0,keyCode:"Backspace"},winKey:{ctrlKey:!0,keyCode:"Backspace"},when:O=>!O.isToolDragging,actionName:"Ungroup",action:k});const M=()=>{Qs.toggleVisible(e,e.selectedElements.getItems()),e.render()};e.keybindingManager.register({key:{metaKey:!0,shiftKey:!0,keyCode:"KeyH"},winKey:{ctrlKey:!0,shiftKey:!0,keyCode:"KeyH"},when:O=>!O.isToolDragging,actionName:"Show/Hide",action:M});const b=()=>{Qs.toggleLock(e,e.selectedElements.getItems()),e.render()};e.keybindingManager.register({key:{metaKey:!0,shiftKey:!0,keyCode:"KeyL"},winKey:{ctrlKey:!0,shiftKey:!0,keyCode:"KeyL"},when:O=>!O.isToolDragging,actionName:"Lock/Unlock",action:b});const T=()=>{jT(e,e.selectedElements.getItems()),e.render()};e.keybindingManager.register({key:{shiftKey:!0,keyCode:"KeyV"},winKey:{shiftKey:!0,keyCode:"KeyV"},when:O=>!O.isToolDragging,actionName:"FlipVertical",action:T});const I=()=>{$T(e,e.selectedElements.getItems()),e.render()};e.keybindingManager.register({key:{shiftKey:!0,keyCode:"KeyH"},winKey:{shiftKey:!0,keyCode:"KeyH"},when:O=>!O.isToolDragging,actionName:"FlipHorizontal",action:I});const H=()=>{const O=e.selectedElements.getItems(),F=[];let N=!1;for(const V of O)lu(V)?(F.push(...V.getChildren()),N=!0):F.push(V);N&&(e.selectedElements.setItems(F),e.render())},R=()=>{const O=e.selectedElements.size();if(!(e.pathEditor.isActive()||O===0))if(O===1){const F=e.selectedElements.getItems()[0];F instanceof Je?e.pathEditor.active(F):F instanceof oc?e.textEditor.active({textGraph:F}):lu(F)&&H()}else H()};e.keybindingManager.register({key:{keyCode:"Enter"},when:O=>!O.isToolDragging,actionName:"EnterGraphEdit",action:R})}destroy(){this.isBound=!1}}class HT{constructor(e){E(this,"unbindHandler",xi),E(this,"hadBound",!1),E(this,"transaction"),this.editor=e,this.transaction=new Xe(e)}bindKey(){if(this.hadBound){console.warn("MoveGraphsKeyBinding had already bound, please unbind first");return}this.hadBound=!0;const e=this.editor;let r=!0;const n=wb(f=>{this.editor.controlHandleManager.showCustomHandles(),r=!0;for(const p of f)this.transaction.update(p.attrs.id,{transform:tt(p.attrs.transform)});this.editor.commandManager.enableRedoUndo(),this.transaction.commit("Move elements by direction key"),this.transaction=new Xe(e)},e.setting.get("moveElementsDelay")),o=()=>{n.flush()},i={ArrowLeft:!1,ArrowRight:!1,ArrowUp:!1,ArrowDown:!1},a=()=>i.ArrowLeft||i.ArrowRight||i.ArrowUp||i.ArrowDown,l=f=>{const p=e.selectedElements.getItems();if(p.length===0||(f.key in i&&(i[f.key]=!0),!a()))return;if(r){for(const w of p)this.transaction.recordOld(w.attrs.id,{transform:tt(w.attrs.transform)});r=!1}let g=e.setting.get("smallNudge");f.shiftKey&&(g=e.setting.get("bigNudge")),i.ArrowLeft&&te.dMove(p,-g,0),i.ArrowRight&&te.dMove(p,g,0),i.ArrowUp&&te.dMove(p,0,-g),i.ArrowDown&&te.dMove(p,0,g),this.transaction.updateParentSize(p),this.editor.commandManager.disableRedoUndo(),this.editor.controlHandleManager.hideCustomHandles(),n(p),e.render()},c=f=>{const p=f.key;p in i&&(i[p]=!1)},h=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"];this.editor.keybindingManager.register({key:[...h.map(f=>({keyCode:f})),...h.map(f=>({shiftKey:!0,keyCode:f}))],actionName:"Move Elements",action:l}),window.addEventListener("keyup",c),e.commandManager.on("beforeExecCmd",o),this.unbindHandler=()=>{window.removeEventListener("keyup",c),e.commandManager.off("beforeExecCmd",o)}}destroy(){this.unbindHandler(),this.hadBound=!1}}class zT{constructor(e){E(this,"isShiftPressing",!1),E(this,"isCtrlPressing",!1),E(this,"isAltPressing",!1),E(this,"isCommandPressing",!1),E(this,"isSpacePressing",!1),E(this,"isWheelBtnPressing",!1),E(this,"isDraggingCanvasBySpace",!1),E(this,"isEnableDelete",!0),E(this,"isEnableContextMenu",!0),E(this,"moveGraphsKeyBinding"),E(this,"commandKeyBinding"),E(this,"eventEmitter",new ar),E(this,"unbindHandlers",[]),this.editor=e,this.moveGraphsKeyBinding=new HT(e),this.commandKeyBinding=new NT(e)}bindHotkeys(){this.bindModifiersRecordEvent(),this.bindWheelEvent(),this.bindContextMenu(),this.moveGraphsKeyBinding.bindKey(),this.commandKeyBinding.bindKey()}bindModifiersRecordEvent(){const e=r=>{const n=this.isShiftPressing,o=this.isAltPressing,i=this.isSpacePressing;this.isShiftPressing=r.shiftKey,this.isCtrlPressing=r.ctrlKey,this.isAltPressing=r.altKey,this.isCommandPressing=r.metaKey,r.code==="Space"&&(this.isSpacePressing=r.type==="keydown"),n!==this.isShiftPressing&&this.eventEmitter.emit("shiftToggle",this.isShiftPressing),o!==this.isAltPressing&&this.eventEmitter.emit("altToggle",this.isAltPressing),i!==this.isSpacePressing&&this.eventEmitter.emit("spaceToggle",this.isSpacePressing)};document.addEventListener("keydown",e),document.addEventListener("keyup",e),this.unbindHandlers.push(()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",e)})}on(e,r){this.eventEmitter.on(e,r)}off(e,r){this.eventEmitter.off(e,r)}bindWheelEvent(){const e=this.editor,r=o=>{if(o.ctrlKey||o.metaKey){o.preventDefault();const i=this.editor.getCursorXY(o);let a=o.deltaY>0;this.editor.setting.get("invertZoomDirection")&&(a=!a),a?e.zoomManager.zoomOut({center:i,deltaY:o.deltaY}):e.zoomManager.zoomIn({center:i,deltaY:o.deltaY}),e.render()}else{if(this.editor.canvasDragger.isActive()&&this.editor.canvasDragger.isPressing())return;const i=e.zoomManager.getZoom();e.viewportManager.translate(o.deltaX/i,o.deltaY/i),e.render()}},n=o=>{(o.ctrlKey||o.metaKey)&&o.preventDefault()};e.canvasElement.addEventListener("wheel",r),window.addEventListener("wheel",n,{passive:!1}),this.unbindHandlers.push(()=>{e.canvasElement.removeEventListener("wheel",r),window.removeEventListener("wheel",n)})}bindContextMenu(){const e=r=>{r.preventDefault(),this.isEnableContextMenu&&this.eventEmitter.emit("contextmenu",{x:r.clientX,y:r.clientY})};this.editor.canvasElement.addEventListener("contextmenu",e),this.unbindHandlers.push(()=>{this.editor.canvasElement.removeEventListener("contextmenu",e)})}enableDelete(){this.isEnableDelete=!0}disableDelete(){this.isEnableDelete=!1}enableContextmenu(){this.isEnableContextMenu=!0}disableContextmenu(){this.isEnableContextMenu=!1}destroy(){this.unbindHandlers.forEach(e=>e()),this.unbindHandlers=[],this.moveGraphsKeyBinding.destroy(),this.commandKeyBinding.destroy()}}class FT{constructor(e){E(this,"isWheelBtnPressing",!1),E(this,"eventEmitter",new ar),E(this,"cursorPos",null),E(this,"startPos",{x:0,y:0}),E(this,"isPressing",!1),E(this,"maxDragDistance",0),E(this,"onPointerdown",r=>{if(r.target!==this.editor.canvasElement)return;this.updateIsWheelBtnPressing(r),this.isPressing=!0;const{pos:n,vwPos:o}=this.getPosAndVwPos(r);this.startPos={...n};const i={pos:n,vwPos:o,nativeEvent:r};this.eventEmitter.emit("start",i),this.handleComboClick(i)}),E(this,"onPointerMove",r=>{const n=r.target===this.editor.canvasElement;if(n||this.isPressing){const a=this.editor.getSceneCursorXY(r);this.setCursorPos(a)}const{pos:o,vwPos:i}=this.getPosAndVwPos(r);if(this.isPressing){const a=o.x-this.startPos.x,l=o.y-this.startPos.y,c=Math.max(Math.abs(a),Math.abs(l));this.maxDragDistance=Math.max(c,this.maxDragDistance),this.eventEmitter.emit("drag",{pos:o,vwPos:i,nativeEvent:r,isOutside:n,maxDragDistance:this.maxDragDistance})}else this.eventEmitter.emit("move",{pos:o,vwPos:i,nativeEvent:r,isOutside:n,maxDragDistance:this.maxDragDistance})}),E(this,"onPointerUp",r=>{this.updateIsWheelBtnPressing(r),this.isPressing=!1,this.maxDragDistance=0,(r.target===this.editor.canvasElement||this.isPressing)&&this.eventEmitter.emit("end",{...this.getPosAndVwPos(r),nativeEvent:r})}),E(this,"pointerDownTimeStamp",-1/0),E(this,"lastPointerDownPos",{x:-99,y:-99}),E(this,"handleComboClick",r=>{const n=r.nativeEvent;if(n.button!==0)return;const o=new Date().getTime(),i={x:n.pageX,y:n.pageY},a=o-this.pointerDownTimeStamp,l=Kr(i,this.lastPointerDownPos);a<this.editor.setting.get("continueClickMaxGap")&&l<this.editor.setting.get("continueClickDistanceTol")&&(this.pointerDownTimeStamp=o,this.eventEmitter.emit("comboClick",r)),this.pointerDownTimeStamp=o,this.lastPointerDownPos=i}),this.editor=e,this.bindEvent()}getCursorPos(){return tt(this.cursorPos)}setCursorPos(e){const r=this.cursorPos;this.cursorPos=e&&{x:e.x,y:e.y},Aa(r,this.cursorPos)||this.eventEmitter.emit("cursorPosUpdate",tt(e))}getPosAndVwPos(e){const r=this.editor.getCursorXY(e);return{pos:this.editor.viewportCoordsToScene(r.x,r.y),vwPos:r}}updateIsWheelBtnPressing(e){if(e.button===1){const r=this.isWheelBtnPressing;e.type==="pointerdown"?this.isWheelBtnPressing=!0:e.type==="pointerup"&&(this.isWheelBtnPressing=!1),r!==this.isWheelBtnPressing&&this.eventEmitter.emit("wheelBtnToggle",this.isWheelBtnPressing,e)}}bindEvent(){window.addEventListener("pointerdown",this.onPointerdown),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp)}unbindEvent(){window.removeEventListener("pointerdown",this.onPointerdown),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp)}destroy(){this.unbindEvent()}on(e,r){this.eventEmitter.on(e,r)}off(e,r){this.eventEmitter.off(e,r)}}class WT{constructor(){E(this,"eventEmitter",new ar),E(this,"imgMap",new Map),E(this,"loadingImgSet",new Set)}async addImg(e){if(this.loadingImgSet.has(e)||this.getImg(e))return;const r=new Image;r.src=e,await new Promise(n=>{r.onload=()=>{this.loadingImgSet.delete(e),this.imgMap.set(e,r),this.eventEmitter.emit("added",r),n(r)}})}getImg(e){return this.imgMap.get(e)}on(e,r){this.eventEmitter.on(e,r)}off(e,r){this.eventEmitter.off(e,r)}}const Tm=t=>{const{ctrlKey:e=!1,shiftKey:r=!1,altKey:n=!1,metaKey:o=!1}=t;return`${e?"ctrl+":""}${o?"meta+":""}${r?"shift+":""}${n?"alt+":""}${t.code}`};class GT{constructor(e){E(this,"keyBindingMap",new Map),E(this,"isBound",!1),E(this,"id",0),E(this,"handleAction",r=>{if(r.altKey&&r.preventDefault(),r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement)return;let n=!1;const o={isToolDragging:this.editor.toolManager.isDragging()};for(const i of this.keyBindingMap.values())if((!i.when||i.when(o))&&(q_&&i.winKey?this.isKeyMatch(i.winKey,r)&&(n=!0):this.isKeyMatch(i.key,r)&&(n=!0)),n){r.preventDefault(),console.log(`[${Tm(r)}] => ${i.actionName}`),i.action(r);break}n||console.log(`[${Tm(r)}] => no match`)}),this.editor=e}isKeyMatch(e,r){if(Array.isArray(e))return e.some(l=>this.isKeyMatch(l,r));if(e.keyCode=="*")return!0;const{ctrlKey:n=!1,shiftKey:o=!1,altKey:i=!1,metaKey:a=!1}=e;return n==r.ctrlKey&&o==r.shiftKey&&i==r.altKey&&a==r.metaKey&&e.keyCode==r.code}register(e){const r=this.id;return this.keyBindingMap.set(r,e),this.id++,r}registerWithHighPrior(e){const r=this.id,n=new Map;n.set(r,e);for(const[o,i]of this.keyBindingMap)n.set(o,i);return this.keyBindingMap=n,this.id++,r}unregister(e){this.keyBindingMap.delete(e)}bindEvent(){this.isBound||(this.isBound=!0,document.addEventListener("keydown",this.handleAction))}destroy(){this.isBound&&(this.keyBindingMap.clear(),document.removeEventListener("keydown",this.handleAction))}}const op=(t,e)=>{const r=new Set;for(const l of e)l.removeFromParent(),l.setDeleted(!0),r.add(l.attrs.id);const n=Yo(e);for(const l of n){const c=t.doc.getGraphicsById(l);c.isEmpty()&&(c.removeFromParent(),c.setDeleted(!0),r.add(l))}const o=nc(e);for(const l of o)l.setDeleted(!0),r.add(l.attrs.id);const i=new Map,a=new Map;Sa(t,n,i,a),t.commandManager.pushCommand(new ec("remove graphics",t,i,a,r))},Vv="pathSelect",Xv="v";class Ed{constructor(e){E(this,"type",Vv),E(this,"hotkey",Xv),E(this,"cursor","default"),E(this,"startPoint",null),E(this,"prevAttrs",null),E(this,"selectedControls",[]),E(this,"startSegs",[]),this.editor=e}onActive(){}onInactive(){}onStart(e){const r=this.editor.pathEditor,n=this.startPoint=this.editor.getSceneCursorXY(e),o=this.editor.controlHandleManager.getHandleInfoByPoint(n);if(!o)return;const i=r.getPath();this.prevAttrs=tt({transform:i.attrs.transform,pathData:i.attrs.pathData});const a=sp.parseSelectedInfoStr(o.handleName);r.selectedControl.contains(a.type,a.pathIdx,a.segIdx)?this.selectedControls=r.selectedControl.getSelectedControls():this.selectedControls=[a],this.startSegs=this.selectedControls.map(({pathIdx:l,segIdx:c})=>r.getPath().getSeg(l,c,{applyTransform:!0})),r.selectedControl.setItems(this.selectedControls),r.drawControlHandles(),this.editor.render()}onDrag(e){if(!this.startPoint)return;const r=this.editor.getSceneCursorXY(e),n=r.x-this.startPoint.x,o=r.y-this.startPoint.y,i=this.editor.pathEditor.getPath();for(let a=0;a<this.selectedControls.length;a++){const{type:l,pathIdx:c,segIdx:h}=this.selectedControls[a];if(i.getSeg(c,h)){const f=this.startSegs[a];if(l==="anchor")i.setSeg(c,h,{point:{x:f.point.x+n,y:f.point.y+o}});else{if(this.editor.pathEditor.selectedControl.contains("anchor",c,h))continue;l==="in"?i.setSeg(c,h,{in:{x:f.in.x+n,y:f.in.y+o}}):l==="out"&&i.setSeg(c,h,{out:{x:f.out.x+n,y:f.out.y+o}})}this.editor.pathEditor.drawControlHandles(),this.editor.render()}}}onEnd(){const e=this.editor.pathEditor.getPath();this.editor.commandManager.pushCommand(new yo("UpdatePathData",[e],[{transform:e.attrs.transform,pathData:e.attrs.pathData}],[this.prevAttrs])),this.editor.commandManager.batchCommandEnd()}onMoveExcludeDrag(){}afterEnd(){this.startPoint=null,this.prevAttrs=null,this.selectedControls=[],this.startSegs=[]}onCommandChange(){this.editor.pathEditor.drawControlHandles()}}E(Ed,"type",Vv),E(Ed,"hotkey",Xv);class UT{constructor(e){E(this,"lastPoint",{x:-1,y:-1}),E(this,"isShiftPressingWhenStart",!1),E(this,"startSelectedControls",[]),E(this,"segControlsNeedDrawInStart",[]),this.editor=e}onActive(){}onInactive(){}onStart(){this.isShiftPressingWhenStart=!1;const e=this.editor,r=e.pathEditor;this.segControlsNeedDrawInStart=this.editor.pathEditor.selectedControl.getSegControlsNeedDraw(),e.hostEventManager.isShiftPressing?(this.isShiftPressingWhenStart=!0,this.startSelectedControls=e.pathEditor.selectedControl.getSelectedControls()):(this.startSelectedControls=r.selectedControl.getSelectedControls(),r.selectedControl.setNormalControls(r.selectedControl.getSelectedControls()),r.drawControlHandles()),this.lastPoint=e.toolManager.getCurrPoint(),e.render(),e.sceneGraph.setSelection(this.lastPoint)}onDrag(e){const r=this.editor.getSceneCursorXY(e),n=rp(this.lastPoint,r);this.editor.sceneGraph.setSelection(n);const o=this.editor.controlHandleManager.getCustomHandlesIntersectedWithRect(n).map(i=>sp.parseSelectedInfoStr(i.type)).filter(i=>{if(!i)return!1;const a=i.type;return a==="anchor"?!0:a==="in"||a==="out"?this.segControlsNeedDrawInStart.some(l=>Aa(l,{pathIdx:i.pathIdx,segIdx:i.segIdx})):!1});this.isShiftPressingWhenStart?(this.editor.pathEditor.selectedControl.setItems([...this.startSelectedControls,...o]),this.editor.pathEditor.drawControlHandles()):(this.editor.pathEditor.selectedControl.setItems(o),this.editor.pathEditor.drawControlHandles()),this.editor.render()}onEnd(){}afterEnd(e,r){this.isShiftPressingWhenStart=!1,this.startSelectedControls=[],this.editor.pathEditor.selectedControl.setNormalControls([]),r||this.editor.pathEditor.selectedControl.clear(),this.editor.pathEditor.drawControlHandles(),this.editor.sceneGraph.selection=null,this.editor.render()}}const Kv="pathSelect",Yv="v";class di{constructor(e){E(this,"type",Kv),E(this,"hotkey",Yv),E(this,"cursor","default"),E(this,"currStrategy",null),E(this,"strategyMove"),E(this,"strategyDrawSelection"),this.editor=e,this.strategyMove=new Ed(e),this.strategyDrawSelection=new UT(e)}onActive(){}onInactive(){}onStart(e){const r=this.editor.getSceneCursorXY(e);if(this.editor.controlHandleManager.getHandleInfoByPoint(r)?this.currStrategy=this.strategyMove:this.currStrategy=this.strategyDrawSelection,this.currStrategy)this.currStrategy.onActive(),this.currStrategy.onStart(e);else throw new Error("no strategy found")}onDrag(e){if(this.currStrategy)this.currStrategy.onDrag(e);else throw new Error("no strategy found")}onEnd(e,r){if(this.editor.controlHandleManager.showCustomHandles(),this.editor.hostEventManager.isDraggingCanvasBySpace)return;const n=this.currStrategy;if(n)n.onEnd(e,r),n.onInactive();else throw new Error("no strategy found")}onMoveExcludeDrag(){}afterEnd(e,r){var n;this.editor.hostEventManager.isDraggingCanvasBySpace||this.editor.setCursor("default"),(n=this.currStrategy)==null||n.afterEnd(e,r),this.currStrategy=null}onCommandChange(){this.editor.pathEditor.drawControlHandles()}onViewportXOrYChange(){this.editor.hostEventManager.isSpacePressing?this.editor.pathEditor.drawControlHandles():this.editor.pathEditor.drawControlHandles(),this.editor.render()}}E(di,"type",Kv),E(di,"hotkey",Yv);const Zv="drawPath",Qv="p";class fs{constructor(e){E(this,"type",Zv),E(this,"hotkey",Qv),E(this,"cursor","pen"),E(this,"startPoint",null),E(this,"path",null),E(this,"prevAttrs",null),E(this,"pathIdx",0),this.editor=e}onActive(){this.editor.pathEditor.isActive()&&(this.path=this.editor.pathEditor.getPath(),this.pathIdx=this.path.attrs.pathData.length),this.updateControlHandlesWithPreviewHandles(this.getCorrectedPoint())}onInactive(){this.editor.commandManager.batchCommandEnd(),this.editor.pathEditor.drawControlHandles(),this.editor.render()}onMoveExcludeDrag(e,r){const n=this.editor;if(r){n.pathEditor.drawControlHandles(),n.render();return}if(this.editor.canvasDragger.isActive())n.pathEditor.drawControlHandles();else{const o=this.checkCursorPtInStartAnchor();o?n.setCursor("pen-close"):n.setCursor("pen"),this.updateControlHandlesWithPreviewHandles(o??this.getCorrectedPoint())}}onStart(){const e=this.editor.pathEditor,r=this.checkCursorPtInStartAnchor();if(this.startPoint=r??this.getCorrectedPoint(),e.isActive()){const i=this.path;this.prevAttrs=tt({transform:i.attrs.transform,pathData:i.attrs.pathData}),e.selectedControl.getSelectedControlsSize()===0&&(this.pathIdx=i.getPathItemCount()),i.hasPath(this.pathIdx)||i.addEmptyPath(),r?(i.setPathItemClosed(this.pathIdx,!0),i.setSeg(this.pathIdx,0,{in:{x:0,y:0}})):i.addSeg(this.pathIdx,{point:this.startPoint,in:{x:0,y:0},out:{x:0,y:0}})}else{const i=[{segs:[{point:{x:0,y:0},in:{x:0,y:0},out:{x:0,y:0}}],closed:!1}],a=new Je({objectName:"",width:100,height:100,strokeWidth:1,stroke:[{type:ut.Solid,attrs:Ce("#000")}],pathData:i},{advancedAttrs:this.startPoint,doc:this.editor.doc});this.path=a,this.editor.sceneGraph.addItems([a]),this.editor.doc.getCurrCanvas().insertChild(a),this.editor.commandManager.batchCommandStart(),this.editor.commandManager.pushCommand(new Qu("Add Path",this.editor,[a]),{beforeRedo:()=>{this.editor.pathEditor.active(a),this.editor.toolManager.setActiveTool(di.type)},beforeUndo:()=>{this.editor.pathEditor.inactive("undo")}}),this.editor.selectedElements.setItems([a]),this.prevAttrs=tt({transform:a.attrs.transform,pathData:a.attrs.pathData}),console.log("DrawPathToolPath",a),e.active(a)}const n=this.path.getSegCount(this.pathIdx)-1,o=this.checkPathItemClosed()?0:n;e.selectedControl.setItems([{type:"anchor",pathIdx:this.pathIdx,segIdx:o}]),e.drawControlHandles(),this.editor.render()}onDrag(){if(!this.startPoint){console.warn("startPoint is null, check start()");return}const e=this.getCorrectedPoint(),r=e.x-this.startPoint.x,n=e.y-this.startPoint.y,o=this.path,i=o.getSegCount(this.pathIdx)-1,a={out:{x:r,y:n}};!this.editor.hostEventManager.isAltPressing&&i!==0&&(a.in={x:-r,y:-n}),o.setSeg(this.pathIdx,o.checkPathItemClosed(this.pathIdx)?0:i,a),this.editor.pathEditor.drawControlHandles(),this.editor.render()}checkPathItemClosed(){var e;return((e=this.path)==null?void 0:e.checkPathItemClosed(this.pathIdx))??!1}onEnd(){this.checkPathItemClosed()&&this.editor.pathEditor.selectedControl.clear();const e=this.path;e.updateAttrs({pathData:e.attrs.pathData}),console.log("DrawPathTool  pathData:",this.prevAttrs.pathData),this.editor.commandManager.pushCommand(new yo("Update Path Data",[e],[tt({transform:e.attrs.transform,pathData:e.attrs.pathData})],[this.prevAttrs])),this.editor.commandManager.batchCommandEnd()}afterEnd(){this.startPoint=null}onCommandChange(){this.updateControlHandlesWithPreviewHandles(this.getCorrectedPoint())}onCanvasDragActiveChange(e){e?this.editor.pathEditor.drawControlHandles():this.updateControlHandlesWithPreviewHandles(this.getCorrectedPoint()),this.editor.render()}onAltToggle(){this.startPoint&&this.onDrag()}checkCursorPtInStartAnchor(){const e=this.path;if(e){if(e.getPathItemCount()<=this.pathIdx)return null;if(e.getSegCount(this.pathIdx)>1){const r=e.getSeg(this.pathIdx,0,{applyTransform:!0}).point,n=this.editor.toolManager.getCurrPoint();return Kr(r,n)<=this.editor.viewportSizeToScene(5)?{...r}:null}}return null}getCorrectedPoint(){const e=this.editor.toolManager.getCurrPoint();return this.editor.setting.get("snapToGrid")&&(e.x=ie(e.x,.5),e.y=ie(e.y,.5)),e}onViewportXOrYChange(){this.editor.canvasDragger.isActive()?(console.log("DrawPathTool  this.editor.canvasDragger.isActive:",this.editor.canvasDragger.isActive),this.editor.pathEditor.drawControlHandles()):this.updateControlHandlesWithPreviewHandles(this.getCorrectedPoint()),this.editor.render()}updateControlHandlesWithPreviewHandles(e){const r=[];if(this.editor.pathEditor.selectedControl.getSelectedControlsSize()>0){const i=this.path;if(!i)return;const a=i.getLastSeg(this.pathIdx,{applyTransform:!0});if(a){const l=new Se({cx:e.x,cy:e.y,type:"path-preview-curve",getCursor:()=>"default",graphics:new Je({objectName:"path-preview-curve",width:0,height:0,pathData:[{segs:[{point:this.editor.sceneCoordsToViewport(a.point.x,a.point.y),in:{x:this.editor.sceneSizeToViewport(a.in.x),y:this.editor.sceneSizeToViewport(a.in.y)},out:{x:this.editor.sceneSizeToViewport(a.out.x),y:this.editor.sceneSizeToViewport(a.out.y)}},{point:this.editor.sceneCoordsToViewport(e.x,e.y),in:{x:0,y:0},out:{x:0,y:0}}],closed:!1}],stroke:[{type:ut.Solid,attrs:Ce("#1592fe")}],strokeWidth:1},{doc:this.editor.doc})});r.push(l)}}const n=this.editor.setting.get("handleStroke"),o=new Se({cx:e.x,cy:e.y,type:"path-preview-anchor",getCursor:()=>"default",graphics:new Ra({objectName:"path-preview-anchor",width:6,height:6,fill:[{type:ut.Solid,attrs:Ce("#fff")}],stroke:[{type:ut.Solid,attrs:Ce(n)}],strokeWidth:1},{advancedAttrs:e,doc:this.editor.doc})});r.push(o),this.editor.pathEditor.drawControlHandles(r),this.editor.render()}}E(fs,"type",Zv),E(fs,"hotkey",Qv);const qv="dragCanvas",Jv="h";let uu=class{constructor(e){E(this,"type",qv),E(this,"hotkey",Jv),E(this,"cursor","grab"),this.editor=e}onActive(){this.editor.canvasDragger.disableDragBySpace(),this.editor.canvasDragger.active()}onInactive(){this.editor.canvasDragger.inactive(),this.editor.canvasDragger.enableDragBySpace()}onMoveExcludeDrag(){}onStart(){}onDrag(){}onEnd(){}afterEnd(){this.editor.canvasDragger.disableDragBySpace()}};E(uu,"type",qv),E(uu,"hotkey",Jv);const Cl={getSnapPtBySetting(t,e){if(t={x:t.x,y:t.y},e.get("snapToGrid")){const r={x:e.get("gridSnapX"),y:e.get("gridSnapY")};return this.getGridSnapPt(t,r)}return t},getGridSnapPt(t,e){return{x:ie(t.x,e.x),y:ie(t.y,e.y)}}};class bi{constructor(e){E(this,"type",""),E(this,"hotkey",""),E(this,"cursor","crosshair"),E(this,"commandDesc","Add Graph"),E(this,"drawingGraph",null),E(this,"startPoint",{x:-1,y:-1}),E(this,"lastDragPoint"),E(this,"lastDragPointInViewport"),E(this,"lastMousePoint"),E(this,"startPointWhenSpaceDown",null),E(this,"lastDragPointWhenSpaceDown",null),E(this,"isDragging",!1),E(this,"unbindEvent",xi),this.editor=e}onActive(){const e=this.editor,r=e.hostEventManager,n=()=>{this.isDragging&&this.updateRect()};r.on("shiftToggle",n);const o=()=>{e.hostEventManager.isDraggingCanvasBySpace||this.isDragging&&(this.lastDragPoint=e.viewportCoordsToScene(this.lastDragPointInViewport.x,this.lastDragPointInViewport.y,this.editor.setting.get("snapToGrid")),this.updateRect())};e.viewportManager.on("xOrYChange",o),this.unbindEvent=()=>{r.off("shiftToggle",n),e.viewportManager.off("xOrYChange",o)}}onSpaceToggle(e){this.isDragging&&e?(this.startPointWhenSpaceDown=this.startPoint,this.lastDragPointWhenSpaceDown=this.lastMousePoint,this.updateRect()):(this.startPointWhenSpaceDown=null,this.lastDragPointWhenSpaceDown=null)}onAltToggle(){this.isDragging&&this.updateRect()}onInactive(){this.unbindEvent()}onMoveExcludeDrag(){}onStart(e){this.startPoint=Cl.getSnapPtBySetting(this.editor.getSceneCursorXY(e),this.editor.setting),this.drawingGraph=null,this.isDragging=!1,this.startPointWhenSpaceDown=null,this.lastDragPointWhenSpaceDown=null}onDrag(e){this.editor.hostEventManager.disableDelete(),this.editor.hostEventManager.disableContextmenu(),!this.editor.hostEventManager.isDraggingCanvasBySpace&&(this.isDragging=!0,this.lastDragPointInViewport=this.editor.getCursorXY(e),this.lastDragPoint=this.lastMousePoint=Cl.getSnapPtBySetting(this.editor.getSceneCursorXY(e),this.editor.setting),this.updateRect())}adjustSizeWhenShiftPressing(e){const{width:r,height:n}=e,o=Math.max(Math.abs(r),Math.abs(n));return e.height=(Math.sign(n)||1)*o,e.width=(Math.sign(r)||1)*o,e}updateGraph(e){e=La(e),this.drawingGraph.updateAttrs({x:e.x,y:e.y,width:e.width,height:e.height})}updateRect(){if(!this.isDragging)return;const{x:e,y:r}=this.lastDragPoint,n=this.editor.sceneGraph;if(this.startPointWhenSpaceDown&&this.lastDragPointWhenSpaceDown){const{x:w,y:C}=this.startPointWhenSpaceDown,{x:S,y:P}=this.lastDragPointWhenSpaceDown,y=e-S,m=r-P;this.startPoint={x:w+y,y:C+m}}const{x:o,y:i}=this.startPoint;let a=e-o,l=r-i;if(a===0||l===0){const w=this.solveWidthOrHeightIsZero({width:a,height:l},{x:this.lastMousePoint.x-this.startPoint.x,y:this.lastMousePoint.y-this.startPoint.y});a=w.width,l=w.height}let c={x:o,y:i,width:a,height:l};const h=this.editor.hostEventManager.isAltPressing,f=this.editor.hostEventManager.isShiftPressing;let p=0,g=0;if(h&&(c={x:c.x-a,y:c.y-l,width:c.width*2,height:c.height*2},p=c.x+c.width/2,g=c.y+c.height/2),f&&(c=this.adjustSizeWhenShiftPressing(c)),h&&(c.x=p-c.width/2,c.y=g-c.height/2),this.drawingGraph)this.updateGraph(c);else{const w=this.createGraph(c);n.addItems([w]),this.editor.doc.getCurrCanvas().insertChild(w),this.drawingGraph=w}this.editor.selectedElements.setItems([this.drawingGraph]),n.render()}solveWidthOrHeightIsZero(e,r){const n={width:e.width,height:e.height};if(e.width===0){const o=Math.sign(r.x)||1;n.width=o*this.editor.setting.get("gridSnapX")}if(e.height===0){const o=Math.sign(r.y)||1;n.height=o*this.editor.setting.get("gridSnapY")}return n}onEnd(e){if(this.editor.hostEventManager.isDraggingCanvasBySpace)return;const r=Cl.getSnapPtBySetting(this.editor.getSceneCursorXY(e),this.editor.setting);if(this.drawingGraph===null){const{x:n,y:o}=r,i=this.editor.setting.get("drawGraphDefaultWidth"),a=this.editor.setting.get("drawGraphDefaultHeight");this.drawingGraph=this.createGraph({x:n-i/2,y:o-a/2,width:i,height:a},!0),this.drawingGraph&&(this.editor.doc.getCurrCanvas().insertChild(this.drawingGraph),this.editor.sceneGraph.addItems([this.drawingGraph]),this.editor.selectedElements.setItems([this.drawingGraph]),this.editor.render())}this.drawingGraph&&this.editor.commandManager.pushCommand(new Qu(this.commandDesc,this.editor,[this.drawingGraph]))}afterEnd(){this.isDragging=!1,this.editor.hostEventManager.enableDelete(),this.editor.hostEventManager.enableContextmenu(),this.drawingGraph&&!this.editor.setting.get("keepToolSelectedAfterUse")&&this.editor.toolManager.setActiveTool("select"),this.startPointWhenSpaceDown=null,this.lastDragPointWhenSpaceDown=null}}E(bi,"type",""),E(bi,"hotkey","");const tw="drawEllipse",ew="o";class Cd extends bi{constructor(e){super(e),E(this,"type",tw),E(this,"hotkey",ew),this.commandDesc="Add Ellipse"}createGraph(e){return e=La(e),new Ra({objectName:"",width:e.width,height:e.height,fill:[tt(this.editor.setting.get("firstFill"))]},{advancedAttrs:{x:e.x,y:e.y},doc:this.editor.doc})}}E(Cd,"type",tw),E(Cd,"hotkey",ew);const rw="drawLine",nw="l";let cu=class extends bi{constructor(e){super(e),E(this,"type",rw),E(this,"hotkey",nw),this.commandDesc="Add Line"}createGraph(e,r){if(r)return null;const n=this.calcAttrs(e);return new np({objectName:"",...n,height:0,stroke:[tt(this.editor.setting.get("firstStroke"))],strokeWidth:this.editor.setting.get("strokeWidth")},{doc:this.editor.doc})}adjustSizeWhenShiftPressing(e){return cT(e)}updateGraph(e){const r=this.calcAttrs(e);this.drawingGraph.updateAttrs(r)}solveWidthOrHeightIsZero(e,r){const n={width:e.width,height:e.height};if(e.width===0){const o=Math.sign(r.x)||1;n.width=o*this.editor.setting.get("gridSnapX")}return n}calcAttrs({x:e,y:r,width:n,height:o}){const i=Ei({x:0,y:-1},{x:n,y:o})-ho,a=e+n/2,l=r+o/2,c=new ot().translate(a,l).rotate(i).translate(-a,-l);return c.tx=e,c.ty=r,{width:Math.sqrt(n*n+o*o),transform:c.getArray()}}};E(cu,"type",rw),E(cu,"hotkey",nw);const ow="drawRect",iw="r";let _d=class extends bi{constructor(e){super(e),E(this,"type",ow),E(this,"hotkey",iw),this.commandDesc="Add Rect"}createGraph(e){return e=La(e),new $r({objectName:"",width:e.width,height:e.height,fill:[tt(this.editor.setting.get("firstFill"))]},{advancedAttrs:{x:e.x,y:e.y},doc:this.editor.doc})}};E(_d,"type",ow),E(_d,"hotkey",iw);class ip extends te{constructor(e,r){super({...e,type:mt.RegularPolygon},r),E(this,"type",mt.RegularPolygon)}getAttrs(){return tt({...this.attrs,count:this.attrs.count})}toJSON(){return{...super.toJSON(),count:this.attrs.count}}getPoints(){return eT(this.getSize(),this.attrs.count)}getMinBbox(){if(this._cacheMinBbox)return this._cacheMinBbox;const e=new ot(...this.attrs.transform),r=this.getPoints().map(o=>e.apply(o)),n=rc(r);return this._cacheMinBbox=n,n}draw(e,r,n){this.isVisible()&&this._realDraw(e,r,n)}drawOutline(e,r,n){this._realDraw(e,void 0,void 0,{stroke:[{type:ut.Solid,attrs:Ce(r)}],strokeWidth:n,transform:this.getWorldTransform()})}_realDraw(e,r,n,o){const i=this.attrs,{fill:a,strokeWidth:l,stroke:c,transform:h}=o||this.attrs;e.save(),e.transform(...h??i.transform);const f=this.getPoints();e.beginPath(),e.moveTo(f[0].x,f[0].y);for(let p=1;p<f.length;p++){const g=f[p];e.lineTo(g.x,g.y)}e.closePath();for(const p of a??[])switch(p.type){case ut.Solid:{e.fillStyle=Jr(p.attrs),e.fill();break}case ut.Image:r?(e.clip(),this.fillImage(e,p,r,n)):console.warn("ImgManager is not provided")}if(l){e.lineWidth=l;for(const p of c??[])switch(p.type){case ut.Solid:{e.strokeStyle=Jr(p.attrs),e.stroke();break}case ut.Image:}}e.closePath(),e.restore()}getInfoPanelAttrs(){return[...super.getInfoPanelAttrs(),{label:"N",key:"count",value:this.attrs.count,min:3,max:60,uiType:"number"}]}updateAttrs(e,r){super.updateAttrs(e,r)}hitTest(e,r,n){const o=new ot(...this.getWorldTransform()).applyInverse({x:e,y:r});return rT(this.getPoints(),o)}getSVGTagHead(e){const r=[...this.attrs.transform];return e&&(r[4]+=e.x,r[5]+=e.y),`<polygon points="${this.getPoints().map(n=>`${n.x},${n.y}`).join(" ")}" transform="matrix(${r.join(" ")})"`}}const sw="drawRegularPolygon",aw="";class bd extends bi{constructor(e){super(e),E(this,"type",sw),E(this,"hotkey",aw),this.commandDesc="AddRegularPolygon"}createGraph(e){return e=La(e),new ip({objectName:"",width:e.width,height:e.height,fill:[tt(this.editor.setting.get("firstFill"))],count:3},{advancedAttrs:{x:e.x,y:e.y},doc:this.editor.doc})}}E(bd,"type",sw),E(bd,"hotkey",aw);let lw=class extends te{constructor(e,r){super({...e,type:mt.Star},r),E(this,"type",mt.Star)}getAttrs(){return tt({...this.attrs,count:this.attrs.count})}toJSON(){return{...super.toJSON(),count:this.attrs.count}}getPoints(){return iT(this.getSize(),this.attrs.count,this.attrs.starInnerScale)}getMinBbox(){if(this._cacheMinBbox)return this._cacheMinBbox;const e=new ot(...this.attrs.transform),r=this.getPoints().map(o=>e.apply(o)),n=rc(r);return this._cacheMinBbox=n,n}draw(e,r,n){this.isVisible()&&this._realDraw(e,r,n)}drawOutline(e,r,n){this._realDraw(e,void 0,void 0,{stroke:[{type:ut.Solid,attrs:Ce(r)}],strokeWidth:n,transform:this.getWorldTransform()})}_realDraw(e,r,n,o){const{fill:i,strokeWidth:a,stroke:l,transform:c}=o||this.attrs;e.save(),e.transform(...c);const h=this.getPoints();e.beginPath(),e.moveTo(h[0].x,h[0].y);for(let f=1;f<h.length;f++){const p=h[f];e.lineTo(p.x,p.y)}e.closePath();for(const f of i??[])switch(f.type){case ut.Solid:{e.fillStyle=Jr(f.attrs),e.fill();break}case ut.Image:r?(e.clip(),this.fillImage(e,f,r,n)):console.warn("ImgManager is not provided")}if(a){e.lineWidth=a;for(const f of l??[])switch(f.type){case ut.Solid:{e.strokeStyle=Jr(f.attrs),e.stroke();break}case ut.Image:}}e.closePath(),e.restore()}getInfoPanelAttrs(){return[...super.getInfoPanelAttrs(),{label:"N",key:"count",value:this.attrs.count,min:3,max:60,uiType:"number"},{label:"T",key:"starInnerScale",value:this.attrs.starInnerScale,min:.0010000000474974513,max:1,uiType:"number"}]}updateAttrs(e,r){super.updateAttrs(e,r)}hitTest(e,r,n){const o=new ot(...this.getWorldTransform()).applyInverse({x:e,y:r});return nT(this.getPoints(),o)}getSVGTagHead(e){const r=[...this.attrs.transform];return e&&(r[4]+=e.x,r[5]+=e.y),`<polygon points="${this.getPoints().map(n=>`${n.x},${n.y}`).join(" ")}" transform="matrix(${r.join(" ")})"`}};const uw="drawStar",cw="";let kd=class extends bi{constructor(e){super(e),E(this,"type",uw),E(this,"hotkey",cw),this.commandDesc="AddStar"}createGraph(e){return e=La(e),new lw({objectName:"",width:e.width,height:e.height,fill:[tt(this.editor.setting.get("firstFill"))],count:5,starInnerScale:this.editor.setting.get("defaultStarInnerScale")},{advancedAttrs:{x:e.x,y:e.y},doc:this.editor.doc})}};E(kd,"type",uw),E(kd,"hotkey",cw);const hw="drawText",dw="t";let hu=class{constructor(e){E(this,"type",hw),E(this,"hotkey",dw),E(this,"cursor","crosshair"),this.editor=e}onActive(){}onInactive(){}onMoveExcludeDrag(){}onStart(){}onDrag(){}onEnd(e){const r=this.editor.getCursorXY(e);this.editor.textEditor.active({pos:r}),this.editor.setting.get("keepToolSelectedAfterUse")||this.editor.toolManager.setActiveTool("select")}afterEnd(){}};E(hu,"type",hw),E(hu,"hotkey",dw);const fw="pencil",pw={shiftKey:!0,keyCode:"KeyP"};let du=class{constructor(e){E(this,"type",fw),E(this,"hotkey",pw),E(this,"cursor","crosshair"),E(this,"commandDesc","draw by Pencil"),E(this,"unbindEvent",xi),E(this,"path",null),E(this,"isFirstDrag",!0),this.editor=e}onActive(){this.editor.selectedElements.clear()}onInactive(){this.unbindEvent()}onMoveExcludeDrag(){}onStart(e){this.path=new Je({objectName:"",width:0,height:0,pathData:[{segs:[],closed:!1}],stroke:[tt(this.editor.setting.get("firstStroke"))],strokeWidth:3},{doc:this.editor.doc});const r=this.editor.getSceneCursorXY(e);this.path.addSeg(0,{point:r,in:{x:0,y:0},out:{x:0,y:0}})}onDrag(e){const r=this.editor.getSceneCursorXY(e),n=this.path;n.addSeg(0,{point:r,in:{x:0,y:0},out:{x:0,y:0}}),this.isFirstDrag&&(this.editor.sceneGraph.addItems([n]),this.editor.doc.getCurrCanvas().insertChild(n),this.isFirstDrag=!1),this.editor.render()}onEnd(e,r){const n=this.path;if(r){const o=n.attrs.pathData[0].segs,i=J5(o,this.editor.setting.get("pencilCurveFitTolerance"));n.attrs.pathData[0].segs=i,this.editor.commandManager.pushCommand(new Qu("Add Path by pencil",this.editor,[n]))}else n.setDeleted(!0)}afterEnd(){this.path=null,this.isFirstDrag=!0}getDragBlockStep(){return 0}};E(du,"type",fw),E(du,"hotkey",pw);const _l=(t,e)=>{const r=t.setting.get("selectionHitPadding")/t.zoomManager.getZoom(),n=t.doc.getCurrCanvas(),o=t.selectedElements.getParentIdSet();return gw(e,r,n,o)},gw=(t,e,r,n)=>{const o=r.getChildren();for(let i=o.length-1;i>=0;i--){const a=o[i];if(!(!a.isVisible()||a.isLock())&&a.hitTest(t.x,t.y,e))if(a instanceof Cs){const l=gw(t,e,a,n);if(l){const c=l.getParent();return c&&!n.has(c.attrs.id)?c:l}}else return a}return null},Mm=(t,e=new Set)=>{const r=t.sceneGraph.selection;if(r===null)return console.warn("selection 为 null，请确认在正确的时机调用当前方法"),[];const n=V5(r);return mw(t,n,t.doc.getCurrCanvas(),e)},mw=(t,e,r,n)=>{const o=[],i=r.getChildren();for(const a of i)a.isVisible()&&(n.has(a.attrs.id)?o.push(...mw(t,e,a,n)):a.intersectWithChildrenBox(e)&&o.push(a));return o};class VT{constructor(e){E(this,"originWorldTfMap",new Map),E(this,"transaction"),E(this,"selectedItems",[]),E(this,"startPoint",{x:-1,y:-1}),E(this,"dragPoint",null),E(this,"dx",0),E(this,"dy",0),E(this,"prevBBoxPos",{x:-1,y:-1}),this.editor=e,this.transaction=new Xe(e)}onActive(){}onInactive(){}onShiftToggle(){this.dragPoint&&this.move()}onStart(e){this.editor.controlHandleManager.hideCustomHandles(),this.startPoint=this.editor.getSceneCursorXY(e),this.selectedItems=this.editor.selectedElements.getItems({excludeLocked:!0});for(const n of this.selectedItems)this.transaction.recordOld(n.attrs.id,{transform:tt(n.attrs.transform)}),this.originWorldTfMap.set(n.attrs.id,n.getWorldTransform());const r=this.editor.selectedElements.getBoundingRect();r?this.prevBBoxPos={x:r.x,y:r.y}:console.error("selected elements should't be empty when moving, please report us issue"),this.editor.refLine.cacheXYToBbox()}onDrag(e){this.dragPoint=this.editor.getCursorXY(e),this.move()}move(){this.editor.sceneGraph.showBoxAndHandleWhenSelected=!1,this.editor.sceneGraph.showSelectedGraphsOutline=!1;const{x:e,y:r}=this.editor.viewportCoordsToScene(this.dragPoint.x,this.dragPoint.y);let n=e-this.startPoint.x,o=r-this.startPoint.y;this.editor.hostEventManager.isShiftPressing&&(Math.abs(n)>Math.abs(o)?o=0:n=0),this.editor.setting.get("snapToGrid")&&(n!==0&&(n=Math.round(this.prevBBoxPos.x+n)-this.prevBBoxPos.x),o!==0&&(o=Math.round(this.prevBBoxPos.y+o)-this.prevBBoxPos.y)),this.dx=n,this.dy=o;const i=this.selectedItems,a=new Map;for(const h of i){const f=tt(this.originWorldTfMap.get(h.attrs.id));f[4]+=n,f[5]+=o,a.set(h.attrs.id,{width:h.attrs.width,height:h.attrs.height,transform:f})}const{offsetX:l,offsetY:c}=this.editor.refLine.updateRefLine(a);for(const h of i){const f=tt(this.originWorldTfMap.get(h.attrs.id));f[4]+=n+l,f[5]+=o+c,h.setWorldTransform(f)}for(const h of i)this.transaction.update(h.attrs.id,{transform:tt(h.attrs.transform)});this.updateCursor(),this.transaction.updateParentSize(i),this.editor.render()}updateCursor(){if(this.editor.hostEventManager.isShiftPressing){if(this.dx===0&&this.dy!==0){this.editor.setCursor("move-ns");return}if(this.dx!==0&&this.dy===0){this.editor.setCursor("move-ew");return}}this.editor.setCursor("default")}onEnd(e,r){const n=this.editor.selectedElements.getItems({excludeLocked:!0});if(n.length!==0){if(!r){const o=this.editor.getSceneCursorXY(e);!_l(this.editor,o)&&!this.editor.hostEventManager.isShiftPressing&&this.editor.selectedElements.clear();return}(this.dx!==0||this.dy!==0)&&(this.transaction.commit("Update Graphics Attributes"),n.length===1&&this.editor.controlHandleManager.setCustomHandles(n[0].getControlHandles(this.editor.zoomManager.getZoom(),!0)))}}afterEnd(){this.transaction=new Xe(this.editor),this.dragPoint=null,this.editor.sceneGraph.showBoxAndHandleWhenSelected=!0,this.editor.sceneGraph.showSelectedGraphsOutline=!0,this.editor.refLine.clear(),this.editor.render()}}class XT{constructor(e){E(this,"startPoint",{x:-1,y:-1}),E(this,"handleName"),E(this,"startSelectBRect",null),E(this,"originAttrsMap",new Map),E(this,"originWorldTransforms",new Map),E(this,"childNodeSet",new Set),E(this,"updatedAttrsMap",new Map),E(this,"lastPoint",null),E(this,"prevLastPoint",null),E(this,"unbind",xi),E(this,"isResizeOp",()=>["nw","ne","se","sw","n","e","s","w"].includes(this.handleName)),E(this,"updateControls",r=>{const n=this.editor.controlHandleManager;if(!bm(this.handleName)&&n.hasCustomHandles()){const o=r.getControlHandles(this.editor.zoomManager.getZoom());o&&n.setCustomHandles(o)}}),this.editor=e}onActive(){const e=()=>{this.updateGraphics()};this.editor.hostEventManager.on("shiftToggle",e),this.editor.hostEventManager.on("altToggle",e),this.unbind=()=>{this.editor.hostEventManager.off("shiftToggle",e),this.editor.hostEventManager.off("altToggle",e)}}onInactive(){this.unbind(),this.unbind=xi}onStart(e){this.startPoint=this.editor.getSceneCursorXY(e);const r=this.editor.controlHandleManager.getHandleInfoByPoint(this.startPoint);if(!r)throw new Error("handleName is invalid");const n=this.editor.selectedElements.getItems();n.forEach(i=>{this.originAttrsMap.set(i.attrs.id,i.getAttrs()),this.originWorldTransforms.set(i.attrs.id,[...i.getWorldTransform()])}),this.childNodeSet=nc(n);for(const i of this.childNodeSet)this.originAttrsMap.set(i.attrs.id,i.getAttrs()),this.originWorldTransforms.set(i.attrs.id,[...i.getWorldTransform()]);const o=this.editor.selectedElements.getBoundingRect();if(!o)throw new Error("startSelectBbox should not be null, please issue to us");this.startSelectBRect=o,bm(r.handleName)&&this.editor.controlHandleManager.hideCustomHandles(),this.handleName=r.handleName}onDrag(e){this.editor.commandManager.disableRedoUndo(),this.editor.hostEventManager.disableDelete();const r=this.editor.setting.get("snapToGrid")&&(["nw","ne","se","sw"].includes(this.handleName)||["n","e","s","w"].includes(this.handleName)&&this.editor.selectedElements.size()>1||this.editor.selectedElements.getItems()[0].getRotate()%ho===0);this.lastPoint=this.editor.getSceneCursorXY(e),r&&(this.lastPoint=Cl.getSnapPtBySetting(this.lastPoint,this.editor.setting));const n=this.prevLastPoint;this.prevLastPoint=this.lastPoint,!Aa(n,this.lastPoint)&&(this.updateGraphics(),this.editor.render())}checkEnableUpdate(e,r){var n,o;return!((r.width===0||((n=r==null?void 0:r.transform)==null?void 0:n[0])===0)&&(r.height===0||((o=r==null?void 0:r.transform)==null?void 0:o[3])===0)||!(e.width===0||e.height===0)&&(r.width===0||r.height===0||r.transform&&(r.transform[0]===0||r.transform[3])===0))}updateSingleGraphics(e){const r=e.calcNewAttrsByControlHandle(this.handleName,this.lastPoint,this.originAttrsMap.get(e.attrs.id),this.originWorldTransforms.get(e.attrs.id),this.editor.hostEventManager.isShiftPressing,this.editor.hostEventManager.isAltPressing,this.editor.setting.get("flipObjectsWhileResizing"));e.updateAttrs(r,{finishRecomputed:!0}),this.updatedAttrsMap.set(e.attrs.id,tt(r)),Sa(this.editor,Yo([e]),this.originAttrsMap,this.updatedAttrsMap),this.updateControls(e)}updateGraphics(){if(!this.lastPoint)return;let e=new ot;const r=this.editor.selectedElements.getItems();if(r.length===1){if(!this.isResizeOp()||r[0].attrs.height===0){this.updateSingleGraphics(r[0]);return}const n=this.originWorldTransforms.get(r[0].attrs.id),o=this.originAttrsMap.get(r[0].attrs.id),i=su(this.handleName,this.lastPoint,{width:o.width,height:o.height,transform:n},{keepRatio:this.editor.hostEventManager.isShiftPressing,scaleFromCenter:this.editor.hostEventManager.isAltPressing,noChangeWidthAndHeight:!0,flip:this.editor.setting.get("flipObjectsWhileResizing")});if(!this.checkEnableUpdate(o,El(i)))return;e=new ot(...i.transform).append(new ot(...n).invert()),this.updateControls(r[0])}else{const n=this.startSelectBRect,o=new ot().translate(n.x,n.y),i=su(this.handleName,this.lastPoint,{width:n.width,height:n.height,transform:o.getArray()},{keepRatio:this.editor.hostEventManager.isShiftPressing,scaleFromCenter:this.editor.hostEventManager.isAltPressing,noChangeWidthAndHeight:!0,flip:this.editor.setting.get("flipObjectsWhileResizing")});e=new ot(...i.transform).append(o.clone().invert())}this.isResizeOp()?this.resizeGraphicsArray(e.getArray()):console.error("should reach here, please put a issue")}resizeGraphicsArray(e){const r=this.editor.selectedElements.getItems();for(const n of r){const o=n.attrs.id,i=this.originWorldTransforms.get(o),a=Ar(e,i),l=Ar(so(n.getParentWorldTransform()),a),{width:c,height:h}=this.originAttrsMap.get(o),f=El({width:c,height:h,transform:l});n.updateAttrs(f),this.updatedAttrsMap.set(o,tt(f))}this.updateChildren(e),Sa(this.editor,Yo(r),this.originAttrsMap,this.updatedAttrsMap)}updateChildren(e){for(const r of this.childNodeSet){const n=r.attrs.id,o=this.originWorldTransforms.get(n),i=Ar(e,o),a=Ar(so(r.getParentWorldTransform()),i),{width:l,height:c}=this.originAttrsMap.get(n),h=El({width:l,height:c,transform:a});r.updateAttrs(h),this.updatedAttrsMap.set(n,tt(h))}}onEnd(e,r){if(this.editor.selectedElements.size()===0||!r)return;const n=this.editor.selectedElements.getItems();this.editor.commandManager.pushCommand(new ec("Update Selected Graphics attributes by Control Handle",this.editor,this.originAttrsMap,this.updatedAttrsMap)),n.length===1&&(this.editor.controlHandleManager.setCustomHandles(n[0].getControlHandles(this.editor.zoomManager.getZoom(),!0)),this.editor.render()),this.editor.commandManager.enableRedoUndo(),this.editor.hostEventManager.enableDelete()}afterEnd(){this.originAttrsMap=new Map,this.updatedAttrsMap=new Map,this.lastPoint=null}}class KT{constructor(e){E(this,"originWorldTfMap",new Map),E(this,"transaction"),E(this,"selectedItems",[]),E(this,"lastPoint",null),E(this,"startRotation",0),E(this,"startBboxRotation",0),E(this,"dRotation",0),E(this,"selectedBoxCenter",null),E(this,"handleType",""),E(this,"shiftPressHandler",()=>{this.rotateSelectedGraphics()}),this.editor=e,this.transaction=new Xe(e)}onActive(){this.editor.hostEventManager.on("shiftToggle",this.shiftPressHandler)}onInactive(){this.editor.hostEventManager.off("shiftToggle",this.shiftPressHandler)}onStart(e){this.selectedItems=this.editor.selectedElements.getItems({excludeLocked:!0});for(const o of this.selectedItems)this.transaction.recordOld(o.attrs.id,{transform:tt(o.attrs.transform)}),this.originWorldTfMap.set(o.attrs.id,o.getWorldTransform());const r=this.editor.selectedElements.getBoundingRect();this.selectedBoxCenter={x:r.x+r.width/2,y:r.y+r.height/2};const n=this.editor.getSceneCursorXY(e);this.startRotation=Ei({x:0,y:-1},{x:n.x-this.selectedBoxCenter.x,y:n.y-this.selectedBoxCenter.y}),this.startBboxRotation=this.editor.selectedElements.getRotation()}onDrag(e){this.lastPoint=this.editor.getSceneCursorXY(e),this.rotateSelectedGraphics()}rotateSelectedGraphics(){const e=this.lastPoint;if(!e)return;const r=this.editor,n=this.selectedItems,{x:o,y:i}=this.selectedBoxCenter,a=Ei({x:0,y:-1},{x:e.x-o,y:e.y-i});if(this.dRotation=a-this.startRotation,r.hostEventManager.isShiftPressing){const l=r.setting.get("lockRotation"),c=this.startBboxRotation+this.dRotation;this.dRotation=ie(c,l)-this.startBboxRotation}r.selectedElements.size()===1?r.setCursor(Hs(this.handleType,r.selectedBox.getBox())):r.setCursor({type:"rotation",degree:wa(a)});for(const l of n)l.dRotate(this.dRotation,this.originWorldTfMap.get(l.attrs.id),{x:o,y:i}),this.transaction.update(l.attrs.id,{transform:[...l.attrs.transform]});this.transaction.updateParentSize(this.selectedItems),r.render()}onEnd(){this.dRotation!==0&&this.transaction.commit("Rotate Elements")}afterEnd(){this.transaction=new Xe(this.editor),this.lastPoint=null,this.dRotation=0,this.selectedBoxCenter=null}}class YT{constructor(e){E(this,"startPoint",{x:-1,y:-1}),E(this,"isShiftPressingWhenStart",!1),E(this,"startSelectedGraphs",[]),E(this,"startPointWhenSpaceDown",null),E(this,"lastDragPointWhenSpaceDown",null),E(this,"lastMouseScenePoint"),E(this,"lastMousePoint"),this.editor=e}onActive(){}onInactive(){}onStart(e){this.isShiftPressingWhenStart=!1,this.editor.hostEventManager.isShiftPressing?(this.isShiftPressingWhenStart=!0,this.startSelectedGraphs=this.editor.selectedElements.getItems()):this.editor.selectedElements.clear(),this.startPoint=this.editor.getSceneCursorXY(e),this.editor.render(),this.editor.sceneGraph.setSelection(this.startPoint)}onDrag(e){this.lastMouseScenePoint=this.editor.getSceneCursorXY(e),this.lastMousePoint=this.lastMouseScenePoint,this.updateSelection()}updateSelection(){const{x:e,y:r}=this.lastMouseScenePoint;if(this.startPointWhenSpaceDown&&this.lastDragPointWhenSpaceDown){const{x:o,y:i}=this.startPointWhenSpaceDown,{x:a,y:l}=this.lastDragPointWhenSpaceDown,c=e-a,h=r-l;this.startPoint={x:o+c,y:i+h}}const n=rp(this.startPoint,this.lastMouseScenePoint);if(this.editor.sceneGraph.setSelection(n),this.isShiftPressingWhenStart){const o=Yo(this.startSelectedGraphs),i=Mm(this.editor,o);this.editor.selectedElements.setItems(this.startSelectedGraphs),this.editor.selectedElements.toggleItems(i.filter(a=>!o.has(a.attrs.id)))}else{const o=Mm(this.editor);this.editor.selectedElements.setItems(o)}this.editor.render()}onEnd(){}afterEnd(){this.isShiftPressingWhenStart=!1,this.startSelectedGraphs=[],this.editor.sceneGraph.selection=null,this.editor.render(),this.startPointWhenSpaceDown=null,this.lastDragPointWhenSpaceDown=null}onSpaceToggle(e){this.editor.toolManager.isDragging()&&e?(this.startPointWhenSpaceDown=this.startPoint,this.lastDragPointWhenSpaceDown=this.lastMousePoint,this.updateSelection()):(this.startPointWhenSpaceDown=null,this.lastDragPointWhenSpaceDown=null)}}const yw="select",vw="v";class Ji{constructor(e){E(this,"type",yw),E(this,"hotkey",vw),E(this,"cursor","default"),E(this,"startPoint",{x:-1,y:-1}),E(this,"currStrategy",null),E(this,"strategyMove"),E(this,"strategyDrawSelection"),E(this,"strategySelectRotation"),E(this,"strategySelectResize"),E(this,"graphShouldRemovedFromSelectedIfNotMoved",null),E(this,"handleHoverItemChange",()=>{this.editor.toolManager.isDragging()||this.editor.render()}),E(this,"onContinueClick",r=>{const n=r.pos,o=this.editor;if(o.controlHandleManager.getHandleInfoByPoint(n))return;const i=_l(o,n);if(i){if(i instanceof Je)o.pathEditor.active(i);else if(i instanceof oc)o.textEditor.active({textGraph:i});else if(i instanceof Cs){const a=i.getChildren();for(let l=a.length-1;l>=0;l--)if(a[l].hitTestChildren(n.x,n.y)){this.editor.hostEventManager.isShiftPressing?this.editor.selectedElements.toggleItems([a[l]]):this.editor.selectedElements.setItems([a[l]]),o.selectedElements.setHoverItem(a[l]);break}}}}),E(this,"updateCursorAndHlHoverGraph",ep(r=>{if(this.editor.canvasDragger.isActive())return;const n=this.editor.controlHandleManager.getHandleInfoByPoint(r);if(this.editor.setCursor((n==null?void 0:n.cursor)||"default"),n||!this.editor.hostEventManager.isShiftPressing&&this.editor.selectedBox.hitTest(r))this.editor.selectedElements.setHoverItem(null);else{const o=_l(this.editor,r);this.editor.selectedElements.setHoverItem(o)}},20)),this.editor=e,this.strategyMove=new VT(e),this.strategyDrawSelection=new YT(e),this.strategySelectRotation=new KT(e),this.strategySelectResize=new XT(e)}onActive(){this.editor.selectedElements.on("hoverItemChange",this.handleHoverItemChange),this.editor.mouseEventManager.on("comboClick",this.onContinueClick)}onInactive(){this.editor.selectedElements.off("hoverItemChange",this.handleHoverItemChange),this.editor.mouseEventManager.off("comboClick",this.onContinueClick),this.editor.render()}onMoveExcludeDrag(e,r){if(r)return;const n=this.editor.getSceneCursorXY(e);this.updateCursorAndHlHoverGraph(n),this.editor.selectedBox.setHoverByPoint(n)}onStart(e){if(this.currStrategy=null,this.graphShouldRemovedFromSelectedIfNotMoved=null,this.editor.hostEventManager.isDraggingCanvasBySpace)return;const r=this.editor.sceneGraph,n=this.editor.selectedElements,o=this.editor.hostEventManager.isShiftPressing;this.startPoint=this.editor.getSceneCursorXY(e);const i=this.editor.controlHandleManager.getHandleInfoByPoint(this.startPoint);if(i)CT(i.cursor)?(this.strategySelectRotation.handleType=i.handleName,this.currStrategy=this.strategySelectRotation):this.currStrategy=this.strategySelectResize;else{const a=this.editor.selectedBox.hitTest(this.startPoint),l=_l(this.editor,this.startPoint);l&&o&&n.getItems().includes(l)&&(this.graphShouldRemovedFromSelectedIfNotMoved=l),a?this.currStrategy=this.strategyMove:l?(o?n.getItems().includes(l)||n.toggleItems([l]):n.setItems([l]),this.editor.selectedBox.setHover(!0),r.render(),this.currStrategy=this.strategyMove):this.currStrategy=this.strategyDrawSelection}if(this.currStrategy)this.currStrategy.onActive(),this.currStrategy.onStart(e);else throw new Error("没有根据判断选择策略，代码有问题")}onDrag(e){if(!this.editor.hostEventManager.isDraggingCanvasBySpace)if(this.currStrategy)this.currStrategy.onDrag(e);else throw new Error("没有根据判断选择策略，代码有问题")}onEnd(e,r){if(this.editor.controlHandleManager.showCustomHandles(),this.editor.hostEventManager.isDraggingCanvasBySpace)return;!r&&this.graphShouldRemovedFromSelectedIfNotMoved&&(this.editor.selectedElements.toggleItems([this.graphShouldRemovedFromSelectedIfNotMoved]),this.editor.render());const n=this.currStrategy;if(n)n.onEnd(e,r),n.onInactive();else throw new Error("没有根据判断选择策略，代码有问题")}afterEnd(e,r){var n;this.editor.hostEventManager.isDraggingCanvasBySpace||this.editor.setCursor("default"),this.graphShouldRemovedFromSelectedIfNotMoved=null,(n=this.currStrategy)==null||n.afterEnd(e,r),this.currStrategy=null;const o=this.editor.getSceneCursorXY(e);this.editor.selectedBox.setHoverByPoint(o),this.updateCursorAndHlHoverGraph(o)}onCanvasDragActiveChange(e){e&&this.editor.selectedElements.setHoverItem(null)}onSpaceToggle(e){var r;(r=this.currStrategy)!=null&&r.onSpaceToggle&&this.currStrategy.onSpaceToggle(e)}onShiftToggle(e){var r;(r=this.currStrategy)!=null&&r.onShiftToggle&&this.currStrategy.onShiftToggle(e)}}E(Ji,"type",yw),E(Ji,"hotkey",vw);class ZT{constructor(e){E(this,"toolCtorMap",new Map),E(this,"hotkeySet",new Set),E(this,"currentTool",null),E(this,"eventEmitter",new ar),E(this,"enableSwitchTool",!0),E(this,"keyBindingToken",[]),E(this,"_isDragging",!1),E(this,"enableToolTypes",[]),E(this,"currViewportPoint",{x:1/0,y:1/0}),E(this,"_unbindEvent"),this.editor=e,this.registerToolCtor(Ji),this.registerToolCtor(cu),this.registerToolCtor(hu),this.registerToolCtor(uu),this.registerToolCtor(di),this.registerToolCtor(fs),this.registerToolCtor(du),this.setEnableHotKeyTools([Ji.type,_d.type,Cd.type,fs.type,du.type,cu.type,bd.type,kd.type,hu.type,uu.type]),this.setActiveTool(Ji.type),this._unbindEvent=this.bindEvent()}unbindHotkey(){this.keyBindingToken.forEach(e=>{this.editor.keybindingManager.unregister(e)}),this.keyBindingToken=[]}setEnableHotKeyTools(e){this.enableToolTypes=e,this.eventEmitter.emit("changeEnableTools",[...e])}getEnableTools(){return["select","drawPath","drawText","dragCanvas"]}registerToolCtor(e){const r=e.type;this.toolCtorMap.has(r)&&console.warn(`tool "${r}" had exit, replace it!`),this.toolCtorMap.set(r,e);const n=e.hotkey;let o="",i;if(!n){console.log(`${r} has no hotkey`);return}typeof n=="string"?(o=`Key${n.toUpperCase()}`,i={keyCode:o}):(o=`${n.altKey?"alt+":""}${n.ctrlKey?"ctrl+":""}${n.shiftKey?"shift+":""}${n.metaKey?"meta+":""}${n.keyCode}`,i=n),this.hotkeySet.has(o)&&console.log(`register same hotkey: "${o}"`),this.hotkeySet.add(o);const a=this.editor.keybindingManager.register({key:i,actionName:r,when:()=>this.enableToolTypes.includes(r),action:()=>{this.setActiveTool(r)}});this.keyBindingToken.push(a)}getActiveToolName(){var e;return(e=this.currentTool)==null?void 0:e.type}bindEvent(){let e=!1,r={x:0,y:0},n=!1;const o=C=>{setTimeout(()=>{if(e=!1,this._isDragging=!1,n=!1,!(C.button!==0||this.editor.textEditor.isActive()||this.editor.hostEventManager.isSpacePressing)){if(e=!0,n=!0,!this.currentTool)throw new Error("there is no active tool");r={x:C.clientX,y:C.clientY},this.currentTool.onStart(C)}})},i=C=>{var S,P;if(this.currViewportPoint=this.editor.getCursorXY(C),!this.currentTool)throw new Error("未设置当前使用工具");if(e){if(!n)return;const y=C.clientX-r.x,m=C.clientY-r.y,x=((P=(S=this.currentTool).getDragBlockStep)==null?void 0:P.call(S))??this.editor.setting.get("dragBlockStep");!this._isDragging&&(Math.abs(y)>x||Math.abs(m)>x)&&(this._isDragging=!0),this._isDragging&&(this.enableSwitchTool=!1,this.editor.canvasDragger.disableDragBySpace(),this.currentTool.onDrag(C))}else{const y=this.editor.canvasElement!==C.target;this.currentTool.onMoveExcludeDrag(C,y)}},a=C=>{if(this.enableSwitchTool=!0,!!n){if(!this.currentTool)throw new Error("未设置当前使用工具");e&&(this.editor.canvasDragger.enableDragBySpace(),e=!1,this.currentTool.onEnd(C,this._isDragging),this.currentTool.afterEnd(C,this._isDragging)),this._isDragging=!1}},l=()=>{var C,S;(S=(C=this.currentTool)==null?void 0:C.onCommandChange)==null||S.call(C)},c=C=>{var S,P;(P=(S=this.currentTool)==null?void 0:S.onSpaceToggle)==null||P.call(S,C)},h=C=>{var S,P;(P=(S=this.currentTool)==null?void 0:S.onShiftToggle)==null||P.call(S,C)},f=C=>{var S,P;(P=(S=this.currentTool)==null?void 0:S.onAltToggle)==null||P.call(S,C)},p=(C,S)=>{var P,y;(y=(P=this.currentTool)==null?void 0:P.onViewportXOrYChange)==null||y.call(P,C,S)},g=C=>{var S,P;(P=(S=this.currentTool)==null?void 0:S.onCanvasDragActiveChange)==null||P.call(S,C)},w=this.editor.canvasElement;return w.addEventListener("pointerdown",o),window.addEventListener("pointermove",i),window.addEventListener("pointerup",a),this.editor.commandManager.on("change",l),this.editor.hostEventManager.on("spaceToggle",c),this.editor.hostEventManager.on("shiftToggle",h),this.editor.hostEventManager.on("altToggle",f),this.editor.viewportManager.on("xOrYChange",p),this.editor.canvasDragger.on("activeChange",g),()=>{w.removeEventListener("pointerdown",o),window.removeEventListener("pointermove",i),window.removeEventListener("pointerup",a),this.editor.commandManager.off("change",l),this.editor.hostEventManager.off("spaceToggle",c),this.editor.hostEventManager.off("shiftToggle",h),this.editor.hostEventManager.off("altToggle",f),this.editor.viewportManager.off("xOrYChange",p),this.editor.canvasDragger.off("activeChange",g)}}unbindEvent(){this._unbindEvent(),this._unbindEvent=xi,this.unbindHotkey()}setActiveTool(e){if(!this.enableSwitchTool||this.getActiveToolName()===e)return;if(!this.enableToolTypes.includes(e)){console.warn(`target tool "${e}" is not enable`);return}const r=this.currentTool,n=this.toolCtorMap.get(e)||null;if(!n)throw new Error(`tool "${e}" is not registered`);const o=this.currentTool=new n(this.editor);r&&r.onInactive(),this.setCursorWhenActive(),o.onActive(),this.eventEmitter.emit("switchTool",o.type)}on(e,r){this.eventEmitter.on(e,r)}off(e,r){this.eventEmitter.off(e,r)}destroy(){var e;(e=this.currentTool)==null||e.onInactive()}setCursorWhenActive(){this.currentTool&&this.editor.cursorManager.setCursor(this.currentTool.cursor)}isDragging(){return this._isDragging}getCurrPoint(){return this.editor.viewportCoordsToScene(this.currViewportPoint.x,this.currViewportPoint.y)}}class QT{constructor(e){E(this,"normalControls",[]),E(this,"selectedControls",[]),E(this,"segControlsNeedDraw",[]),E(this,"drawControlHandles",ep((r=[])=>{r=this.generateControls().concat(r),this.editor.controlHandleManager.setCustomHandles(r),this.editor.controlHandleManager.showCustomHandles()})),this.editor=e}getSegControlsNeedDraw(){return this.segControlsNeedDraw}getItemsNeedDraw(){const e=this.editor.pathEditor.getPath(),r=new Map,n=[];if(!e)return console.warn("path is no exist"),{segControlsNeedDrawMap:r,segControlsNeedDraw:n};const o=[...this.selectedControls,...this.normalControls];for(const i of o){const{type:a,pathIdx:l,segIdx:c}=i;if(l<0||l>=e.attrs.pathData.length)continue;const h=e.attrs.pathData[l],f=h.segs.length,p=h.closed;if(c<0||c>=f)continue;let g=r.get(l);g||(g=new Set,r.set(l,g)),g.add(c),n.push({pathIdx:l,segIdx:c});const w=c-1,C=c+1;a==="anchor"?(w>=0?(g.add(w),n.push({pathIdx:l,segIdx:w})):p&&(g.add(f-1),n.push({pathIdx:l,segIdx:f-1})),C<f?(g.add(C),n.push({pathIdx:l,segIdx:C})):p&&(g.add(0),n.push({pathIdx:l,segIdx:0}))):a==="in"?w>=0&&(g.add(w),n.push({pathIdx:l,segIdx:w})):(a==="out"||a==="curve")&&C<f&&(g.add(C),n.push({pathIdx:l,segIdx:C}))}return{segControlsNeedDrawMap:r,segControlsNeedDraw:n}}generateControls(){const e=this.editor.pathEditor.getPath();if(!e)return[];const r=4,n=6,o=this.editor.setting.get("handleStroke"),i=this.editor.zoomManager.getZoom(),a=e.attrs.pathData,{segControlsNeedDrawMap:l,segControlsNeedDraw:c}=this.getItemsNeedDraw();this.segControlsNeedDraw=c;const h=[],f=[];for(let p=0;p<a.length;p++){const g=a[p];for(let w=0;w<g.segs.length;w++){const C=e.getSeg(p,w,{applyTransform:!0}),S=C.point;let P=6,y="#fff",m=o;this.contains("anchor",p,w)&&(P=8,y=o,m="#fff");const x=new Se({cx:S.x,cy:S.y,type:["anchor",p,w].join("-"),graphics:new Ra({objectName:"anchor",width:P,height:P,fill:[{type:ut.Solid,attrs:Ce(y)}],stroke:[{type:ut.Solid,attrs:Ce(m)}],strokeWidth:1},{advancedAttrs:this.editor.sceneCoordsToViewport(S.x+P/2,S.y+P/2),doc:this.editor.doc}),padding:r,getCursor:()=>"default"});h.push(x);const k=l.get(p);if(!k||!k.has(w))continue;const M=Ce(this.editor.setting.get("pathLineStroke")),b=[Je.getHandleIn(C),Je.getHandleOut(C)];for(let T=0;T<b.length;T++){const I=b[T];if(H5(I,S))continue;const H=T===0&&this.contains("in",p,w)||T===1&&this.contains("out",p,w),R=U5(S,I),O=new Se({cx:R.x+R.width/2,cy:R.y+R.height/2,type:"handleLine",rotation:R.rotation,graphics:new np({objectName:"handleLine",height:R.height,width:R.width*i,stroke:[{type:ut.Solid,attrs:H?Ce(o):M}],strokeWidth:1},{advancedAttrs:{x:R.x,y:R.y},doc:this.editor.doc}),hitTest:()=>!1,getCursor:()=>"default"}),F=H?8.5:n,N=new Se({cx:I.x,cy:I.y,type:[T===0?"in":"out",p,w].join("-"),graphics:new ip({objectName:"pathHandle",width:F,height:F,fill:[{type:ut.Solid,attrs:Ce(H?o:"#fff")}],stroke:[{type:ut.Solid,attrs:Ce(H?"#fff":o)}],strokeWidth:H?1.5:1,count:4},{advancedAttrs:this.editor.sceneCoordsToViewport(I.x+F/2,I.y+F/2),doc:this.editor.doc}),padding:r,getCursor:()=>"default"});f.push(O,N)}}}return h.concat(f)}contains(e,r,n){return this.selectedControls.some(o=>o.type===e&&o.pathIdx===r&&o.segIdx===n)}getSelectedControlsSize(){return this.selectedControls.length}getSelectedControls(){return tt(this.selectedControls)}setItems(e){this.selectedControls=e}clear(){this.selectedControls=[]}setNormalControls(e){this.normalControls=e}getNormalControls(){return tt(this.normalControls)}}class sp{constructor(e){E(this,"_active",!1),E(this,"path",null),E(this,"eventTokens",[]),E(this,"prevToolKeys",[]),E(this,"eventEmitter",new ar),E(this,"selectedControl"),E(this,"onSelectedChange",r=>{r.length===0||r[0]===this.path||(this.inactive(),this.editor.toolManager.setActiveTool("select"))}),this.editor=e,this.selectedControl=new QT(e)}getPath(){return this.path}isActive(){return this._active}active(e){this._active=!0,this.path=e;const r=this.editor;r.sceneGraph.showSelectedGraphsOutline=!1,r.sceneGraph.highlightLayersOnHover=!1,r.controlHandleManager.enableTransformControl=!1,this.unbindHotkeys(),this.bindHotkeys(),this.prevToolKeys=r.toolManager.getEnableTools(),r.toolManager.setEnableHotKeyTools([di.type,fs.type]);const n=r.toolManager.getActiveToolName();n!==di.type&&n!==fs.type&&r.toolManager.setActiveTool(di.type),r.selectedElements.on("itemsChange",this.onSelectedChange),r.pathEditor.drawControlHandles(),this.eventEmitter.emit("toggle",!0)}inactive(e){if(!this._active)return;this._active=!1,e!=="undo"&&this.removePathIfEmpty(),this.selectedControl.clear(),this.path=null;const r=this.editor;r.sceneGraph.showSelectedGraphsOutline=!0,r.sceneGraph.highlightLayersOnHover=!0,r.controlHandleManager.enableTransformControl=!0,this.unbindHotkeys(),r.toolManager.setEnableHotKeyTools(this.prevToolKeys),r.toolManager.setActiveTool(Ji.type),r.selectedElements.off("itemsChange",this.onSelectedChange),r.controlHandleManager.clearCustomHandles(),r.render(),this.eventEmitter.emit("toggle",!1)}removePathIfEmpty(){const e=this.path;if(!e)return;const r=e.attrs.pathData;(r.length===0||r.every(n=>n.segs.length<=1))&&(op(this.editor,[e]),this.editor.selectedElements.clear())}bindHotkeys(){const e=this.editor;this.eventTokens=[];let r=e.keybindingManager.registerWithHighPrior({key:[{keyCode:"Backspace"},{keyCode:"Delete"}],when:n=>!n.isToolDragging,actionName:"Path Delete",action:()=>{}});this.eventTokens.push(r),r=e.keybindingManager.registerWithHighPrior({key:{keyCode:"Escape"},when:n=>!n.isToolDragging,actionName:"Path Finish",action:()=>{this.selectedControl.getSelectedControlsSize()>0?(this.selectedControl.clear(),this.drawControlHandles(),this.editor.render()):this.inactive()}}),this.eventTokens.push(r),r=e.keybindingManager.registerWithHighPrior({key:{keyCode:"Enter"},when:n=>!n.isToolDragging,actionName:"Path End",action:()=>{this.inactive()}}),this.eventTokens.push(r)}unbindHotkeys(){for(const e of this.eventTokens)this.editor.keybindingManager.unregister(e);this.eventTokens=[]}static parseSelectedInfoStr(e){const r=e.split("-");return r.length!==3?null:{type:r[0],pathIdx:parseInt(r[1]),segIdx:parseInt(r[2])}}on(e,r){this.eventEmitter.on(e,r)}off(e,r){this.eventEmitter.off(e,r)}drawControlHandles(e=[]){this.selectedControl.drawControlHandles(e)}}var qT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Td={},JT={get exports(){return Td},set exports(t){Td=t}};(function(t,e){(function(r,n){t.exports=n()})(qT,function(){var r=function(){function n(w){return a.appendChild(w.dom),w}function o(w){for(var C=0;C<a.children.length;C++)a.children[C].style.display=C===w?"block":"none";i=w}var i=0,a=document.createElement("div");a.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",a.addEventListener("click",function(w){w.preventDefault(),o(++i%a.children.length)},!1);var l=(performance||Date).now(),c=l,h=0,f=n(new r.Panel("FPS","#0ff","#002")),p=n(new r.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var g=n(new r.Panel("MB","#f08","#201"));return o(0),{REVISION:16,dom:a,addPanel:n,showPanel:o,begin:function(){l=(performance||Date).now()},end:function(){h++;var w=(performance||Date).now();if(p.update(w-l,200),w>c+1e3&&(f.update(1e3*h/(w-c),100),c=w,h=0,g)){var C=performance.memory;g.update(C.usedJSHeapSize/1048576,C.jsHeapSizeLimit/1048576)}return w},update:function(){l=this.end()},domElement:a,setMode:o}};return r.Panel=function(n,o,i){var a=1/0,l=0,c=Math.round,h=c(window.devicePixelRatio||1),f=80*h,p=48*h,g=3*h,w=2*h,C=3*h,S=15*h,P=74*h,y=30*h,m=document.createElement("canvas");m.width=f,m.height=p,m.style.cssText="width:80px;height:48px";var x=m.getContext("2d");return x.font="bold "+9*h+"px Helvetica,Arial,sans-serif",x.textBaseline="top",x.fillStyle=i,x.fillRect(0,0,f,p),x.fillStyle=o,x.fillText(n,g,w),x.fillRect(C,S,P,y),x.fillStyle=i,x.globalAlpha=.9,x.fillRect(C,S,P,y),{dom:m,update:function(k,M){a=Math.min(a,k),l=Math.max(l,k),x.fillStyle=i,x.globalAlpha=1,x.fillRect(0,0,f,S),x.fillStyle=o,x.fillText(c(k)+" "+n+" ("+c(a)+"-"+c(l)+")",g,w),x.drawImage(m,C+h,S,P-h,y,C,S,P-h,y),x.fillRect(C+P-h,S,h,y),x.fillStyle=i,x.globalAlpha=.9,x.fillRect(C+P-h,S,h,c((1-k/M)*y))}}},r})})(JT);class tM{constructor(){E(this,"stats",new Td),E(this,"rafId",0)}start(e){const r=this.stats;r.showPanel(0),r.dom.style.left="300px",e.appendChild(r.dom);const n=()=>{r.begin(),r.end(),this.rafId=requestAnimationFrame(n)};this.rafId=requestAnimationFrame(n)}destroy(){cancelAnimationFrame(this.rafId),this.stats.dom.remove()}}class eM{constructor(e){E(this,"vRefLineMap",new Map),E(this,"hRefLineMap",new Map),E(this,"sortedXs",[]),E(this,"sortedYs",[]),E(this,"toDrawVLines",[]),E(this,"toDrawHLines",[]),this.editor=e}cacheXYToBbox(){this.clear();const e=this.vRefLineMap,r=this.hRefLineMap,n=this.editor.selectedElements.getIdSet(),o=this.editor.viewportManager.getBbox(),i=this.editor.doc.getCurrCanvas().getVisibleLeafNodeSet(),a=this.editor.selectedElements.getItems();for(const l of a)l.forEachVisibleLeafNode(c=>{i.has(c)&&i.delete(c)});for(const l of i){if(n.has(l.attrs.id))continue;const c=Em(l.getBbox());if(!Rv(o,c))continue;const h=this.editor.setting;if(h.get("snapToGrid")){const S=h.get("gridSnapX"),P=h.get("gridSnapY");c.minX=ie(c.minX,S),c.minY=ie(c.minY,P),c.midX=ie(c.midX,S),c.midY=ie(c.midY,P),c.maxX=ie(c.maxX,S),c.maxY=ie(c.maxY,P)}this.addBboxToMap(e,c.midX,[c.minY,c.maxY]),this.addBboxToMap(r,c.midY,[c.minX,c.maxX]);const f=l.getWorldBboxVerts();if(h.get("snapToGrid")){const S=h.get("gridSnapX"),P=h.get("gridSnapY");for(const y of f)y.x=ie(y.x,S),y.y=ie(y.y,P)}const p=f.filter(S=>S.x===c.minX),g=f.filter(S=>S.x===c.maxX),w=f.filter(S=>S.y===c.minY),C=f.filter(S=>S.y===c.maxY);for(const S of[...p,...g])this.addBboxToMap(e,S.x,[S.y]);for(const S of[...w,...C])this.addBboxToMap(r,S.y,[S.x])}this.sortedXs=Array.from(e.keys()).sort((l,c)=>l-c),this.sortedYs=Array.from(r.keys()).sort((l,c)=>l-c)}clear(){this.vRefLineMap.clear(),this.hRefLineMap.clear(),this.sortedXs=[],this.sortedYs=[],this.toDrawVLines=[],this.toDrawHLines=[]}addBboxToMap(e,r,n){const o=e.get(r);if(o)for(const i of n)o.add(i);else e.set(r,new Set(n))}getTargetPointFromSelect(e){let r=[];if(e.size===1){const{width:n,height:o,transform:i}=Array.from(e.values())[0];return Ci({x:0,y:0,width:n,height:o},i)}else{const n=Em(ei(Array.from(e.values()).map(o=>Zs(o))));r=[{x:n.minX,y:n.minY},{x:n.minX,y:n.maxY},{x:n.maxX,y:n.minY},{x:n.maxX,y:n.maxY},{x:n.midX,y:n.midY}]}return r}updateRefLine(e){const r=this.getTargetPointFromSelect(e);this.toDrawVLines=[],this.toDrawHLines=[];let n=Cm(r),o=Array.from(n.keys()),i=_m(r),a=Array.from(i.keys());const l=this.vRefLineMap,c=this.hRefLineMap,h=this.sortedXs,f=this.sortedYs;if(h.length===0&&f.length===0)return{offsetX:0,offsetY:0};let p,g;const w=ni(o,b=>rm(h,b)),C=ni(o,(b,T)=>w[T]-b),S=Math.min(...ni(C,b=>Math.abs(b))),P=ni(a,b=>rm(f,b)),y=ni(a,(b,T)=>P[T]-b),m=Math.min(...ni(y,b=>Math.abs(b))),x=(b,T)=>Math.abs(b-T)<1e-5,k=this.editor.setting.get("refLineTolerance")/this.editor.zoomManager.getZoom();if(S<=k){for(const b of C)if(x(S,Math.abs(b))){p=b;break}if(p===void 0)throw new Error("it should not reach here, please put a issue to us")}if(m<=k){for(const b of y)if(x(m,Math.abs(b))){g=b;break}if(g===void 0)throw new Error("it should not reach here, please put a issue to us")}const M=ni(r,b=>({x:b.x+(p??0),y:b.y+(g??0)}));return n=Cm(M),o=Array.from(n.keys()),p!==void 0&&Jg(o,(b,T)=>{if(x(p,C[T])){const I={x:w[T],ys:[]};I.ys.push(...n.get(b)),I.ys.push(...Array.from(l.get(b)??[])),this.toDrawVLines.push(I)}}),g!==void 0&&(i=_m(M),a=Array.from(i.keys()),Jg(a,(b,T)=>{if(x(g,y[T])){const I={y:P[T],xs:[]};I.xs.push(...i.get(b)),I.xs.push(...Array.from(c.get(b)??[])),this.toDrawHLines.push(I)}})),{offsetX:p??0,offsetY:g??0}}drawRefLine(e){e.save();const r=this.editor.setting.get("refLineStroke");e.fillStyle=r,e.strokeStyle=r,e.lineWidth=this.editor.setting.get("refLineStrokeWidth");const n=new Set,o=this.editor.setting.get("refLinePointSize");this.drawVerticalLines(e,o,n),this.drawHorizontalLines(e,o,n),e.restore()}drawVerticalLines(e,r,n){for(const o of this.toDrawVLines){let i=1/0,a=-1/0;const{x:l}=this.editor.sceneCoordsToViewport(o.x,0);for(const c of o.ys){const{y:h}=this.editor.sceneCoordsToViewport(0,c);i=Math.min(i,h),a=Math.max(a,h);const f=`${l},${h}`;n.has(f)||(n.add(f),xm(e,l,h,r))}au(e,l,i,l,a)}}drawHorizontalLines(e,r,n){for(const o of this.toDrawHLines){let i=1/0,a=-1/0;const{y:l}=this.editor.sceneCoordsToViewport(0,o.y);for(const c of o.xs){const{x:h}=this.editor.sceneCoordsToViewport(c,0);i=Math.min(i,h),a=Math.max(a,h);const f=`${h},${l}`;n.has(f)||(n.add(f),xm(e,h,l,r))}au(e,i,l,a,l)}}}const Pm=t=>{const e=[1,2,5,10,25,50,100,250,500,1e3,2500,5e3],r=50/t;for(let n=0,o=e.length;n<o;n++)if(e[n]>=r)return e[n];return e[0]};class rM{constructor(e){E(this,"visible",!1),this.editor=e}open(){this.visible=!0}close(){this.visible=!1}draw(){const e=this.editor.setting,r=this.editor.ctx,n=this.editor.viewportManager.getViewport(),{width:o,height:i}=n;r.save(),r.fillStyle=e.get("rulerBgColor"),r.fillRect(0,0,o,e.get("rulerWidth")),r.fillRect(0,0,e.get("rulerWidth"),i),this.drawXRuler(),this.drawYRuler(),r.fillStyle=e.get("rulerBgColor"),r.fillRect(0,0,e.get("rulerWidth"),e.get("rulerWidth")),r.strokeStyle=e.get("rulerStroke"),r.beginPath(),r.moveTo(0,e.get("rulerWidth")+.5),r.lineTo(o,e.get("rulerWidth")+.5),r.stroke(),r.closePath(),r.beginPath(),r.moveTo(e.get("rulerWidth")+.5,0),r.lineTo(e.get("rulerWidth")+.5,i),r.stroke(),r.closePath(),r.restore()}drawXRuler(){const e=this.editor.setting,r=this.editor.ctx,n=this.editor.zoomManager.getZoom(),o=this.editor.viewportManager.getViewport(),i=Pm(n),a=e.get("rulerWidth");let l=o.x+a/n;l=ie(l,i);const c=o.width;let{x:h}=this.editor.viewportCoordsToScene(c,0);h=ie(h,i),r.textAlign="center";const f=e.get("rulerWidth")-e.get("rulerMarkSize");for(;l<=h;){r.strokeStyle=e.get("rulerMarkStroke"),r.fillStyle=e.get("rulerMarkStroke");const p=Jl((l-o.x)*n);r.beginPath(),r.moveTo(p,f),r.lineTo(p,f+e.get("rulerMarkSize")),r.stroke(),r.closePath(),r.fillText(String(l),p,f-4),l+=i}}drawYRuler(){const e=this.editor.setting,r=this.editor.ctx,n=this.editor.zoomManager.getZoom(),o=this.editor.viewportManager.getViewport(),i=Pm(n),a=e.get("rulerWidth");let l=o.y+a/n;l=ie(l,i);const c=o.height;let h=o.y+c/n;h=ie(h,i);const f=e.get("rulerWidth")-e.get("rulerMarkSize");for(r.textAlign="center";l<=h;){r.fillStyle=e.get("rulerMarkStroke");const p=Jl((l-o.y)*n);r.beginPath(),r.moveTo(f,p),r.lineTo(f+e.get("rulerMarkSize"),p),r.stroke(),r.closePath(),Sm(r,-ho,f,p),r.fillText(String(l),f,p-3),Sm(r,ho,f,p),l+=i}}}class nM{constructor(e){this.editor=e}draw(){const e=this.editor.ctx,{x:r,y:n,width:o,height:i}=this.editor.viewportManager.getViewport(),a=this.editor.zoomManager.getZoom(),l=this.editor.setting,c=this.editor.setting.get("gridViewX"),h=this.editor.setting.get("gridViewY");let f=ie(r,c);const p=ie(r+o/a,c);for(;f<=p;){e.strokeStyle=l.get("pixelGridLineColor");const C=Jl((f-r)*a);e.beginPath(),e.moveTo(C,0),e.lineTo(C,i),e.stroke(),e.closePath(),f+=c}let g=ie(n,h);const w=ie(n+i/a,h);for(;g<=w;){e.strokeStyle=l.get("pixelGridLineColor");const C=Jl((g-n)*a);e.beginPath(),e.moveTo(0,C),e.lineTo(o,C),e.stroke(),e.closePath(),g+=h}}}const oM={[mt.Graph]:te,[mt.Rect]:$r,[mt.Ellipse]:Ra,[mt.Line]:np,[mt.Text]:oc,[mt.Path]:Je,[mt.RegularPolygon]:ip,[mt.Star]:lw,[mt.Frame]:Cs,[mt.Canvas]:ds,[mt.Document]:Fv};class iM{constructor(e){E(this,"selection",null),E(this,"eventEmitter",new ar),E(this,"grid"),E(this,"showBoxAndHandleWhenSelected",!0),E(this,"showSelectedGraphsOutline",!0),E(this,"highlightLayersOnHover",!0),E(this,"render",hT(()=>{const{viewportManager:r,canvasElement:n,ctx:o,setting:i}=this.editor,a=r.getViewport(),l=this.editor.zoomManager.getZoom(),c=this.editor.selectedElements;o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,n.width,n.height),o.save(),o.fillStyle=i.get("canvasBgColor"),o.fillRect(0,0,n.width,n.height),o.restore();const h=pd(),f=-a.x,p=-a.y;o.scale(h*l,h*l),o.translate(f,p);const g=this.editor.imgManager,w=this.editor.doc.getCanvas();if(w){const S=l<=1;o.save(),w.draw(o,g,S),o.restore()}if(o.save(),o.setTransform(1,0,0,1,0,0),o.scale(h,h),i.get("enablePixelGrid")&&l>=this.editor.setting.get("minPixelGridZoom")&&this.grid.draw(),this.highlightLayersOnHover&&i.get("highlightLayersOnHover")){const S=c.getHighlightedItem();S&&!c.hasItem(S)&&this.drawGraphsOutline([S],i.get("hoverOutlineStrokeWidth"),this.editor.setting.get("hoverOutlineStroke"))}const C=this.editor.selectedBox.updateBbox();if(this.showSelectedGraphsOutline&&(this.drawGraphsOutline(this.editor.selectedElements.getItems().filter(S=>S.isVisible()),i.get("selectedOutlineStrokeWidth"),this.editor.setting.get("hoverOutlineStroke")),this.editor.selectedBox.draw()),this.editor.pathEditor.isActive()){const S=this.editor.pathEditor.getPath();S&&this.drawGraphsOutline([S],i.get("selectedOutlineStrokeWidth"),this.editor.setting.get("pathLineStroke"))}if(this.showBoxAndHandleWhenSelected&&this.editor.controlHandleManager.draw(C),this.selection){o.save(),o.strokeStyle=i.get("selectionStroke"),o.fillStyle=i.get("selectionFill");const{x:S,y:P,width:y,height:m}=this.selection,{x,y:k}=this.editor.sceneCoordsToViewport(S,P),M=y*l,b=m*l;o.fillRect(x,k,M,b),o.strokeRect(x,k,M,b),o.restore()}this.editor.refLine.drawRefLine(o),i.get("enableRuler")&&this.editor.ruler.draw(),o.restore(),this.eventEmitter.emit("render")})),this.editor=e,this.grid=new nM(e)}addItems(e){for(const r of e)this.editor.doc.addGraphics(r)}drawGraphsOutline(e,r,n){const o=this.editor.ctx,i=pd(),a=this.editor.viewportManager.getViewport(),l=this.editor.zoomManager.getZoom(),c=-a.x,h=-a.y;o.save(),o.setTransform(1,0,0,1,0,0),o.scale(i*l,i*l),o.translate(c,h),r/=l;for(const f of e)o.save(),f.drawOutline(o,n,r),o.restore();o.restore()}setSelection(e){this.selection=Object.assign({},this.selection,e)}toObjects(){const e=this.editor.doc.getCanvas();return e?e.toObject().children??[]:[]}toJSON(){const e=this.editor.doc.getAllGraphicsArr().filter(n=>!n.isDeleted()).map(n=>n.toJSON()),r={appVersion:this.editor.appVersion,paperId:this.editor.paperId,data:e};return JSON.stringify(r)}createGraphicsArr(e){const r=[];for(const n of e){const o=n.type,i=oM[o];if(!i){console.error(`Unsupported graphics type "${n.type}", ignore it`);continue}r.push(new i(n,{doc:this.editor.doc}))}return r}initGraphicsTree(e){var r;const n=this.editor.doc.getCanvas();for(const o of e){if(o instanceof ds)continue;const i=o.getParent()??n;i&&i!==o&&i.insertChild(o,(r=o.attrs.parentIndex)==null?void 0:r.position)}}load(e,r){const n=this.createGraphicsArr(e);r||this.editor.doc.clear(),this.addItems(n),this.initGraphicsTree(n)}on(e,r){this.eventEmitter.on(e,r)}off(e,r){this.eventEmitter.off(e,r)}}class sM{constructor(e){E(this,"box",null),E(this,"eventEmitter",new ar),E(this,"_hover",!1),this.editor=e}isHover(){return this._hover}getBox(){return this.box?{...this.box}:null}updateBbox(){const e=this.editor.selectedElements,r=e.size();if(r>0)if(r===1){const n=e.getItems()[0],o=n.getSize();this.box={width:o.width,height:o.height,transform:n.getWorldTransform()}}else{const n=e.getBoundingRect();this.box={width:n.width,height:n.height,transform:[1,0,0,1,n.x,n.y]}}else this.box=null;return this.box}draw(){const e=this.box;if(!e)return;const r=this.editor.ctx,n=this.editor.setting.get("guideBBoxStroke"),o=this.editor.setting.get("guideBBoxStrokeWidth");r.save(),r.strokeStyle=n,r.lineWidth=o;const i=Ci({x:0,y:0,width:e.width,height:e.height},e.transform).map(a=>this.editor.sceneCoordsToViewport(a.x,a.y));r.beginPath(),r.moveTo(i[0].x,i[0].y);for(let a=1;a<i.length;a++)r.lineTo(i[a].x,i[a].y);r.closePath(),r.stroke(),r.restore()}hitTest(e){return this.box?Av(e,this.box,2/this.editor.zoomManager.getZoom()):!1}setHover(e){this._hover!==e&&(this._hover=e,this.eventEmitter.emit("hoverChange",e))}setHoverByPoint(e){const r=this.hitTest(e);this.setHover(r)}on(e,r){this.eventEmitter.on(e,r)}off(e,r){this.eventEmitter.off(e,r)}}class aM{constructor(e){E(this,"items",[]),E(this,"hoverItem",null),E(this,"highlightedItem",null),E(this,"eventEmitter",new ar),this.editor=e}setItems(e){const r=this.items;this.items=e,this.emitItemsChangeIfChanged(r,e)}getItems({excludeLocked:e=!1}={}){return e?this.items.filter(r=>!r.isLock()):[...this.items]}getIdSet(){return new Set(this.items.map(e=>e.attrs.id))}setItemsById(e){const r=this.editor.doc.getGraphicsArrByIds(e);r.length===0?console.warn("can not find element by id"):this.setItems(r)}isAllLocked(){return this.items.every(e=>e.isLock())}hasItem(e){return this.items.includes(e)}clear(){this.hoverItem&&this.items.includes(this.hoverItem)&&this.setHoverItem(null),this.setItems([])}toggleItems(e){const r=this.items,n=[];for(let o=0,i=r.length;o<i;o++){const a=r[o],l=e.indexOf(a);l===-1?n.push(a):e.splice(l,1)}n.push(...e),this.items=n,this.emitItemsChangeIfChanged(r,n)}emitItemsChangeIfChanged(e,r){Z_(e,r)||this.eventEmitter.emit("itemsChange",r)}toggleItemById(e,r){const n=this.editor.doc.getGraphicsById(e);if(!n){console.warn("can not find element by id");return}if(r!=null&&r.disableParentAndChildCoexist)if(lu(n))this.items=this.items.filter(o=>!o.containAncestor(e));else{const o=new Set(n.getParentIds());this.items=this.items.filter(i=>!o.has(i.attrs.id))}this.toggleItems([n])}size(){return this.items.length}isEmpty(){return this.items.length===0}getBoundingRect(){if(this.isEmpty())return null;const e=this.items.map(r=>r.getBbox());return ji(ei(e))}getRotation(){return this.items.length===0||this.items.length>1?0:this.items[0].getRotate()??0}getTransform(){return this.items.length===0||this.items.length>1?null:this.items[0].attrs.transform}on(e,r){this.eventEmitter.on(e,r)}off(e,r){this.eventEmitter.off(e,r)}removeFromScene(){this.isEmpty()||(op(this.editor,this.items),this.clear(),this.editor.render())}selectAll(){var e,r;const n=((r=(e=this.items[0])==null?void 0:e.getParent)==null?void 0:r.call(e))??this.editor.doc.getCurrCanvas();for(let o=1;o<this.items.length;o++)if(n!==this.items[o].getParent())return;this.setItems(n.getChildren().filter(o=>!o.isLock()))}setHoverItem(e){const r=this.hoverItem;this.hoverItem=e,this.setHighlightedItem(e),r!==e&&this.eventEmitter.emit("hoverItemChange",e,this.hoverItem)}getHoverItem(){return this.hoverItem}setHighlightedItem(e){const r=this.highlightedItem;this.highlightedItem=e,r!==e&&this.eventEmitter.emit("highlightedItemChange",e,this.highlightedItem)}getHighlightedItem(){return this.highlightedItem}getParentIdSet(){return Yo(this.items)}}class lM{constructor(){E(this,"eventEmitter",new ar),E(this,"value",{canvasBgColor:"#f4f4f4",firstStroke:{type:ut.Solid,attrs:{r:0,g:0,b:0,a:1}},strokeWidth:1,firstFill:{type:ut.Solid,attrs:{r:217,g:217,b:217,a:1}},addedPaint:{type:ut.Solid,attrs:{r:0,g:0,b:0,a:.2}},defaultStarInnerScale:.3819660246372223,guideBBoxStroke:"#1592fe",guideBBoxStrokeWidth:1.2,selectionStroke:"#0f8eff",selectionFill:"#0f8eff33",selectionMode:"intersect",selectionHitPadding:4,highlightLayersOnHover:!0,hoverOutlineStrokeWidth:2,hoverOutlineStroke:"#1592fe",selectedOutlineStrokeWidth:1,handleStroke:"#1592fe",handleFill:"#fcfcfc",handleStrokeWidth:2,handleSize:7,neswHandleWidth:10,defaultFontSize:12,textFill:[{type:ut.Solid,attrs:{r:0,g:0,b:0,a:1}}],lockRotation:Math.PI/12,zoomStep:.2325,zoomMin:.015625,zoomMax:256,zoomLevels:[.015625,.03125,.0625,.125,.25,.5,1,2,4,8,16,32,64,128,256],drawGraphDefaultWidth:100,drawGraphDefaultHeight:100,enableRuler:!0,minStepInViewport:50,rulerBgColor:"#fff",rulerStroke:"#e6e6e6",rulerMarkStroke:"#c1c1c1",rulerWidth:20,rulerMarkSize:4,enablePixelGrid:!0,snapToGrid:!0,minPixelGridZoom:8,pixelGridLineColor:"#cccccc55",gridViewX:1,gridViewY:1,gridSnapX:1,gridSnapY:1,dragBlockStep:4,offsetX:0,offsetY:0,zoomToFixPadding:32,invertZoomDirection:!1,smallNudge:1,bigNudge:10,moveElementsDelay:500,refLineTolerance:4,refLineStroke:"#f14f30ee",refLineStrokeWidth:1,refLinePointSize:5,keepToolSelectedAfterUse:!1,pencilCurveFitTolerance:1,pathLineStroke:"#a4a4a4",angleBase:{x:0,y:-1},flipObjectsWhileResizing:!0,continueClickMaxGap:350,continueClickDistanceTol:5})}toggle(e){const r=this.value[e];typeof r=="boolean"?this.set(e,!r):console.warn(`toggle ${e} failed, value is not boolean`)}set(e,r){this.value[e]=r,this.eventEmitter.emit("update",this.getAttrs())}get(e){return this.value[e]}getAttrs(){return{...this.value}}on(e,r){this.eventEmitter.on(e,r)}off(e,r){this.eventEmitter.off(e,r)}}class uM{constructor(e){E(this,"textarea"),E(this,"x",-1),E(this,"y",-1),E(this,"textGraph",null),this.editor=e,this.textarea=document.createElement("input"),this.setStyle(),this.inactive(),this.bindEvent(),e.containerElement.appendChild(this.textarea)}active(e){const{textGraph:r,pos:n}=e;if(r){this.textGraph=r;const l=this.editor.sceneCoordsToViewport(r.getX(),r.getY());this.x=l.x,this.y=l.y}else if(n)this.x=n.x,this.y=n.y;else{console.error("invalid params",e);return}this.editor.controlHandleManager.enableTransformControl=!1;let o="";r&&(r.noRender=!0,this.textGraph=r,o=r.attrs.content);const i=this.editor.zoomManager.getZoom(),a=this.editor.setting.get("defaultFontSize")*i;this.initTextarea(a,o)}inactive(){this.editor.controlHandleManager&&(this.editor.controlHandleManager.enableTransformControl=!0),this.textarea.style.display="none",this.textarea.value="",this.textGraph&&(this.textGraph.noRender=!1,this.textGraph=null)}setStyle(){const e={background:"transparent",border:"none",outline:"none",resize:"none",padding:"0",fontFamily:"sans-serif",lineHeight:"1",position:"absolute",overflow:"hidden",width:"240px",zIndex:"20"};Object.assign(this.textarea.style,e)}bindEvent(){this.textarea.addEventListener("keydown",e=>{e.key==="Escape"&&this.inactive()}),this.textarea.addEventListener("blur",()=>{this.textGraph?this.updateTextGraph():this.createTextGraph(),this.inactive()})}updateTextGraph(){const e=this.textGraph;if(!e)return;if(!this.textarea.value){op(this.editor,[e]);return}const r=e.attrs.content,n=this.textarea.value;r!==n&&(e.updateAttrs({content:n}),this.editor.commandManager.pushCommand(new yo("update text content",[e],{content:n},[{content:r}])))}createTextGraph(){if(!this.textarea.value)return;const e=this.editor.viewportCoordsToScene(this.x,this.y,this.editor.setting.get("snapToGrid")),r=new oc({objectName:"",content:this.textarea.value,autoFit:!0,fontSize:this.editor.setting.get("defaultFontSize"),height:this.editor.setting.get("defaultFontSize"),fill:tt(this.editor.setting.get("textFill"))},{advancedAttrs:e,doc:this.editor.doc});this.editor.doc.getCurrCanvas().insertChild(r),this.editor.sceneGraph.addItems([r]),this.editor.setting.get("keepToolSelectedAfterUse")||(this.editor.selectedElements.setItems([r]),this.editor.render()),this.editor.commandManager.pushCommand(new Qu("draw text",this.editor,[r]))}initTextarea(e,r){const n=this.textarea,o=e+"px",i={left:this.x+"px",top:this.y+"px",height:o,fontSize:o,display:"block"};Object.assign(n.style,i),n.value=r,n.select(),n.focus()}isActive(){return this.textarea.style.display!=="none"}getText(){return this.textGraph}destroy(){this.textarea.remove()}}class cM{constructor(e){E(this,"scrollX",0),E(this,"scrollY",0),E(this,"eventEmitter",new ar),this.editor=e}getViewport(){return{x:this.scrollX,y:this.scrollY,width:parseFloat(this.editor.canvasElement.style.width),height:parseFloat(this.editor.canvasElement.style.height)}}setViewport({x:e,y:r,width:n,height:o}){const i=this.scrollX,a=this.scrollY,l=pd();e!==void 0&&(this.scrollX=e),r!==void 0&&(this.scrollY=r),n!==void 0&&(this.editor.canvasElement.width=n*l,this.editor.canvasElement.style.width=n+"px"),o!==void 0&&(this.editor.canvasElement.height=o*l,this.editor.canvasElement.style.height=o+"px"),(i!==e||a!==r)&&this.eventEmitter.emit("xOrYChange",e,r)}getCenter(){const{x:e,y:r,width:n,height:o}=this.getViewport(),i=this.editor.zoomManager.getZoom();return{x:e+n/2/i,y:r+o/2/i}}translate(e,r){this.scrollX+=e,this.scrollY+=r,this.eventEmitter.emit("xOrYChange",this.scrollX,this.scrollY)}getBbox(){const{x:e,y:r,width:n,height:o}=this.getViewport(),i=this.editor.zoomManager.getZoom();return{minX:e,minY:r,maxX:e+n/i,maxY:r+o/i}}on(e,r){this.eventEmitter.on(e,r)}off(e,r){this.eventEmitter.off(e,r)}}class hM{constructor(e){E(this,"zoom",1),E(this,"eventEmitter",new ar),this.editor=e}getZoom(){return this.zoom}setZoom(e){const r=this.zoom,n=this.editor.setting.get("zoomMax");e>n&&(e=n);const o=this.editor.setting.get("zoomMin");e<o&&(e=o),this.zoom=e,Promise.resolve().then(()=>{this.eventEmitter.emit("zoomChange",e,r)})}setZoomAndUpdateViewport(e){const r=this.zoom;this.setZoom(e),this.adjustScroll(r)}zoomIn(e){const r=this.zoom;let n;if(e!=null&&e.isLevelZoom){const o=this.editor.setting.get("zoomLevels"),[,i]=Im(o,r);n=i}else{const o=e!=null&&e.deltaY?this.deltaYToZoomStep(e.deltaY):this.editor.setting.get("zoomStep");n=Math.min(r*(1+o),this.editor.setting.get("zoomMax"))}this.setZoom(n),this.adjustScroll(r,e==null?void 0:e.center)}zoomOut(e){const r=this.zoom;let n;if(e!=null&&e.isLevelZoom){const o=this.editor.setting.get("zoomLevels"),[i]=Im(o,r);n=i}else{const o=e!=null&&e.deltaY?this.deltaYToZoomStep(e.deltaY):this.editor.setting.get("zoomStep");n=Math.max(r/(1+o),this.editor.setting.get("zoomMin"))}this.setZoom(n),this.adjustScroll(r,e==null?void 0:e.center)}deltaYToZoomStep(e){return Math.max(.05,.12937973*Math.log(Math.abs(e))-.33227472)}reset(){this.setZoom(1);const e=this.editor.viewportManager,r=e.getViewport();e.setViewport({x:-r.width/2,y:-r.height/2})}zoomRectToFit(e,r){const n=this.editor.setting.get("zoomToFixPadding"),o=this.editor.viewportManager.getViewport();let i=o.height-n*2;i<=0&&(i=o.height);let a=o.width-n*2;a<=0&&(a=o.width);let l;const c=a/i,h=e.width/e.height;c>h?l=i/e.height:l=a/e.width,r&&l>r&&(l=r);const f=e.x-(o.width/l-e.width)/2,p=e.y-(o.height/l-e.height)/2;this.setZoom(l),this.editor.viewportManager.setViewport({x:f,y:p})}zoomToSelection(){const e=this.editor.selectedElements.getBoundingRect();e?this.zoomRectToFit(e):this.zoomToFit()}zoomToFit(e){const r=this.editor.getCanvasBbox();if(!r){this.reset();return}this.zoomRectToFit(ji(r),e)}getCanvasCenter(){const{width:e,height:r}=this.editor.viewportManager.getViewport();return{x:e/2,y:r/2}}adjustScroll(e,r){const n=this.editor.viewportManager,o=this.zoom,{x:i,y:a}=n.getViewport();r||(r=this.getCanvasCenter());const{x:l,y:c}=mv(r.x,r.y,e,i,a),h=l-r.x/o,f=c-r.y/o;n.setViewport({x:h,y:f})}on(e,r){this.eventEmitter.on(e,r)}off(e,r){this.eventEmitter.off(e,r)}}const Im=(t,e)=>{let r=0,n=t.length-1;for(;r<=n;){const o=Math.floor((r+n)/2);if(t[o]===e){n=o-1,r=o+1;break}else t[o]<e?r=o+1:n=o-1}return n<0&&(n=0),r>=t.length&&(r=t.length-1),[t[n],t[r]]};class dM{constructor(e){E(this,"containerElement"),E(this,"canvasElement"),E(this,"ctx"),E(this,"appVersion","suika-editor_0.0.2"),E(this,"paperId"),E(this,"emitter",new ar),E(this,"doc"),E(this,"sceneGraph"),E(this,"controlHandleManager"),E(this,"setting"),E(this,"viewportManager"),E(this,"canvasDragger"),E(this,"toolManager"),E(this,"commandManager"),E(this,"zoomManager"),E(this,"imgManager"),E(this,"cursorManager"),E(this,"mouseEventManager"),E(this,"keybindingManager"),E(this,"hostEventManager"),E(this,"clipboard"),E(this,"selectedElements"),E(this,"selectedBox"),E(this,"ruler"),E(this,"refLine"),E(this,"textEditor"),E(this,"pathEditor"),E(this,"perfMonitor"),this.containerElement=e.containerElement,this.canvasElement=document.createElement("canvas"),this.containerElement.appendChild(this.canvasElement),this.ctx=this.canvasElement.getContext("2d"),this.setting=new lM,e.offsetX&&this.setting.set("offsetX",e.offsetX),e.offsetY&&this.setting.set("offsetY",e.offsetY),this.mouseEventManager=new FT(this),this.keybindingManager=new GT(this),this.keybindingManager.bindEvent(),this.doc=new Fv({id:"0-0",objectName:"Document",width:0,height:0}),this.sceneGraph=new iM(this),this.cursorManager=new ET(this),this.viewportManager=new cM(this),this.commandManager=new L5(this),this.zoomManager=new hM(this),this.imgManager=new WT,this.selectedElements=new aM(this),this.selectedBox=new sM(this),this.ruler=new rM(this),this.refLine=new eM(this),this.textEditor=new uM(this),this.pathEditor=new sp(this),this.controlHandleManager=new fT(this),this.controlHandleManager.bindEvents(),this.hostEventManager=new zT(this),this.hostEventManager.bindHotkeys(),this.canvasDragger=new sT(this),this.toolManager=new ZT(this),this.clipboard=new vT(this),this.clipboard.bindEvents(),this.imgManager.on("added",()=>{this.render()}),this.paperId=ya();const r=new ds({objectName:"Canvas",width:0,height:0},{doc:this.doc});this.sceneGraph.addItems([r]),this.viewportManager.setViewport({x:-e.width/2,y:-e.height/2,width:e.width,height:e.height}),this.perfMonitor=new tM,e.showPerfMonitor&&this.perfMonitor.start(this.containerElement),Promise.resolve().then(()=>{this.render()})}setContents(e){if(this.sceneGraph.load(e.data),this.commandManager.clearRecords(),this.paperId=e.paperId??ya(),!this.doc.getCurrCanvas()){const r=new ds({objectName:"Canvas",width:0,height:0},{doc:this.doc});this.sceneGraph.addItems([r])}this.zoomManager.zoomToFit(1)}destroy(){this.containerElement.removeChild(this.canvasElement),this.textEditor.destroy(),this.keybindingManager.destroy(),this.hostEventManager.destroy(),this.clipboard.destroy(),this.canvasDragger.destroy(),this.toolManager.unbindEvent(),this.toolManager.destroy(),this.perfMonitor.destroy(),this.controlHandleManager.unbindEvents(),this.emitter.emit("destroy")}setCursor(e){this.cursorManager.setCursor(e)}getCursor(){return this.cursorManager.getCursor()}viewportCoordsToScene(e,r,n=!1){const o=this.zoomManager.getZoom(),{x:i,y:a}=this.viewportManager.getViewport();return mv(e,r,o,i,a,n)}sceneCoordsToViewport(e,r){const n=this.zoomManager.getZoom(),{x:o,y:i}=this.viewportManager.getViewport();return Y_(e,r,n,o,i)}viewportSizeToScene(e){const r=this.zoomManager.getZoom();return e/r}sceneSizeToViewport(e){const r=this.zoomManager.getZoom();return e*r}getCursorXY(e){return{x:e.clientX-this.setting.get("offsetX"),y:e.clientY-this.setting.get("offsetY")}}getSceneCursorXY(e,r=!1){const{x:n,y:o}=this.getCursorXY(e);return this.viewportCoordsToScene(n,o,r)}render(){this.sceneGraph.render()}getCanvasBbox(){const e=this.doc.getCurrCanvas().getChildren().filter(r=>r.isVisible());return e.length===0?null:ei(e.map(r=>r.getBbox()))}applyChanges(e){const r=[];for(const[,n]of e.added)r.push(n);this.sceneGraph.load(r,!0);for(const[n,o]of e.update){const i=this.doc.getGraphicsById(n);if(!i){console.warn(`graphics ${n} is not exist`);continue}i.updateAttrs(o)}for(const n of e.deleted){const o=this.doc.getGraphicsById(n);if(!o){console.warn(`graphics ${n} is not exist`);continue}o.setDeleted(!0),o.removeFromParent()}}on(e,r){this.emitter.on(e,r)}off(e,r){this.emitter.off(e,r)}}const Oa=A.createContext(null),Qc="suika-paper";class fM{constructor(e){this.editor=e,this.listener=TE(()=>{this.save()},10);const r=this.load();r&&(r.appVersion!==e.appVersion?confirm("编辑器版本和图纸版本不兼容，将清空本地缓存 (version not match, to clear data)")&&this.clear():e.setContents(r)),this.autoSave(),this.editor.on("destroy",()=>this.stopAutoSave())}autoSave(){this.editor.commandManager.on("change",this.listener)}stopAutoSave(){this.editor.commandManager.off("change",this.listener)}save(){localStorage.setItem(Qc,this.editor.sceneGraph.toJSON())}clear(){localStorage.removeItem(Qc)}load(){const e=localStorage.getItem(Qc);return e?JSON.parse(e):null}}K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 12V17H12V12H17V11H12V6H11V11H6V12H11Z"})}));K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{d:"M5 19L21 19"}),_.jsx("line",{y1:"-1.5",x2:"12",y2:"-1.5",transform:"matrix(4.37114e-08 1 1 -4.37114e-08 12 5)",strokeWidth:"3"}),_.jsx("path",{d:"M15.5 9L15.5 17",strokeWidth:"3"})]}));K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{d:"M12 4L12 20"}),_.jsx("line",{x1:"6",y1:"9.5",x2:"18",y2:"9.5",strokeWidth:"3"}),_.jsx("line",{x1:"8",y1:"14.5",x2:"16",y2:"14.5",strokeWidth:"3"})]}));K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",children:[_.jsx("path",{d:"M4 4L4 20"}),_.jsx("line",{x1:"6",y1:"9.5",x2:"18",y2:"9.5",strokeWidth:"3"}),_.jsx("line",{x1:"6",y1:"14.5",x2:"14",y2:"14.5",strokeWidth:"3"})]}));K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{d:"M20 4L20 20"}),_.jsx("line",{x1:"6",y1:"9.5",x2:"18",y2:"9.5",strokeWidth:"3"}),_.jsx("line",{x1:"10",y1:"14.5",x2:"18",y2:"14.5",strokeWidth:"3"})]}));K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{d:"M3 5L19 5"}),_.jsx("line",{y1:"-1.5",x2:"12",y2:"-1.5",transform:"matrix(4.37114e-08 1 1 -4.37114e-08 10 7)",strokeWidth:"3"}),_.jsx("line",{x1:"13.5",y1:"7",x2:"13.5",y2:"15",strokeWidth:"3"})]}));K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{d:"M4 12L20 12"}),_.jsx("line",{x1:"9.5",y1:"18",x2:"9.5",y2:"6",strokeWidth:"3"}),_.jsx("path",{d:"M14.5 16L14.5 8",strokeWidth:"3"})]}));const pM=K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M7 10L12 15L17 10"})})),gM=K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M8 12L11 16L18 7"})}));K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M7 7L17 17M7 17L17 7",stroke:"#333333"})}));const mM=K.memo(()=>_.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("rect",{x:"3.08865",y:"7.49549",width:"1",height:"2.5",rx:"0.2",transform:"rotate(38.5717 3.08865 7.49549)",fill:"currentColor"}),_.jsx("rect",{width:"1",height:"2.5",rx:"0.2",transform:"matrix(-0.781828 0.623494 0.623494 0.781828 12.6592 7.49549)",fill:"currentColor"}),_.jsx("rect",{x:"6.08005",y:"9.07446",width:"1",height:"2.5",rx:"0.2",transform:"rotate(21.1013 6.08005 9.07446)",fill:"currentColor"}),_.jsx("rect",{width:"1",height:"2.5",rx:"0.2",transform:"matrix(-0.932945 0.360019 0.360019 0.932945 10 9.07446)",fill:"currentColor"}),_.jsx("path",{d:"M2 6.42055C2 6.42055 4 9.42055 8 9.42055C12 9.42055 14 6.42055 14 6.42055",stroke:"currentColor",strokeLinejoin:"round"})]}));K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("line",{x1:"5",y1:"5.5",x2:"15",y2:"5.5",stroke:"#333333"}),_.jsx("line",{x1:"10",y1:"4",x2:"10",y2:"5",stroke:"#333333"}),_.jsx("line",{x1:"13.3947",y1:"5.30697",x2:"6.39468",y2:"14.307",stroke:"#333333"}),_.jsx("line",{x1:"7.35355",y1:"6.64645",x2:"12.3536",y2:"11.6464",stroke:"#333333"}),_.jsx("path",{d:"M11.5 18L15.5629 9.75718L19.5 18",stroke:"#333333",strokeLinejoin:"bevel"}),_.jsx("line",{x1:"13",y1:"14.2098",x2:"18",y2:"14.2098",stroke:"#333333"})]}));K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("line",{x1:"4",y1:"6.5",x2:"20",y2:"6.5"}),_.jsx("line",{x1:"4",y1:"16",x2:"20",y2:"16",strokeWidth:"4"}),_.jsx("line",{x1:"4",y1:"10.5",x2:"20",y2:"10.5",strokeWidth:"3"})]}));const yM=K.memo(()=>_.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("rect",{x:"4",y:"7",width:"7",height:"5.77935",rx:"0.4",fill:"currentColor"}),_.jsx("path",{d:"M5.5 7.5V5.5C5.5 4.39543 6.39543 3.5 7.5 3.5C8.60457 3.5 9.5 4.39543 9.5 5.5V7.5",stroke:"currentColor"})]})),vM=K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{d:"M8.0393 16.8461C7.11636 15.6636 5.60665 4.7907 5.60665 4.7907C5.60665 4.7907 15.7876 8.89536 16.7105 10.0778C17.6335 11.2602 15.9869 14.839 15.9869 14.839L18.2586 17.7494L15.1054 20.2106L12.8337 17.3002C12.8337 17.3002 8.96225 18.0285 8.0393 16.8461Z",stroke:"currentColor"}),_.jsx("path",{d:"M5.60666 4.7907L11.7596 12.6736",stroke:"currentColor"}),_.jsx("circle",{cx:"11.8572",cy:"12.7987",r:"1.25",transform:"rotate(-37.9736 11.8572 12.7987)",fill:"currentColor"})]})),wM=K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M17.6992 9.30076L8.7158 18.2842C8.66927 18.3307 8.61198 18.3651 8.54902 18.3842L5.3017 19.3687C4.99583 19.4615 4.71011 19.1757 4.80285 18.8699L5.78742 15.6226C5.80651 15.5596 5.84084 15.5023 5.88737 15.4558L14.8708 6.47233M17.6992 9.30076L19.8593 7.14071C20.0155 6.9845 20.0155 6.73123 19.8593 6.57502L17.5966 4.31228C17.4403 4.15607 17.1871 4.15607 17.0309 4.31228L14.8708 6.47233M17.6992 9.30076L14.8708 6.47233",stroke:"currentColor"})})),$m=K.memo(()=>_.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("circle",{cx:"8",cy:"8",r:"1.5",fill:"currentColor"})}));K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 12H6V11H17V12Z"})}));K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M9.5 7.5L14.5 12.5L9.5 17.5"})}));const xM=K.memo(()=>_.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{d:"M8 5C4 5 2 8 2 8C2 8 4 11 8 11C12 11 14 8 14 8C14 8 12 5 8 5Z",stroke:"currentColor",strokeLinejoin:"round"}),_.jsx("circle",{cx:"8",cy:"8",r:"1.75",fill:"currentColor"})]})),SM=K.memo(()=>_.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M10.8183 5.3029L8.1715 9.71417C8.09382 9.84364 7.90618 9.84364 7.8285 9.71417L5.18174 5.3029C5.10176 5.16959 5.19778 5 5.35324 5H10.6468C10.8022 5 10.8982 5.16959 10.8183 5.3029Z",fill:"currentColor"})}));K.memo(()=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:_.jsx("path",{fillRule:"evenodd",transform:"translate(0.25 0.25)  rotate(0 7.75 7.556366182551985)",d:"M5.00688 12.0551C4.91688 12.0551 4.84688 12.1051 4.84688 12.1651C4.84688 12.2451 4.91688 12.2951 5.01688 12.2851C5.11688 12.2851 5.18688 12.2351 5.18688 12.1651C5.18688 12.0951 5.10688 12.0451 5.00688 12.0551Z M4.34812 12.1793C4.42812 12.2093 4.51812 12.1793 4.53812 12.1193C4.55812 12.0593 4.49812 11.9893 4.40812 11.9593C4.32812 11.9393 4.23812 11.9693 4.20812 12.0293C4.18812 12.0893 4.25812 12.1593 4.34812 12.1793Z M5.44907 12.1237C5.45907 12.1937 5.53907 12.2337 5.63907 12.2137C5.72907 12.1837 5.78907 12.1237 5.77907 12.0637C5.76907 12.0037 5.68907 11.9637 5.58907 11.9737C5.49907 11.9937 5.43907 12.0537 5.44907 12.1237Z M7.65 0C3.32 0 0 3.29 0 7.63C0 11.09 2.18 14.06 5.3 15.1C5.7 15.17 5.84 14.93 5.84 14.72C5.84 14.53 5.83 13.46 5.83 12.8C5.83 12.8 3.64 13.27 3.18 11.87C3.18 11.87 2.83 10.96 2.31 10.73C2.31 10.73 1.6 10.24 2.36 10.25C2.36 10.25 3.14 10.31 3.57 11.05C4.25 12.26 5.4 11.91 5.85 11.71C5.92 11.21 6.12 10.86 6.35 10.65C4.6 10.46 2.84 10.21 2.84 7.2C2.84 6.34 3.08 5.91 3.58 5.36C3.49 5.16 3.23 4.32 3.66 3.24C4.31 3.03 5.81 4.08 5.81 4.08C6.44 3.91 7.11 3.82 7.78 3.82C8.44 3.82 9.11 3.91 9.74 4.08C9.74 4.08 11.24 3.03 11.89 3.24C12.32 4.32 12.06 5.16 11.98 5.36C12.48 5.91 12.78 6.34 12.78 7.2C12.78 10.22 10.94 10.46 9.19 10.65C9.48 10.9 9.73 11.37 9.73 12.1C9.73 13.16 9.72 14.46 9.72 14.72C9.72 14.92 9.86 15.17 10.26 15.09C13.38 14.06 15.5 11.09 15.5 7.63C15.5 3.29 11.98 0 7.65 0Z M3.06231 10.9369C3.11231 10.9869 3.18231 11.0169 3.22231 10.9669C3.26231 10.9369 3.25231 10.8669 3.20231 10.8069C3.15231 10.7569 3.08231 10.7369 3.04231 10.7769C2.99231 10.8069 3.00231 10.8769 3.06231 10.9369Z M2.77304 10.6435C2.82304 10.6735 2.88304 10.6735 2.90304 10.6235C2.93304 10.5835 2.89304 10.5335 2.83304 10.5035C2.77304 10.4835 2.72304 10.4935 2.70304 10.5235C2.68304 10.5635 2.71304 10.6135 2.77304 10.6435Z M3.75443 11.8362C3.82443 11.9062 3.91443 11.9162 3.95443 11.8662C3.99443 11.8262 3.97443 11.7262 3.91443 11.6662C3.84443 11.5962 3.75443 11.5862 3.71443 11.6362C3.66443 11.6762 3.68443 11.7762 3.75443 11.8362Z M3.35875 11.3601C3.40875 11.4301 3.48875 11.4701 3.52875 11.4301C3.57875 11.3901 3.57875 11.3101 3.52875 11.2401C3.48875 11.1701 3.40875 11.1401 3.35875 11.1801C3.30875 11.2101 3.30875 11.2901 3.35875 11.3601Z "})}));const EM=K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("circle",{cx:"12",cy:"12",r:"7.5"})})),CM=K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M18.7717 7.39806H17.7548C17.5361 7.39806 17.3568 7.56657 17.3568 7.7767V11.3197H16.6395V6.01456C16.6395 5.55479 16.248 5.18239 15.7647 5.18239H14.8943C14.6712 5.18239 14.4876 5.35506 14.4876 5.56935V11.3197H13.7703V4.89528C13.7703 4.67684 13.5844 4.5 13.3547 4.5H12.4078C11.9726 4.5 11.6205 4.83495 11.6205 5.24896V11.3176H10.9032V6.4785C10.9032 6.23301 10.4364 6.01456 10.1784 6.01456L9.53862 6.03329C9.10343 6.03329 8.75352 6.36824 8.75352 6.78017V15.7698L5.939 13.8495C5.53005 13.5915 4.97676 13.7309 4.75589 14.1491C4.75589 14.1491 4.58968 14.4695 4.53064 14.5756C4.47378 14.6817 4.50221 14.7816 4.56563 14.8523C4.6203 14.9126 7.42171 18.0333 8.34895 19.0527C8.61794 19.3481 9.12092 19.5 9.55393 19.5H18.085C18.8679 19.5 19.384 18.8967 19.384 18.154L19.4999 11.3197V8.09709C19.5065 7.71013 19.1784 7.39806 18.7717 7.39806Z"})})),_M=K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.3915 5.35404L5.35308 19.354L4.64694 18.646L18.6853 4.64597L19.3915 5.35404Z"})})),bM=K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 12H6V11H17V12Z"}),_.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 16H6V15H17V16Z"}),_.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 8H6V7H17V8Z"})]})),kM=K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M12 5L19.7942 18.5H4.20577L12 5Z",stroke:"currentColor",strokeWidth:"1"})})),TM=K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("rect",{x:"4.5",y:"6.5",width:"16",height:"11",rx:"0.5"})})),jm=K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M14.0855 13.0738L13.9614 13.1256L13.8801 13.2327L9.24626 19.3343L5.72813 4.87748L19.1707 10.9487L14.0855 13.0738Z",stroke:"currentColor"})})),MM=K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M12 4L13.7961 9.52786H19.6085L14.9062 12.9443L16.7023 18.4721L12 15.0557L7.29772 18.4721L9.09383 12.9443L4.39155 9.52786H10.2039L12 4Z",stroke:"currentColor"})})),PM=K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("rect",{x:"11",y:"4",width:"1",height:"16"}),_.jsx("rect",{x:"5",y:"4",width:"13",height:"1"}),_.jsx("rect",{x:"5",y:"5",width:"1",height:"3"}),_.jsx("rect",{x:"17",y:"5",width:"1",height:"3"}),_.jsx("rect",{x:"8",y:"19",width:"7",height:"1"})]})),IM=K.memo(()=>_.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("rect",{x:"4",y:"7.5",width:"7",height:"5.77935",rx:"0.4",fill:"currentColor"}),_.jsx("path",{d:"M9.5 7.5V5.5C9.5 4.39543 10.3954 3.5 11.5 3.5C12.6046 3.5 13.5 4.39543 13.5 5.5V7",stroke:"currentColor"})]}));var $M=function(t){return typeof t=="function"};function Am(t,e){if(t===e)return!0;for(var r=0;r<t.length;r++)if(!Object.is(t[r],e[r]))return!1;return!0}function ww(t){var e=A.useRef(t);return e.current=t,e}var jM=function(t){var e=ww(t);A.useEffect(function(){return function(){e.current()}},[])},AM=!!(typeof window<"u"&&window.document&&window.document.createElement),LM=function(t){A.useEffect(function(){t==null||t()},[])};function ic(t,e){if(AM){if(!t)return e;var r;return $M(t)?r=t():"current"in t?r=t.current:r=t,r}}var RM=function(t){return t.every(function(e){var r=ic(e);if(!r)return!1;if(r.getRootNode()instanceof ShadowRoot)return!0})},OM=function(t){return t?t.getRootNode():document},DM=function(t){if(!t||!document.getRootNode)return document;var e=Array.isArray(t)?t:[t];return RM(e)?OM(ic(e[0])):document},BM=function(t){var e=function(r,n,o){var i=A.useRef(!1),a=A.useRef([]),l=A.useRef([]),c=A.useRef();t(function(){var h,f=Array.isArray(o)?o:[o],p=f.map(function(g){return ic(g)});if(!i.current){i.current=!0,a.current=p,l.current=n,c.current=r();return}(p.length!==a.current.length||!Am(p,a.current)||!Am(n,l.current))&&((h=c.current)===null||h===void 0||h.call(c),a.current=p,l.current=n,c.current=r())}),jM(function(){var h;(h=c.current)===null||h===void 0||h.call(c),i.current=!1})};return e},NM=BM(A.useEffect);function HM(t,e,r){r===void 0&&(r="click");var n=ww(t);NM(function(){var o=function(l){var c=Array.isArray(e)?e:[e];c.some(function(h){var f=ic(h);return!f||f.contains(l.target)})||n.current(l)},i=DM(e),a=Array.isArray(r)?r:[r];return a.forEach(function(l){return i.addEventListener(l,o)}),function(){a.forEach(function(l){return i.removeEventListener(l,o)})}},Array.isArray(r)?r:[r],e)}var xw={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var n=[],o=0;o<arguments.length;o++){var i=arguments[o];if(i){var a=typeof i;if(a==="string"||a==="number")n.push(i);else if(Array.isArray(i)){if(i.length){var l=r.apply(null,i);l&&n.push(l)}}else if(a==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){n.push(i.toString());continue}for(var c in i)e.call(i,c)&&i[c]&&n.push(c)}}}return n.join(" ")}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(xw);var zM=xw.exports;const sc=s0(zM),al=({onClick:t,children:e,suffix:r,check:n})=>_.jsxs("div",{className:"suika-action-item-wrap",onClick:t,children:[_.jsxs("div",{className:"suika-action-item",children:[_.jsx("div",{className:"suika-icon-box",children:n&&_.jsx(gM,{})}),e]}),r&&_.jsx("span",{children:r})]}),FM=({defaultValue:t,onChange:e})=>{const r=A.useRef(null),[n,o]=A.useState(t?`${String(Math.round(t*100))}%`:"");LM(()=>{r.current&&r.current.select()});const i=()=>{const a=parseInt(n);Number.isNaN(a)||e&&e(sE(a/100))};return _.jsx("input",{ref:r,value:n,className:"suika-zoom-input",onInput:a=>{const l=a.target.value.replace(/\s/g,"");o(l)},onKeyDown:a=>{a.key==="Enter"&&!a.nativeEvent.isComposing&&i()},onBlur:()=>i()})},WM=()=>{const t=A.useContext(Oa),[e,r]=A.useState(1),[n,o]=A.useState({}),[i,a]=A.useState(!1),l=A.useRef(null);return HM(()=>{a(!1)},l),A.useEffect(()=>{if(t){r(t.zoomManager.getZoom()),o(t.setting.getAttrs());const c=h=>{r(h)};return t.zoomManager.on("zoomChange",c),t.setting.on("update",h=>{o(h)}),()=>{t.zoomManager.off("zoomChange",c)}}},[t]),_.jsxs("div",{ref:l,className:"zoom-actions",children:[_.jsxs("div",{className:sc(["value",{active:i}]),onClick:()=>{a(!i)},children:[Math.round(e*100),"%",_.jsx(pM,{})]}),i&&_.jsxs("div",{className:"popover",children:[_.jsx("div",{className:"zoom-input-box",children:_.jsx(FM,{defaultValue:e,onChange:c=>{t==null||t.zoomManager.setZoomAndUpdateViewport(c),t==null||t.render()}})}),_.jsx("div",{className:"separator"}),[{id:"zoom.zoomIn",suffix:fo?"Ctrl++":"⌘+",action:()=>{t==null||t.zoomManager.zoomIn({isLevelZoom:!0})}},{id:"zoom.zoomOut",suffix:fo?"Ctrl+-":"⌘-",action:()=>{t==null||t.zoomManager.zoomOut({isLevelZoom:!0})}},{id:"zoom.zoomToFit",suffix:fo?"Shift+1":"⇧1",action:()=>{t==null||t.zoomManager.zoomToFit()}},{id:"zoom.zoomToSelection",suffix:fo?"Shift+2":"⇧2",action:()=>{t==null||t.zoomManager.zoomToSelection()}},{id:"zoom.zoomTo50",action:()=>{t==null||t.zoomManager.setZoomAndUpdateViewport(.5)}},{id:"zoom.zoomTo100",suffix:fo?"Ctrl+0":"⌘0",action:()=>{t==null||t.zoomManager.setZoomAndUpdateViewport(1)}},{id:"zoom.zoomTo200",action:()=>{t==null||t.zoomManager.setZoomAndUpdateViewport(2)}}].map(c=>_.jsx(al,{suffix:c.suffix,onClick:()=>{c.action(),t==null||t.render(),a(!1)},children:_.jsx(rl,{id:c.id})},c.id)),_.jsx("div",{className:"separator"}),_.jsx(al,{check:n.enablePixelGrid,suffix:fo?"Ctrl+'":"⌘'",onClick:()=>{if(t){const c=t.setting.get("enablePixelGrid");t.setting.set("enablePixelGrid",!c),t.render(),a(!1)}},children:_.jsx(rl,{id:"setting.grid.pixelGrid"})}),_.jsx(al,{check:n.snapToGrid,suffix:fo?"Ctrl+Shift+'":"⌘⇧'",onClick:()=>{if(t){const c=t.setting.get("snapToGrid");t.setting.set("snapToGrid",!c),t.render(),a(!1)}},children:_.jsx(rl,{id:"setting.grid.snapToPixelGrid"})}),_.jsx(al,{check:n.enableRuler,suffix:fo?"Shift+R":"⇧R",onClick:()=>{if(t){const c=t.setting.get("enableRuler");t.setting.set("enableRuler",!c),t.render(),a(!1)}},children:_.jsx(rl,{id:"setting.rulers"})})]})]})},GM=({value:t})=>_.jsx("div",{className:"suika-header-title",children:t}),UM=({style:t,children:e,onClick:r})=>_.jsx("button",{className:"sk-btn",style:t,onClick:()=>r(),children:e});var VM=Object.defineProperty,XM=(t,e,r)=>e in t?VM(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,KM=(t,e,r)=>(XM(t,typeof e!="symbol"?e+"":e,r),r);const YM=[];for(let t=0;t<256;++t)YM.push((t+256).toString(16).slice(1));typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);navigator.platform.toLowerCase().includes("win")||navigator.userAgent.includes("Windows");class ZM{constructor(){KM(this,"eventMap",{})}on(e,r){return this.eventMap[e]||(this.eventMap[e]=[]),this.eventMap[e].push(r),this}emit(e,...r){const n=this.eventMap[e];return!n||n.length===0?!1:(n.forEach(o=>{o(...r)}),!0)}off(e,r){return this.eventMap[e]&&(this.eventMap[e]=this.eventMap[e].filter(n=>n!==r)),this}}var Ut=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Md={},QM={get exports(){return Md},set exports(t){Md=t}};(function(t,e){var r=200,n="__lodash_hash_undefined__",o=9007199254740991,i="[object Arguments]",a="[object Array]",l="[object Boolean]",c="[object Date]",h="[object Error]",f="[object Function]",p="[object GeneratorFunction]",g="[object Map]",w="[object Number]",C="[object Object]",S="[object Promise]",P="[object RegExp]",y="[object Set]",m="[object String]",x="[object Symbol]",k="[object WeakMap]",M="[object ArrayBuffer]",b="[object DataView]",T="[object Float32Array]",I="[object Float64Array]",H="[object Int8Array]",R="[object Int16Array]",O="[object Int32Array]",F="[object Uint8Array]",N="[object Uint8ClampedArray]",V="[object Uint16Array]",Z="[object Uint32Array]",ct=/[\\^$.*+?()[\]{}|]/g,et=/\w*$/,D=/^\[object .+?Constructor\]$/,X=/^(?:0|[1-9]\d*)$/,j={};j[i]=j[a]=j[M]=j[b]=j[l]=j[c]=j[T]=j[I]=j[H]=j[R]=j[O]=j[g]=j[w]=j[C]=j[P]=j[y]=j[m]=j[x]=j[F]=j[N]=j[V]=j[Z]=!0,j[h]=j[f]=j[k]=!1;var dt=typeof Ut=="object"&&Ut&&Ut.Object===Object&&Ut,gt=typeof self=="object"&&self&&self.Object===Object&&self,it=dt||gt||Function("return this")(),zt=e&&!e.nodeType&&e,U=zt&&!0&&t&&!t.nodeType&&t,ne=U&&U.exports===zt;function Ze(s,u){return s.set(u[0],u[1]),s}function wt(s,u){return s.add(u),s}function lr(s,u){for(var d=-1,v=s?s.length:0;++d<v&&u(s[d],d,s)!==!1;);return s}function ur(s,u){for(var d=-1,v=u.length,L=s.length;++d<v;)s[L+d]=u[d];return s}function ke(s,u,d,v){var L=-1,$=s?s.length:0;for(v&&$&&(d=s[++L]);++L<$;)d=u(d,s[L],L,s);return d}function Te(s,u){for(var d=-1,v=Array(s);++d<s;)v[d]=u(d);return v}function cr(s,u){return s==null?void 0:s[u]}function Me(s){var u=!1;if(s!=null&&typeof s.toString!="function")try{u=!!(s+"")}catch{}return u}function hr(s){var u=-1,d=Array(s.size);return s.forEach(function(v,L){d[++u]=[L,v]}),d}function Pe(s,u){return function(d){return s(u(d))}}function dr(s){var u=-1,d=Array(s.size);return s.forEach(function(v){d[++u]=v}),d}var rn=Array.prototype,nn=Function.prototype,ae=Object.prototype,Ie=it["__core-js_shared__"],fr=function(){var s=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),pr=nn.toString,bt=ae.hasOwnProperty,le=ae.toString,on=RegExp("^"+pr.call(bt).replace(ct,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vt=ne?it.Buffer:void 0,ue=it.Symbol,$e=it.Uint8Array,yt=Pe(Object.getPrototypeOf,Object),gr=Object.create,mr=ae.propertyIsEnumerable,sn=rn.splice,je=Object.getOwnPropertySymbols,ce=Vt?Vt.isBuffer:void 0,yr=Pe(Object.keys,Object),he=St(it,"DataView"),Xt=St(it,"Map"),xt=St(it,"Promise"),de=St(it,"Set"),Ae=St(it,"WeakMap"),Kt=St(Object,"create"),Le=ht(he),Yt=ht(Xt),Re=ht(xt),Oe=ht(de),De=ht(Ae),Rt=ue?ue.prototype:void 0,vr=Rt?Rt.valueOf:void 0;function Pt(s){var u=-1,d=s?s.length:0;for(this.clear();++u<d;){var v=s[u];this.set(v[0],v[1])}}function an(){this.__data__=Kt?Kt(null):{}}function ln(s){return this.has(s)&&delete this.__data__[s]}function un(s){var u=this.__data__;if(Kt){var d=u[s];return d===n?void 0:d}return bt.call(u,s)?u[s]:void 0}function wr(s){var u=this.__data__;return Kt?u[s]!==void 0:bt.call(u,s)}function Be(s,u){var d=this.__data__;return d[s]=Kt&&u===void 0?n:u,this}Pt.prototype.clear=an,Pt.prototype.delete=ln,Pt.prototype.get=un,Pt.prototype.has=wr,Pt.prototype.set=Be;function rt(s){var u=-1,d=s?s.length:0;for(this.clear();++u<d;){var v=s[u];this.set(v[0],v[1])}}function cn(){this.__data__=[]}function hn(s){var u=this.__data__,d=pe(u,s);if(d<0)return!1;var v=u.length-1;return d==v?u.pop():sn.call(u,d,1),!0}function dn(s){var u=this.__data__,d=pe(u,s);return d<0?void 0:u[d][1]}function fn(s){return pe(this.__data__,s)>-1}function pn(s,u){var d=this.__data__,v=pe(d,s);return v<0?d.push([s,u]):d[v][1]=u,this}rt.prototype.clear=cn,rt.prototype.delete=hn,rt.prototype.get=dn,rt.prototype.has=fn,rt.prototype.set=pn;function st(s){var u=-1,d=s?s.length:0;for(this.clear();++u<d;){var v=s[u];this.set(v[0],v[1])}}function gn(){this.__data__={hash:new Pt,map:new(Xt||rt),string:new Pt}}function mn(s){return Qt(this,s).delete(s)}function yn(s){return Qt(this,s).get(s)}function vn(s){return Qt(this,s).has(s)}function wn(s,u){return Qt(this,s).set(s,u),this}st.prototype.clear=gn,st.prototype.delete=mn,st.prototype.get=yn,st.prototype.has=vn,st.prototype.set=wn;function ft(s){this.__data__=new rt(s)}function xn(){this.__data__=new rt}function Sn(s){return this.__data__.delete(s)}function En(s){return this.__data__.get(s)}function Cn(s){return this.__data__.has(s)}function _n(s,u){var d=this.__data__;if(d instanceof rt){var v=d.__data__;if(!Xt||v.length<r-1)return v.push([s,u]),this;d=this.__data__=new st(v)}return d.set(s,u),this}ft.prototype.clear=xn,ft.prototype.delete=Sn,ft.prototype.get=En,ft.prototype.has=Cn,ft.prototype.set=_n;function fe(s,u){var d=Fe(s)||me(s)?Te(s.length,String):[],v=d.length,L=!!v;for(var $ in s)(u||bt.call(s,$))&&!(L&&($=="length"||Bn($,v)))&&d.push($);return d}function xr(s,u,d){var v=s[u];(!(bt.call(s,u)&&br(v,d))||d===void 0&&!(u in s))&&(s[u]=d)}function pe(s,u){for(var d=s.length;d--;)if(br(s[d][0],u))return d;return-1}function kt(s,u){return s&&ze(u,Ge(u),s)}function Ne(s,u,d,v,L,$,B){var z;if(v&&(z=$?v(s,L,$,B):v(s)),z!==void 0)return z;if(!Mt(s))return s;var Q=Fe(s);if(Q){if(z=On(s),!u)return An(s,z)}else{var G=$t(s),at=G==f||G==p;if(kr(s))return ge(s,u);if(G==C||G==i||at&&!$){if(Me(s))return $?s:{};if(z=Tt(at?{}:s),!u)return Ln(s,kt(z,s))}else{if(!j[G])return $?s:{};z=Dn(s,G,Ne,u)}}B||(B=new ft);var pt=B.get(s);if(pt)return pt;if(B.set(s,z),!Q)var J=d?Rn(s):Ge(s);return lr(J||s,function(lt,nt){J&&(nt=lt,lt=s[nt]),xr(z,nt,Ne(lt,u,d,v,nt,s,B))}),z}function bn(s){return Mt(s)?gr(s):{}}function kn(s,u,d){var v=u(s);return Fe(s)?v:ur(v,d(s))}function Tn(s){return le.call(s)}function Mn(s){if(!Mt(s)||Hn(s))return!1;var u=We(s)||Me(s)?on:D;return u.test(ht(s))}function Pn(s){if(!Cr(s))return yr(s);var u=[];for(var d in Object(s))bt.call(s,d)&&d!="constructor"&&u.push(d);return u}function ge(s,u){if(u)return s.slice();var d=new s.constructor(s.length);return s.copy(d),d}function He(s){var u=new s.constructor(s.byteLength);return new $e(u).set(new $e(s)),u}function Zt(s,u){var d=u?He(s.buffer):s.buffer;return new s.constructor(d,s.byteOffset,s.byteLength)}function Sr(s,u,d){var v=u?d(hr(s),!0):hr(s);return ke(v,Ze,new s.constructor)}function Er(s){var u=new s.constructor(s.source,et.exec(s));return u.lastIndex=s.lastIndex,u}function In(s,u,d){var v=u?d(dr(s),!0):dr(s);return ke(v,wt,new s.constructor)}function $n(s){return vr?Object(vr.call(s)):{}}function jn(s,u){var d=u?He(s.buffer):s.buffer;return new s.constructor(d,s.byteOffset,s.length)}function An(s,u){var d=-1,v=s.length;for(u||(u=Array(v));++d<v;)u[d]=s[d];return u}function ze(s,u,d,v){d||(d={});for(var L=-1,$=u.length;++L<$;){var B=u[L],z=v?v(d[B],s[B],B,d,s):void 0;xr(d,B,z===void 0?s[B]:z)}return d}function Ln(s,u){return ze(s,It(s),u)}function Rn(s){return kn(s,Ge,It)}function Qt(s,u){var d=s.__data__;return Nn(u)?d[typeof u=="string"?"string":"hash"]:d.map}function St(s,u){var d=cr(s,u);return Mn(d)?d:void 0}var It=je?Pe(je,Object):Fn,$t=Tn;(he&&$t(new he(new ArrayBuffer(1)))!=b||Xt&&$t(new Xt)!=g||xt&&$t(xt.resolve())!=S||de&&$t(new de)!=y||Ae&&$t(new Ae)!=k)&&($t=function(s){var u=le.call(s),d=u==C?s.constructor:void 0,v=d?ht(d):void 0;if(v)switch(v){case Le:return b;case Yt:return g;case Re:return S;case Oe:return y;case De:return k}return u});function On(s){var u=s.length,d=s.constructor(u);return u&&typeof s[0]=="string"&&bt.call(s,"index")&&(d.index=s.index,d.input=s.input),d}function Tt(s){return typeof s.constructor=="function"&&!Cr(s)?bn(yt(s)):{}}function Dn(s,u,d,v){var L=s.constructor;switch(u){case M:return He(s);case l:case c:return new L(+s);case b:return Zt(s,v);case T:case I:case H:case R:case O:case F:case N:case V:case Z:return jn(s,v);case g:return Sr(s,v,d);case w:case m:return new L(s);case P:return Er(s);case y:return In(s,v,d);case x:return $n(s)}}function Bn(s,u){return u=u??o,!!u&&(typeof s=="number"||X.test(s))&&s>-1&&s%1==0&&s<u}function Nn(s){var u=typeof s;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?s!=="__proto__":s===null}function Hn(s){return!!fr&&fr in s}function Cr(s){var u=s&&s.constructor,d=typeof u=="function"&&u.prototype||ae;return s===d}function ht(s){if(s!=null){try{return pr.call(s)}catch{}try{return s+""}catch{}}return""}function _r(s){return Ne(s,!0,!0)}function br(s,u){return s===u||s!==s&&u!==u}function me(s){return zn(s)&&bt.call(s,"callee")&&(!mr.call(s,"callee")||le.call(s)==i)}var Fe=Array.isArray;function ye(s){return s!=null&&Tr(s.length)&&!We(s)}function zn(s){return Mr(s)&&ye(s)}var kr=ce||Wn;function We(s){var u=Mt(s)?le.call(s):"";return u==f||u==p}function Tr(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=o}function Mt(s){var u=typeof s;return!!s&&(u=="object"||u=="function")}function Mr(s){return!!s&&typeof s=="object"}function Ge(s){return ye(s)?fe(s):Pn(s)}function Fn(){return[]}function Wn(){return!1}t.exports=_r})(QM,Md);var qM=typeof Ut=="object"&&Ut&&Ut.Object===Object&&Ut,JM=typeof self=="object"&&self&&self.Object===Object&&self;qM||JM||Function("return this")();var Pd={},tP={get exports(){return Pd},set exports(t){Pd=t}};(function(t,e){var r=200,n="__lodash_hash_undefined__",o=1,i=2,a=9007199254740991,l="[object Arguments]",c="[object Array]",h="[object AsyncFunction]",f="[object Boolean]",p="[object Date]",g="[object Error]",w="[object Function]",C="[object GeneratorFunction]",S="[object Map]",P="[object Number]",y="[object Null]",m="[object Object]",x="[object Promise]",k="[object Proxy]",M="[object RegExp]",b="[object Set]",T="[object String]",I="[object Symbol]",H="[object Undefined]",R="[object WeakMap]",O="[object ArrayBuffer]",F="[object DataView]",N="[object Float32Array]",V="[object Float64Array]",Z="[object Int8Array]",ct="[object Int16Array]",et="[object Int32Array]",D="[object Uint8Array]",X="[object Uint8ClampedArray]",j="[object Uint16Array]",dt="[object Uint32Array]",gt=/[\\^$.*+?()[\]{}|]/g,it=/^\[object .+?Constructor\]$/,zt=/^(?:0|[1-9]\d*)$/,U={};U[N]=U[V]=U[Z]=U[ct]=U[et]=U[D]=U[X]=U[j]=U[dt]=!0,U[l]=U[c]=U[O]=U[f]=U[F]=U[p]=U[g]=U[w]=U[S]=U[P]=U[m]=U[M]=U[b]=U[T]=U[R]=!1;var ne=typeof Ut=="object"&&Ut&&Ut.Object===Object&&Ut,Ze=typeof self=="object"&&self&&self.Object===Object&&self,wt=ne||Ze||Function("return this")(),lr=e&&!e.nodeType&&e,ur=lr&&!0&&t&&!t.nodeType&&t,ke=ur&&ur.exports===lr,Te=ke&&ne.process,cr=function(){try{return Te&&Te.binding&&Te.binding("util")}catch{}}(),Me=cr&&cr.isTypedArray;function hr(s,u){for(var d=-1,v=s==null?0:s.length,L=0,$=[];++d<v;){var B=s[d];u(B,d,s)&&($[L++]=B)}return $}function Pe(s,u){for(var d=-1,v=u.length,L=s.length;++d<v;)s[L+d]=u[d];return s}function dr(s,u){for(var d=-1,v=s==null?0:s.length;++d<v;)if(u(s[d],d,s))return!0;return!1}function rn(s,u){for(var d=-1,v=Array(s);++d<s;)v[d]=u(d);return v}function nn(s){return function(u){return s(u)}}function ae(s,u){return s.has(u)}function Ie(s,u){return s==null?void 0:s[u]}function fr(s){var u=-1,d=Array(s.size);return s.forEach(function(v,L){d[++u]=[L,v]}),d}function pr(s,u){return function(d){return s(u(d))}}function bt(s){var u=-1,d=Array(s.size);return s.forEach(function(v){d[++u]=v}),d}var le=Array.prototype,on=Function.prototype,Vt=Object.prototype,ue=wt["__core-js_shared__"],$e=on.toString,yt=Vt.hasOwnProperty,gr=function(){var s=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),mr=Vt.toString,sn=RegExp("^"+$e.call(yt).replace(gt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),je=ke?wt.Buffer:void 0,ce=wt.Symbol,yr=wt.Uint8Array,he=Vt.propertyIsEnumerable,Xt=le.splice,xt=ce?ce.toStringTag:void 0,de=Object.getOwnPropertySymbols,Ae=je?je.isBuffer:void 0,Kt=pr(Object.keys,Object),Le=It(wt,"DataView"),Yt=It(wt,"Map"),Re=It(wt,"Promise"),Oe=It(wt,"Set"),De=It(wt,"WeakMap"),Rt=It(Object,"create"),vr=ht(Le),Pt=ht(Yt),an=ht(Re),ln=ht(Oe),un=ht(De),wr=ce?ce.prototype:void 0,Be=wr?wr.valueOf:void 0;function rt(s){var u=-1,d=s==null?0:s.length;for(this.clear();++u<d;){var v=s[u];this.set(v[0],v[1])}}function cn(){this.__data__=Rt?Rt(null):{},this.size=0}function hn(s){var u=this.has(s)&&delete this.__data__[s];return this.size-=u?1:0,u}function dn(s){var u=this.__data__;if(Rt){var d=u[s];return d===n?void 0:d}return yt.call(u,s)?u[s]:void 0}function fn(s){var u=this.__data__;return Rt?u[s]!==void 0:yt.call(u,s)}function pn(s,u){var d=this.__data__;return this.size+=this.has(s)?0:1,d[s]=Rt&&u===void 0?n:u,this}rt.prototype.clear=cn,rt.prototype.delete=hn,rt.prototype.get=dn,rt.prototype.has=fn,rt.prototype.set=pn;function st(s){var u=-1,d=s==null?0:s.length;for(this.clear();++u<d;){var v=s[u];this.set(v[0],v[1])}}function gn(){this.__data__=[],this.size=0}function mn(s){var u=this.__data__,d=ge(u,s);if(d<0)return!1;var v=u.length-1;return d==v?u.pop():Xt.call(u,d,1),--this.size,!0}function yn(s){var u=this.__data__,d=ge(u,s);return d<0?void 0:u[d][1]}function vn(s){return ge(this.__data__,s)>-1}function wn(s,u){var d=this.__data__,v=ge(d,s);return v<0?(++this.size,d.push([s,u])):d[v][1]=u,this}st.prototype.clear=gn,st.prototype.delete=mn,st.prototype.get=yn,st.prototype.has=vn,st.prototype.set=wn;function ft(s){var u=-1,d=s==null?0:s.length;for(this.clear();++u<d;){var v=s[u];this.set(v[0],v[1])}}function xn(){this.size=0,this.__data__={hash:new rt,map:new(Yt||st),string:new rt}}function Sn(s){var u=St(this,s).delete(s);return this.size-=u?1:0,u}function En(s){return St(this,s).get(s)}function Cn(s){return St(this,s).has(s)}function _n(s,u){var d=St(this,s),v=d.size;return d.set(s,u),this.size+=d.size==v?0:1,this}ft.prototype.clear=xn,ft.prototype.delete=Sn,ft.prototype.get=En,ft.prototype.has=Cn,ft.prototype.set=_n;function fe(s){var u=-1,d=s==null?0:s.length;for(this.__data__=new ft;++u<d;)this.add(s[u])}function xr(s){return this.__data__.set(s,n),this}function pe(s){return this.__data__.has(s)}fe.prototype.add=fe.prototype.push=xr,fe.prototype.has=pe;function kt(s){var u=this.__data__=new st(s);this.size=u.size}function Ne(){this.__data__=new st,this.size=0}function bn(s){var u=this.__data__,d=u.delete(s);return this.size=u.size,d}function kn(s){return this.__data__.get(s)}function Tn(s){return this.__data__.has(s)}function Mn(s,u){var d=this.__data__;if(d instanceof st){var v=d.__data__;if(!Yt||v.length<r-1)return v.push([s,u]),this.size=++d.size,this;d=this.__data__=new ft(v)}return d.set(s,u),this.size=d.size,this}kt.prototype.clear=Ne,kt.prototype.delete=bn,kt.prototype.get=kn,kt.prototype.has=Tn,kt.prototype.set=Mn;function Pn(s,u){var d=me(s),v=!d&&br(s),L=!d&&!v&&ye(s),$=!d&&!v&&!L&&Mr(s),B=d||v||L||$,z=B?rn(s.length,String):[],Q=z.length;for(var G in s)(u||yt.call(s,G))&&!(B&&(G=="length"||L&&(G=="offset"||G=="parent")||$&&(G=="buffer"||G=="byteLength"||G=="byteOffset")||Dn(G,Q)))&&z.push(G);return z}function ge(s,u){for(var d=s.length;d--;)if(_r(s[d][0],u))return d;return-1}function He(s,u,d){var v=u(s);return me(s)?v:Pe(v,d(s))}function Zt(s){return s==null?s===void 0?H:y:xt&&xt in Object(s)?$t(s):Cr(s)}function Sr(s){return Mt(s)&&Zt(s)==l}function Er(s,u,d,v,L){return s===u?!0:s==null||u==null||!Mt(s)&&!Mt(u)?s!==s&&u!==u:In(s,u,d,v,Er,L)}function In(s,u,d,v,L,$){var B=me(s),z=me(u),Q=B?c:Tt(s),G=z?c:Tt(u);Q=Q==l?m:Q,G=G==l?m:G;var at=Q==m,pt=G==m,J=Q==G;if(J&&ye(s)){if(!ye(u))return!1;B=!0,at=!1}if(J&&!at)return $||($=new kt),B||Mr(s)?ze(s,u,d,v,L,$):Ln(s,u,Q,d,v,L,$);if(!(d&o)){var lt=at&&yt.call(s,"__wrapped__"),nt=pt&&yt.call(u,"__wrapped__");if(lt||nt){var Ot=lt?s.value():s,jt=nt?u.value():u;return $||($=new kt),L(Ot,jt,d,v,$)}}return J?($||($=new kt),Rn(s,u,d,v,L,$)):!1}function $n(s){if(!Tr(s)||Nn(s))return!1;var u=kr(s)?sn:it;return u.test(ht(s))}function jn(s){return Mt(s)&&We(s.length)&&!!U[Zt(s)]}function An(s){if(!Hn(s))return Kt(s);var u=[];for(var d in Object(s))yt.call(s,d)&&d!="constructor"&&u.push(d);return u}function ze(s,u,d,v,L,$){var B=d&o,z=s.length,Q=u.length;if(z!=Q&&!(B&&Q>z))return!1;var G=$.get(s);if(G&&$.get(u))return G==u;var at=-1,pt=!0,J=d&i?new fe:void 0;for($.set(s,u),$.set(u,s);++at<z;){var lt=s[at],nt=u[at];if(v)var Ot=B?v(nt,lt,at,u,s,$):v(lt,nt,at,s,u,$);if(Ot!==void 0){if(Ot)continue;pt=!1;break}if(J){if(!dr(u,function(jt,qt){if(!ae(J,qt)&&(lt===jt||L(lt,jt,d,v,$)))return J.push(qt)})){pt=!1;break}}else if(!(lt===nt||L(lt,nt,d,v,$))){pt=!1;break}}return $.delete(s),$.delete(u),pt}function Ln(s,u,d,v,L,$,B){switch(d){case F:if(s.byteLength!=u.byteLength||s.byteOffset!=u.byteOffset)return!1;s=s.buffer,u=u.buffer;case O:return!(s.byteLength!=u.byteLength||!$(new yr(s),new yr(u)));case f:case p:case P:return _r(+s,+u);case g:return s.name==u.name&&s.message==u.message;case M:case T:return s==u+"";case S:var z=fr;case b:var Q=v&o;if(z||(z=bt),s.size!=u.size&&!Q)return!1;var G=B.get(s);if(G)return G==u;v|=i,B.set(s,u);var at=ze(z(s),z(u),v,L,$,B);return B.delete(s),at;case I:if(Be)return Be.call(s)==Be.call(u)}return!1}function Rn(s,u,d,v,L,$){var B=d&o,z=Qt(s),Q=z.length,G=Qt(u),at=G.length;if(Q!=at&&!B)return!1;for(var pt=Q;pt--;){var J=z[pt];if(!(B?J in u:yt.call(u,J)))return!1}var lt=$.get(s);if(lt&&$.get(u))return lt==u;var nt=!0;$.set(s,u),$.set(u,s);for(var Ot=B;++pt<Q;){J=z[pt];var jt=s[J],qt=u[J];if(v)var Mo=B?v(qt,jt,J,u,s,$):v(jt,qt,J,s,u,$);if(!(Mo===void 0?jt===qt||L(jt,qt,d,v,$):Mo)){nt=!1;break}Ot||(Ot=J=="constructor")}if(nt&&!Ot){var Pr=s.constructor,Ir=u.constructor;Pr!=Ir&&"constructor"in s&&"constructor"in u&&!(typeof Pr=="function"&&Pr instanceof Pr&&typeof Ir=="function"&&Ir instanceof Ir)&&(nt=!1)}return $.delete(s),$.delete(u),nt}function Qt(s){return He(s,Ge,On)}function St(s,u){var d=s.__data__;return Bn(u)?d[typeof u=="string"?"string":"hash"]:d.map}function It(s,u){var d=Ie(s,u);return $n(d)?d:void 0}function $t(s){var u=yt.call(s,xt),d=s[xt];try{s[xt]=void 0;var v=!0}catch{}var L=mr.call(s);return v&&(u?s[xt]=d:delete s[xt]),L}var On=de?function(s){return s==null?[]:(s=Object(s),hr(de(s),function(u){return he.call(s,u)}))}:Fn,Tt=Zt;(Le&&Tt(new Le(new ArrayBuffer(1)))!=F||Yt&&Tt(new Yt)!=S||Re&&Tt(Re.resolve())!=x||Oe&&Tt(new Oe)!=b||De&&Tt(new De)!=R)&&(Tt=function(s){var u=Zt(s),d=u==m?s.constructor:void 0,v=d?ht(d):"";if(v)switch(v){case vr:return F;case Pt:return S;case an:return x;case ln:return b;case un:return R}return u});function Dn(s,u){return u=u??a,!!u&&(typeof s=="number"||zt.test(s))&&s>-1&&s%1==0&&s<u}function Bn(s){var u=typeof s;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?s!=="__proto__":s===null}function Nn(s){return!!gr&&gr in s}function Hn(s){var u=s&&s.constructor,d=typeof u=="function"&&u.prototype||Vt;return s===d}function Cr(s){return mr.call(s)}function ht(s){if(s!=null){try{return $e.call(s)}catch{}try{return s+""}catch{}}return""}function _r(s,u){return s===u||s!==s&&u!==u}var br=Sr(function(){return arguments}())?Sr:function(s){return Mt(s)&&yt.call(s,"callee")&&!he.call(s,"callee")},me=Array.isArray;function Fe(s){return s!=null&&We(s.length)&&!kr(s)}var ye=Ae||Wn;function zn(s,u){return Er(s,u)}function kr(s){if(!Tr(s))return!1;var u=Zt(s);return u==w||u==C||u==h||u==k}function We(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=a}function Tr(s){var u=typeof s;return s!=null&&(u=="object"||u=="function")}function Mt(s){return s!=null&&typeof s=="object"}var Mr=Me?nn(Me):jn;function Ge(s){return Fe(s)?Pn(s):An(s)}function Fn(){return[]}function Wn(){return!1}t.exports=zn})(tP,Pd);var eP=200,ap="__lodash_hash_undefined__",rP=1/0,Sw=9007199254740991,nP="[object Arguments]",oP="[object Function]",iP="[object GeneratorFunction]",sP="[object Symbol]",aP=/[\\^$.*+?()[\]{}|]/g,lP=/^\[object .+?Constructor\]$/,uP=/^(?:0|[1-9]\d*)$/,cP=typeof Ut=="object"&&Ut&&Ut.Object===Object&&Ut,hP=typeof self=="object"&&self&&self.Object===Object&&self,lp=cP||hP||Function("return this")();function dP(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function fP(t,e){var r=t?t.length:0;return!!r&&mP(t,e,0)>-1}function pP(t,e,r){for(var n=-1,o=t?t.length:0;++n<o;)if(r(e,t[n]))return!0;return!1}function Ew(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}function up(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function gP(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}function mP(t,e,r){if(e!==e)return gP(t,yP,r);for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}function yP(t){return t!==t}function vP(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function wP(t){return function(e){return t(e)}}function xP(t,e){return t.has(e)}function SP(t,e){return t==null?void 0:t[e]}function EP(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}function Cw(t,e){return function(r){return t(e(r))}}var CP=Array.prototype,_P=Function.prototype,ac=Object.prototype,qc=lp["__core-js_shared__"],Lm=function(){var t=/[^.]+$/.exec(qc&&qc.keys&&qc.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),_w=_P.toString,_s=ac.hasOwnProperty,cp=ac.toString,bP=RegExp("^"+_w.call(_s).replace(aP,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Rm=lp.Symbol,kP=Cw(Object.getPrototypeOf,Object),TP=ac.propertyIsEnumerable,MP=CP.splice,Om=Rm?Rm.isConcatSpreadable:void 0,Id=Object.getOwnPropertySymbols,Dm=Math.max,PP=kw(lp,"Map"),Ea=kw(Object,"create");function ki(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function IP(){this.__data__=Ea?Ea(null):{}}function $P(t){return this.has(t)&&delete this.__data__[t]}function jP(t){var e=this.__data__;if(Ea){var r=e[t];return r===ap?void 0:r}return _s.call(e,t)?e[t]:void 0}function AP(t){var e=this.__data__;return Ea?e[t]!==void 0:_s.call(e,t)}function LP(t,e){var r=this.__data__;return r[t]=Ea&&e===void 0?ap:e,this}ki.prototype.clear=IP;ki.prototype.delete=$P;ki.prototype.get=jP;ki.prototype.has=AP;ki.prototype.set=LP;function bs(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function RP(){this.__data__=[]}function OP(t){var e=this.__data__,r=lc(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():MP.call(e,r,1),!0}function DP(t){var e=this.__data__,r=lc(e,t);return r<0?void 0:e[r][1]}function BP(t){return lc(this.__data__,t)>-1}function NP(t,e){var r=this.__data__,n=lc(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}bs.prototype.clear=RP;bs.prototype.delete=OP;bs.prototype.get=DP;bs.prototype.has=BP;bs.prototype.set=NP;function ks(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function HP(){this.__data__={hash:new ki,map:new(PP||bs),string:new ki}}function zP(t){return uc(this,t).delete(t)}function FP(t){return uc(this,t).get(t)}function WP(t){return uc(this,t).has(t)}function GP(t,e){return uc(this,t).set(t,e),this}ks.prototype.clear=HP;ks.prototype.delete=zP;ks.prototype.get=FP;ks.prototype.has=WP;ks.prototype.set=GP;function fu(t){var e=-1,r=t?t.length:0;for(this.__data__=new ks;++e<r;)this.add(t[e])}function UP(t){return this.__data__.set(t,ap),this}function VP(t){return this.__data__.has(t)}fu.prototype.add=fu.prototype.push=UP;fu.prototype.has=VP;function XP(t,e){var r=hp(t)||Tw(t)?vP(t.length,String):[],n=r.length,o=!!n;for(var i in t)(e||_s.call(t,i))&&!(o&&(i=="length"||i4(i,n)))&&r.push(i);return r}function lc(t,e){for(var r=t.length;r--;)if(d4(t[r][0],e))return r;return-1}function KP(t,e,r,n){var o=-1,i=fP,a=!0,l=t.length,c=[],h=e.length;if(!l)return c;r&&(e=Ew(e,wP(r))),n?(i=pP,a=!1):e.length>=eP&&(i=xP,a=!1,e=new fu(e));t:for(;++o<l;){var f=t[o],p=r?r(f):f;if(f=n||f!==0?f:0,a&&p===p){for(var g=h;g--;)if(e[g]===p)continue t;c.push(f)}else i(e,p,n)||c.push(f)}return c}function bw(t,e,r,n,o){var i=-1,a=t.length;for(r||(r=o4),o||(o=[]);++i<a;){var l=t[i];e>0&&r(l)?e>1?bw(l,e-1,r,n,o):up(o,l):n||(o[o.length]=l)}return o}function YP(t,e,r){var n=e(t);return hp(t)?n:up(n,r(t))}function ZP(t){if(!dp(t)||a4(t))return!1;var e=Pw(t)||EP(t)?bP:lP;return e.test(h4(t))}function QP(t){if(!dp(t))return u4(t);var e=l4(t),r=[];for(var n in t)n=="constructor"&&(e||!_s.call(t,n))||r.push(n);return r}function qP(t,e){return t=Object(t),JP(t,e,function(r,n){return n in t})}function JP(t,e,r){for(var n=-1,o=e.length,i={};++n<o;){var a=e[n],l=t[a];r(l,a)&&(i[a]=l)}return i}function t4(t,e){return e=Dm(e===void 0?t.length-1:e,0),function(){for(var r=arguments,n=-1,o=Dm(r.length-e,0),i=Array(o);++n<o;)i[n]=r[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=r[n];return a[e]=i,dP(t,this,a)}}function e4(t){return YP(t,m4,n4)}function uc(t,e){var r=t.__data__;return s4(e)?r[typeof e=="string"?"string":"hash"]:r.map}function kw(t,e){var r=SP(t,e);return ZP(r)?r:void 0}var r4=Id?Cw(Id,Object):$w,n4=Id?function(t){for(var e=[];t;)up(e,r4(t)),t=kP(t);return e}:$w;function o4(t){return hp(t)||Tw(t)||!!(Om&&t&&t[Om])}function i4(t,e){return e=e??Sw,!!e&&(typeof t=="number"||uP.test(t))&&t>-1&&t%1==0&&t<e}function s4(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function a4(t){return!!Lm&&Lm in t}function l4(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||ac;return t===r}function u4(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}function c4(t){if(typeof t=="string"||g4(t))return t;var e=t+"";return e=="0"&&1/t==-rP?"-0":e}function h4(t){if(t!=null){try{return _w.call(t)}catch{}try{return t+""}catch{}}return""}function d4(t,e){return t===e||t!==t&&e!==e}function Tw(t){return f4(t)&&_s.call(t,"callee")&&(!TP.call(t,"callee")||cp.call(t)==nP)}var hp=Array.isArray;function Mw(t){return t!=null&&p4(t.length)&&!Pw(t)}function f4(t){return Iw(t)&&Mw(t)}function Pw(t){var e=dp(t)?cp.call(t):"";return e==oP||e==iP}function p4(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Sw}function dp(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Iw(t){return!!t&&typeof t=="object"}function g4(t){return typeof t=="symbol"||Iw(t)&&cp.call(t)==sP}function m4(t){return Mw(t)?XP(t,!0):QP(t)}t4(function(t,e){return t==null?{}:(e=Ew(bw(e,1),c4),qP(t,KP(e4(t),e)))});function $w(){return[]}var y4=1/0,v4=9007199254740991,w4="[object Arguments]",x4="[object Function]",S4="[object GeneratorFunction]",E4="[object Symbol]",C4=typeof Ut=="object"&&Ut&&Ut.Object===Object&&Ut,_4=typeof self=="object"&&self&&self.Object===Object&&self,b4=C4||_4||Function("return this")();function k4(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function T4(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}function M4(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}var fp=Object.prototype,P4=fp.hasOwnProperty,pp=fp.toString,Bm=b4.Symbol,I4=fp.propertyIsEnumerable,Nm=Bm?Bm.isConcatSpreadable:void 0,Hm=Math.max;function jw(t,e,r,n,o){var i=-1,a=t.length;for(r||(r=L4),o||(o=[]);++i<a;){var l=t[i];e>0&&r(l)?e>1?jw(l,e-1,r,n,o):M4(o,l):n||(o[o.length]=l)}return o}function $4(t,e){return t=Object(t),j4(t,e,function(r,n){return n in t})}function j4(t,e,r){for(var n=-1,o=e.length,i={};++n<o;){var a=e[n],l=t[a];r(l,a)&&(i[a]=l)}return i}function A4(t,e){return e=Hm(e===void 0?t.length-1:e,0),function(){for(var r=arguments,n=-1,o=Hm(r.length-e,0),i=Array(o);++n<o;)i[n]=r[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=r[n];return a[e]=i,k4(t,this,a)}}function L4(t){return D4(t)||O4(t)||!!(Nm&&t&&t[Nm])}function R4(t){if(typeof t=="string"||W4(t))return t;var e=t+"";return e=="0"&&1/t==-y4?"-0":e}function O4(t){return N4(t)&&P4.call(t,"callee")&&(!I4.call(t,"callee")||pp.call(t)==w4)}var D4=Array.isArray;function B4(t){return t!=null&&z4(t.length)&&!H4(t)}function N4(t){return Aw(t)&&B4(t)}function H4(t){var e=F4(t)?pp.call(t):"";return e==x4||e==S4}function z4(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=v4}function F4(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Aw(t){return!!t&&typeof t=="object"}function W4(t){return typeof t=="symbol"||Aw(t)&&pp.call(t)==E4}A4(function(t,e){return t==null?{}:$4(t,T4(jw(e,1),R4))});var G4=typeof Ut=="object"&&Ut&&Ut.Object===Object&&Ut,U4=typeof self=="object"&&self&&self.Object===Object&&self;G4||U4||Function("return this")();function cc(t){return t.split("-")[1]}function Lw(t){return t==="y"?"height":"width"}function ts(t){return t.split("-")[0]}function gp(t){return["top","bottom"].includes(ts(t))?"x":"y"}function zm(t,e,r){let{reference:n,floating:o}=t;const i=n.x+n.width/2-o.width/2,a=n.y+n.height/2-o.height/2,l=gp(e),c=Lw(l),h=n[c]/2-o[c]/2,f=l==="x";let p;switch(ts(e)){case"top":p={x:i,y:n.y-o.height};break;case"bottom":p={x:i,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:a};break;case"left":p={x:n.x-o.width,y:a};break;default:p={x:n.x,y:n.y}}switch(cc(e)){case"start":p[l]-=h*(r&&f?-1:1);break;case"end":p[l]+=h*(r&&f?-1:1)}return p}const V4=async(t,e,r)=>{const{placement:n="bottom",strategy:o="absolute",middleware:i=[],platform:a}=r,l=i.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let h=await a.getElementRects({reference:t,floating:e,strategy:o}),{x:f,y:p}=zm(h,n,c),g=n,w={},C=0;for(let S=0;S<l.length;S++){const{name:P,fn:y}=l[S],{x:m,y:x,data:k,reset:M}=await y({x:f,y:p,initialPlacement:n,placement:g,strategy:o,middlewareData:w,rects:h,platform:a,elements:{reference:t,floating:e}});f=m??f,p=x??p,w={...w,[P]:{...w[P],...k}},M&&C<=50&&(C++,typeof M=="object"&&(M.placement&&(g=M.placement),M.rects&&(h=M.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:o}):M.rects),{x:f,y:p}=zm(h,g,c)),S=-1)}return{x:f,y:p,placement:g,strategy:o,middlewareData:w}};function X4(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function pu(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function K4(t,e){var r;e===void 0&&(e={});const{x:n,y:o,platform:i,rects:a,elements:l,strategy:c}=t,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:p="floating",altBoundary:g=!1,padding:w=0}=e,C=X4(w),S=l[g?p==="floating"?"reference":"floating":p],P=pu(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(S)))==null||r?S:S.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:h,rootBoundary:f,strategy:c})),y=p==="floating"?{...a.floating,x:n,y:o}:a.reference,m=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),x=await(i.isElement==null?void 0:i.isElement(m))&&await(i.getScale==null?void 0:i.getScale(m))||{x:1,y:1},k=pu(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:m,strategy:c}):y);return{top:(P.top-k.top+C.top)/x.y,bottom:(k.bottom-P.bottom+C.bottom)/x.y,left:(P.left-k.left+C.left)/x.x,right:(k.right-P.right+C.right)/x.x}}const Y4=["top","right","bottom","left"];Y4.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);const Z4={left:"right",right:"left",bottom:"top",top:"bottom"};function gu(t){return t.replace(/left|right|bottom|top/g,e=>Z4[e])}function Q4(t,e,r){r===void 0&&(r=!1);const n=cc(t),o=gp(t),i=Lw(o);let a=o==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(a=gu(a)),{main:a,cross:gu(a)}}const q4={start:"end",end:"start"};function Jc(t){return t.replace(/start|end/g,e=>q4[e])}const J4=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r;const{placement:n,middlewareData:o,rects:i,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:p,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:w="none",flipAlignment:C=!0,...S}=t,P=ts(n),y=ts(a)===a,m=await(l.isRTL==null?void 0:l.isRTL(c.floating)),x=p||(y||!C?[gu(a)]:function(O){const F=gu(O);return[Jc(O),F,Jc(F)]}(a));p||w==="none"||x.push(...function(O,F,N,V){const Z=cc(O);let ct=function(et,D,X){const j=["left","right"],dt=["right","left"],gt=["top","bottom"],it=["bottom","top"];switch(et){case"top":case"bottom":return X?D?dt:j:D?j:dt;case"left":case"right":return D?gt:it;default:return[]}}(ts(O),N==="start",V);return Z&&(ct=ct.map(et=>et+"-"+Z),F&&(ct=ct.concat(ct.map(Jc)))),ct}(a,C,w,m));const k=[a,...x],M=await K4(e,S),b=[];let T=((r=o.flip)==null?void 0:r.overflows)||[];if(h&&b.push(M[P]),f){const{main:O,cross:F}=Q4(n,i,m);b.push(M[O],M[F])}if(T=[...T,{placement:n,overflows:b}],!b.every(O=>O<=0)){var I,H;const O=(((I=o.flip)==null?void 0:I.index)||0)+1,F=k[O];if(F)return{data:{index:O,overflows:T},reset:{placement:F}};let N=(H=T.filter(V=>V.overflows[0]<=0).sort((V,Z)=>V.overflows[1]-Z.overflows[1])[0])==null?void 0:H.placement;if(!N)switch(g){case"bestFit":{var R;const V=(R=T.map(Z=>[Z.placement,Z.overflows.filter(ct=>ct>0).reduce((ct,et)=>ct+et,0)]).sort((Z,ct)=>Z[1]-ct[1])[0])==null?void 0:R[0];V&&(N=V);break}case"initialPlacement":N=a}if(n!==N)return{reset:{placement:N}}}return{}}}},tI=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:r,y:n}=e,o=await async function(i,a){const{placement:l,platform:c,elements:h}=i,f=await(c.isRTL==null?void 0:c.isRTL(h.floating)),p=ts(l),g=cc(l),w=gp(l)==="x",C=["left","top"].includes(p)?-1:1,S=f&&w?-1:1,P=typeof a=="function"?a(i):a;let{mainAxis:y,crossAxis:m,alignmentAxis:x}=typeof P=="number"?{mainAxis:P,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...P};return g&&typeof x=="number"&&(m=g==="end"?-1*x:x),w?{x:m*S,y:y*C}:{x:y*C,y:m*S}}(e,t);return{x:r+o.x,y:n+o.y,data:o}}}};function Hr(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function uo(t){return Hr(t).getComputedStyle(t)}function Rw(t){return t instanceof Hr(t).Node}function Zo(t){return Rw(t)?(t.nodeName||"").toLowerCase():""}let ll;function Ow(){if(ll)return ll;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(ll=t.brands.map(e=>e.brand+"/"+e.version).join(" "),ll):navigator.userAgent}function Jn(t){return t instanceof Hr(t).HTMLElement}function Qn(t){return t instanceof Hr(t).Element}function Fm(t){return typeof ShadowRoot>"u"?!1:t instanceof Hr(t).ShadowRoot||t instanceof ShadowRoot}function hc(t){const{overflow:e,overflowX:r,overflowY:n,display:o}=uo(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!["inline","contents"].includes(o)}function eI(t){return["table","td","th"].includes(Zo(t))}function $d(t){const e=/firefox/i.test(Ow()),r=uo(t),n=r.backdropFilter||r.WebkitBackdropFilter;return r.transform!=="none"||r.perspective!=="none"||!!n&&n!=="none"||e&&r.willChange==="filter"||e&&!!r.filter&&r.filter!=="none"||["transform","perspective"].some(o=>r.willChange.includes(o))||["paint","layout","strict","content"].some(o=>{const i=r.contain;return i!=null&&i.includes(o)})}function jd(){return/^((?!chrome|android).)*safari/i.test(Ow())}function mp(t){return["html","body","#document"].includes(Zo(t))}const Wm=Math.min,qs=Math.max,mu=Math.round;function Dw(t){const e=uo(t);let r=parseFloat(e.width),n=parseFloat(e.height);const o=Jn(t),i=o?t.offsetWidth:r,a=o?t.offsetHeight:n,l=mu(r)!==i||mu(n)!==a;return l&&(r=i,n=a),{width:r,height:n,fallback:l}}function Bw(t){return Qn(t)?t:t.contextElement}const Nw={x:1,y:1};function es(t){const e=Bw(t);if(!Jn(e))return Nw;const r=e.getBoundingClientRect(),{width:n,height:o,fallback:i}=Dw(e);let a=(i?mu(r.width):r.width)/n,l=(i?mu(r.height):r.height)/o;return a&&Number.isFinite(a)||(a=1),l&&Number.isFinite(l)||(l=1),{x:a,y:l}}function Ti(t,e,r,n){var o,i;e===void 0&&(e=!1),r===void 0&&(r=!1);const a=t.getBoundingClientRect(),l=Bw(t);let c=Nw;e&&(n?Qn(n)&&(c=es(n)):c=es(t));const h=l?Hr(l):window,f=jd()&&r;let p=(a.left+(f&&((o=h.visualViewport)==null?void 0:o.offsetLeft)||0))/c.x,g=(a.top+(f&&((i=h.visualViewport)==null?void 0:i.offsetTop)||0))/c.y,w=a.width/c.x,C=a.height/c.y;if(l){const S=Hr(l),P=n&&Qn(n)?Hr(n):n;let y=S.frameElement;for(;y&&n&&P!==S;){const m=es(y),x=y.getBoundingClientRect(),k=getComputedStyle(y);x.x+=(y.clientLeft+parseFloat(k.paddingLeft))*m.x,x.y+=(y.clientTop+parseFloat(k.paddingTop))*m.y,p*=m.x,g*=m.y,w*=m.x,C*=m.y,p+=x.x,g+=x.y,y=Hr(y).frameElement}}return pu({width:w,height:C,x:p,y:g})}function Uo(t){return((Rw(t)?t.ownerDocument:t.document)||window.document).documentElement}function dc(t){return Qn(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Hw(t){return Ti(Uo(t)).left+dc(t).scrollLeft}function Ca(t){if(Zo(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Fm(t)&&t.host||Uo(t);return Fm(e)?e.host:e}function zw(t){const e=Ca(t);return mp(e)?e.ownerDocument.body:Jn(e)&&hc(e)?e:zw(e)}function Vo(t,e){var r;e===void 0&&(e=[]);const n=zw(t),o=n===((r=t.ownerDocument)==null?void 0:r.body),i=Hr(n);return o?e.concat(i,i.visualViewport||[],hc(n)?n:[]):e.concat(n,Vo(n))}function Gm(t,e,r){let n;if(e==="viewport")n=function(a,l){const c=Hr(a),h=Uo(a),f=c.visualViewport;let p=h.clientWidth,g=h.clientHeight,w=0,C=0;if(f){p=f.width,g=f.height;const S=jd();(!S||S&&l==="fixed")&&(w=f.offsetLeft,C=f.offsetTop)}return{width:p,height:g,x:w,y:C}}(t,r);else if(e==="document")n=function(a){const l=Uo(a),c=dc(a),h=a.ownerDocument.body,f=qs(l.scrollWidth,l.clientWidth,h.scrollWidth,h.clientWidth),p=qs(l.scrollHeight,l.clientHeight,h.scrollHeight,h.clientHeight);let g=-c.scrollLeft+Hw(a);const w=-c.scrollTop;return uo(h).direction==="rtl"&&(g+=qs(l.clientWidth,h.clientWidth)-f),{width:f,height:p,x:g,y:w}}(Uo(t));else if(Qn(e))n=function(a,l){const c=Ti(a,!0,l==="fixed"),h=c.top+a.clientTop,f=c.left+a.clientLeft,p=Jn(a)?es(a):{x:1,y:1};return{width:a.clientWidth*p.x,height:a.clientHeight*p.y,x:f*p.x,y:h*p.y}}(e,r);else{const a={...e};if(jd()){var o,i;const l=Hr(t);a.x-=((o=l.visualViewport)==null?void 0:o.offsetLeft)||0,a.y-=((i=l.visualViewport)==null?void 0:i.offsetTop)||0}n=a}return pu(n)}function Um(t,e){return Jn(t)&&uo(t).position!=="fixed"?e?e(t):t.offsetParent:null}function Vm(t,e){const r=Hr(t);if(!Jn(t))return r;let n=Um(t,e);for(;n&&eI(n)&&uo(n).position==="static";)n=Um(n,e);return n&&(Zo(n)==="html"||Zo(n)==="body"&&uo(n).position==="static"&&!$d(n))?r:n||function(o){let i=Ca(o);for(;Jn(i)&&!mp(i);){if($d(i))return i;i=Ca(i)}return null}(t)||r}function rI(t,e,r){const n=Jn(e),o=Uo(e),i=Ti(t,!0,r==="fixed",e);let a={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if(n||!n&&r!=="fixed")if((Zo(e)!=="body"||hc(o))&&(a=dc(e)),Jn(e)){const c=Ti(e,!0);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else o&&(l.x=Hw(o));return{x:i.left+a.scrollLeft-l.x,y:i.top+a.scrollTop-l.y,width:i.width,height:i.height}}const nI={getClippingRect:function(t){let{element:e,boundary:r,rootBoundary:n,strategy:o}=t;const i=r==="clippingAncestors"?function(h,f){const p=f.get(h);if(p)return p;let g=Vo(h).filter(P=>Qn(P)&&Zo(P)!=="body"),w=null;const C=uo(h).position==="fixed";let S=C?Ca(h):h;for(;Qn(S)&&!mp(S);){const P=uo(S),y=$d(S);P.position==="fixed"&&(w=null),(C?y||w:y||P.position!=="static"||!w||!["absolute","fixed"].includes(w.position))?w=P:g=g.filter(m=>m!==S),S=Ca(S)}return f.set(h,g),g}(e,this._c):[].concat(r),a=[...i,n],l=a[0],c=a.reduce((h,f)=>{const p=Gm(e,f,o);return h.top=qs(p.top,h.top),h.right=Wm(p.right,h.right),h.bottom=Wm(p.bottom,h.bottom),h.left=qs(p.left,h.left),h},Gm(e,l,o));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:r,strategy:n}=t;const o=Jn(r),i=Uo(r);if(r===i)return e;let a={scrollLeft:0,scrollTop:0},l={x:1,y:1};const c={x:0,y:0};if((o||!o&&n!=="fixed")&&((Zo(r)!=="body"||hc(i))&&(a=dc(r)),Jn(r))){const h=Ti(r);l=es(r),c.x=h.x+r.clientLeft,c.y=h.y+r.clientTop}return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-a.scrollLeft*l.x+c.x,y:e.y*l.y-a.scrollTop*l.y+c.y}},isElement:Qn,getDimensions:function(t){return Dw(t)},getOffsetParent:Vm,getDocumentElement:Uo,getScale:es,async getElementRects(t){let{reference:e,floating:r,strategy:n}=t;const o=this.getOffsetParent||Vm,i=this.getDimensions;return{reference:rI(e,await o(r),n),floating:{x:0,y:0,...await i(r)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>uo(t).direction==="rtl"};function oI(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:o=!0,ancestorResize:i=!0,elementResize:a=!0,animationFrame:l=!1}=n,c=o&&!l,h=c||i?[...Qn(t)?Vo(t):t.contextElement?Vo(t.contextElement):[],...Vo(e)]:[];h.forEach(w=>{c&&w.addEventListener("scroll",r,{passive:!0}),i&&w.addEventListener("resize",r)});let f,p=null;a&&(p=new ResizeObserver(()=>{r()}),Qn(t)&&!l&&p.observe(t),Qn(t)||!t.contextElement||l||p.observe(t.contextElement),p.observe(e));let g=l?Ti(t):null;return l&&function w(){const C=Ti(t);!g||C.x===g.x&&C.y===g.y&&C.width===g.width&&C.height===g.height||r(),g=C,f=requestAnimationFrame(w)}(),r(),()=>{var w;h.forEach(C=>{c&&C.removeEventListener("scroll",r),i&&C.removeEventListener("resize",r)}),(w=p)==null||w.disconnect(),p=null,l&&cancelAnimationFrame(f)}}const iI=(t,e,r)=>{const n=new Map,o={platform:nI,...r},i={...o.platform,_c:n};return V4(t,e,{...o,platform:i})};var bl=typeof document<"u"?A.useLayoutEffect:A.useEffect;function yu(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!=e.length)return!1;for(n=r;n--!==0;)if(!yu(t[n],e[n]))return!1;return!0}if(o=Object.keys(t),r=o.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,o[n]))return!1;for(n=r;n--!==0;){const i=o[n];if(!(i==="_owner"&&t.$$typeof)&&!yu(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Xm(t){const e=A.useRef(t);return bl(()=>{e.current=t}),e}function sI(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:o,whileElementsMounted:i,open:a}=t,[l,c]=A.useState({x:null,y:null,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=A.useState(n);yu(h,n)||f(n);const p=A.useRef(null),g=A.useRef(null),w=A.useRef(l),C=Xm(i),S=Xm(o),[P,y]=A.useState(null),[m,x]=A.useState(null),k=A.useCallback(R=>{p.current!==R&&(p.current=R,y(R))},[]),M=A.useCallback(R=>{g.current!==R&&(g.current=R,x(R))},[]),b=A.useCallback(()=>{if(!p.current||!g.current)return;const R={placement:e,strategy:r,middleware:h};S.current&&(R.platform=S.current),iI(p.current,g.current,R).then(O=>{const F={...O,isPositioned:!0};T.current&&!yu(w.current,F)&&(w.current=F,$f.flushSync(()=>{c(F)}))})},[h,e,r,S]);bl(()=>{a===!1&&w.current.isPositioned&&(w.current.isPositioned=!1,c(R=>({...R,isPositioned:!1})))},[a]);const T=A.useRef(!1);bl(()=>(T.current=!0,()=>{T.current=!1}),[]),bl(()=>{if(P&&m){if(C.current)return C.current(P,m,b);b()}},[P,m,b,C]);const I=A.useMemo(()=>({reference:p,floating:g,setReference:k,setFloating:M}),[k,M]),H=A.useMemo(()=>({reference:P,floating:m}),[P,m]);return A.useMemo(()=>({...l,update:b,refs:I,elements:H,reference:k,floating:M}),[l,b,I,H,k,M])}/*!
* tabbable 6.1.1
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var aI=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ad=aI.join(","),Fw=typeof Element>"u",_a=Fw?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,vu=!Fw&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},wu=function t(e,r){var n;r===void 0&&(r=!0);var o=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"inert"),i=o===""||o==="true",a=i||r&&e&&t(e.parentNode);return a},lI=function(t){var e,r=t==null||(e=t.getAttribute)===null||e===void 0?void 0:e.call(t,"contenteditable");return r===""||r==="true"},uI=function(t,e,r){if(wu(t))return[];var n=Array.prototype.slice.apply(t.querySelectorAll(Ad));return e&&_a.call(t,Ad)&&n.unshift(t),n=n.filter(r),n},cI=function t(e,r,n){for(var o=[],i=Array.from(e);i.length;){var a=i.shift();if(!wu(a,!1))if(a.tagName==="SLOT"){var l=a.assignedElements(),c=l.length?l:a.children,h=t(c,!0,n);n.flatten?o.push.apply(o,h):o.push({scopeParent:a,candidates:h})}else{var f=_a.call(a,Ad);f&&n.filter(a)&&(r||!e.includes(a))&&o.push(a);var p=a.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(a),g=!wu(p,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(a));if(p&&g){var w=t(p===!0?a.children:p.children,!0,n);n.flatten?o.push.apply(o,w):o.push({scopeParent:a,candidates:w})}else i.unshift.apply(i,a.children)}}return o},Ww=function(t,e){return t.tabIndex<0&&(e||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||lI(t))&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},hI=function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex},Gw=function(t){return t.tagName==="INPUT"},dI=function(t){return Gw(t)&&t.type==="hidden"},fI=function(t){var e=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return e},pI=function(t,e){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===e)return t[r]},gI=function(t){if(!t.name)return!0;var e=t.form||vu(t),r=function(i){return e.querySelectorAll('input[type="radio"][name="'+i+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=r(window.CSS.escape(t.name));else try{n=r(t.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var o=pI(n,t.form);return!o||o===t},mI=function(t){return Gw(t)&&t.type==="radio"},yI=function(t){return mI(t)&&!gI(t)},vI=function(t){var e,r=t&&vu(t),n=(e=r)===null||e===void 0?void 0:e.host,o=!1;if(r&&r!==t){var i,a,l;for(o=!!((i=n)!==null&&i!==void 0&&(a=i.ownerDocument)!==null&&a!==void 0&&a.contains(n)||t!=null&&(l=t.ownerDocument)!==null&&l!==void 0&&l.contains(t));!o&&n;){var c,h,f;r=vu(n),n=(c=r)===null||c===void 0?void 0:c.host,o=!!((h=n)!==null&&h!==void 0&&(f=h.ownerDocument)!==null&&f!==void 0&&f.contains(n))}}return o},Km=function(t){var e=t.getBoundingClientRect(),r=e.width,n=e.height;return r===0&&n===0},wI=function(t,e){var r=e.displayCheck,n=e.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var o=_a.call(t,"details>summary:first-of-type"),i=o?t.parentElement:t;if(_a.call(i,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof n=="function"){for(var a=t;t;){var l=t.parentElement,c=vu(t);if(l&&!l.shadowRoot&&n(l)===!0)return Km(t);t.assignedSlot?t=t.assignedSlot:!l&&c!==t.ownerDocument?t=c.host:t=l}t=a}if(vI(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Km(t);return!1},xI=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var e=t.parentElement;e;){if(e.tagName==="FIELDSET"&&e.disabled){for(var r=0;r<e.children.length;r++){var n=e.children.item(r);if(n.tagName==="LEGEND")return _a.call(e,"fieldset[disabled] *")?!0:!n.contains(t)}return!0}e=e.parentElement}return!1},SI=function(t,e){return!(e.disabled||wu(e)||dI(e)||wI(e,t)||fI(e)||xI(e))},Ym=function(t,e){return!(yI(e)||Ww(e)<0||!SI(t,e))},EI=function(t){var e=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},CI=function t(e){var r=[],n=[];return e.forEach(function(o,i){var a=!!o.scopeParent,l=a?o.scopeParent:o,c=Ww(l,a),h=a?t(o.candidates):l;c===0?a?r.push.apply(r,h):r.push(l):n.push({documentOrder:i,tabIndex:c,item:o,isScope:a,content:h})}),n.sort(hI).reduce(function(o,i){return i.isScope?o.push.apply(o,i.content):o.push(i.content),o},[]).concat(r)},Uw=function(t,e){e=e||{};var r;return e.getShadowRoot?r=cI([t],e.includeContainer,{filter:Ym.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:EI}):r=uI(t,e.includeContainer,Ym.bind(null,e)),CI(r)};function Ld(){return Ld=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ld.apply(this,arguments)}var Mi=typeof document<"u"?A.useLayoutEffect:A.useEffect;let th=!1,_I=0;const Zm=()=>"floating-ui-"+_I++;function bI(){const[t,e]=A.useState(()=>th?Zm():void 0);return Mi(()=>{t==null&&e(Zm())},[]),A.useEffect(()=>{th||(th=!0)},[]),t}const kI=m0.useId,Vw=kI||bI;function TI(){const t=new Map;return{emit(e,r){var n;(n=t.get(e))==null||n.forEach(o=>o(r))},on(e,r){t.set(e,[...t.get(e)||[],r])},off(e,r){var n;t.set(e,((n=t.get(e))==null?void 0:n.filter(o=>o!==r))||[])}}}const MI=A.createContext(null),PI=A.createContext(null),Xw=()=>{var t;return((t=A.useContext(MI))==null?void 0:t.id)||null},yp=()=>A.useContext(PI);function ui(t){return(t==null?void 0:t.ownerDocument)||document}function II(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function $I(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:r,version:n}=e;return r+"/"+n}).join(" "):navigator.userAgent}function fc(t){return ui(t).defaultView||window}function So(t){return t?t instanceof fc(t).Element:!1}function vp(t){return t?t instanceof fc(t).HTMLElement:!1}function jI(t){if(typeof ShadowRoot>"u")return!1;const e=fc(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function AI(t){if(t.mozInputSource===0&&t.isTrusted)return!0;const e=/Android/i;return(e.test(II())||e.test($I()))&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function LI(t){return t.width===0&&t.height===0||t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType!=="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0}function RI(){return/apple/i.test(navigator.vendor)}function xu(t,e){const r=["mouse","pen"];return e||r.push("",void 0),r.includes(t)}function Kw(t,e){if(!t||!e)return!1;const r=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(r&&jI(r)){let n=e;for(;n;){if(t===n)return!0;n=n.parentNode||n.host}}return!1}function Qm(t){const e=A.useRef(t);return Mi(()=>{e.current=t}),e}const qm="data-floating-ui-safe-polygon";function eh(t,e,r){return r&&!xu(r)?0:typeof t=="number"?t:t==null?void 0:t[e]}const OI=function(t,e){e===void 0&&(e={});const{open:r,onOpenChange:n,dataRef:o,events:i,elements:{domReference:a,floating:l},refs:c}=t,{enabled:h=!0,delay:f=0,handleClose:p=null,mouseOnly:g=!1,restMs:w=0,move:C=!0}=e,S=yp(),P=Xw(),y=Qm(p),m=Qm(f),x=A.useRef(),k=A.useRef(),M=A.useRef(),b=A.useRef(),T=A.useRef(!0),I=A.useRef(!1),H=A.useRef(()=>{}),R=A.useCallback(()=>{var V;const Z=(V=o.current.openEvent)==null?void 0:V.type;return(Z==null?void 0:Z.includes("mouse"))&&Z!=="mousedown"},[o]);A.useEffect(()=>{if(!h)return;function V(){clearTimeout(k.current),clearTimeout(b.current),T.current=!0}return i.on("dismiss",V),()=>{i.off("dismiss",V)}},[h,i]),A.useEffect(()=>{if(!h||!y.current||!r)return;function V(){R()&&n(!1)}const Z=ui(l).documentElement;return Z.addEventListener("mouseleave",V),()=>{Z.removeEventListener("mouseleave",V)}},[l,r,n,h,y,o,R]);const O=A.useCallback(function(V){V===void 0&&(V=!0);const Z=eh(m.current,"close",x.current);Z&&!M.current?(clearTimeout(k.current),k.current=setTimeout(()=>n(!1),Z)):V&&(clearTimeout(k.current),n(!1))},[m,n]),F=A.useCallback(()=>{H.current(),M.current=void 0},[]),N=A.useCallback(()=>{if(I.current){const V=ui(c.floating.current).body;V.style.pointerEvents="",V.removeAttribute(qm),I.current=!1}},[c]);return A.useEffect(()=>{if(!h)return;function V(){return o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1}function Z(D){if(clearTimeout(k.current),T.current=!1,g&&!xu(x.current)||w>0&&eh(m.current,"open")===0)return;o.current.openEvent=D;const X=eh(m.current,"open",x.current);X?k.current=setTimeout(()=>{n(!0)},X):n(!0)}function ct(D){if(V())return;H.current();const X=ui(l);if(clearTimeout(b.current),y.current){r||clearTimeout(k.current),M.current=y.current({...t,tree:S,x:D.clientX,y:D.clientY,onClose(){N(),F(),O()}});const j=M.current;X.addEventListener("mousemove",j),H.current=()=>{X.removeEventListener("mousemove",j)};return}(x.current!=="touch"||!Kw(l,D.relatedTarget))&&O()}function et(D){V()||y.current==null||y.current({...t,tree:S,x:D.clientX,y:D.clientY,onClose(){N(),F(),O()}})(D)}if(So(a)){const D=a;return r&&D.addEventListener("mouseleave",et),l==null||l.addEventListener("mouseleave",et),C&&D.addEventListener("mousemove",Z,{once:!0}),D.addEventListener("mouseenter",Z),D.addEventListener("mouseleave",ct),()=>{r&&D.removeEventListener("mouseleave",et),l==null||l.removeEventListener("mouseleave",et),C&&D.removeEventListener("mousemove",Z),D.removeEventListener("mouseenter",Z),D.removeEventListener("mouseleave",ct)}}},[a,l,h,t,g,w,C,O,F,N,n,r,S,m,y,o]),Mi(()=>{var V;if(h&&r&&(V=y.current)!=null&&V.__options.blockPointerEvents&&R()){const et=ui(l).body;if(et.setAttribute(qm,""),et.style.pointerEvents="none",I.current=!0,So(a)&&l){var Z,ct;const D=a,X=S==null||(Z=S.nodesRef.current.find(j=>j.id===P))==null||(ct=Z.context)==null?void 0:ct.elements.floating;return X&&(X.style.pointerEvents=""),D.style.pointerEvents="auto",l.style.pointerEvents="auto",()=>{D.style.pointerEvents="",l.style.pointerEvents=""}}}},[h,r,P,l,a,S,y,o,R]),Mi(()=>{r||(x.current=void 0,F(),N())},[r,F,N]),A.useEffect(()=>()=>{F(),clearTimeout(k.current),clearTimeout(b.current),N()},[h,F,N]),A.useMemo(()=>{if(!h)return{};function V(Z){x.current=Z.pointerType}return{reference:{onPointerDown:V,onPointerEnter:V,onMouseMove(){r||w===0||(clearTimeout(b.current),b.current=setTimeout(()=>{T.current||n(!0)},w))}},floating:{onMouseEnter(){clearTimeout(k.current)},onMouseLeave(){i.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),O(!1)}}}},[i,h,w,r,n,O])};function DI(t){let e=t.activeElement;for(;((r=e)==null||(n=r.shadowRoot)==null?void 0:n.activeElement)!=null;){var r,n;e=e.shadowRoot.activeElement}return e}function rh(t,e){let r=t.filter(o=>{var i;return o.parentId===e&&((i=o.context)==null?void 0:i.open)}),n=r;for(;n.length;)n=t.filter(o=>{var i;return(i=n)==null?void 0:i.some(a=>{var l;return o.parentId===a.id&&((l=o.context)==null?void 0:l.open)})}),r=r.concat(n);return r}function BI(t){return"composedPath"in t?t.composedPath()[0]:t.target}const NI="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function HI(t){return vp(t)&&t.matches(NI)}const Yw=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function Zw(t,e){const r=Uw(t,Yw());e==="prev"&&r.reverse();const n=r.indexOf(DI(ui(t)));return r.slice(n+1)[0]}function zI(){return Zw(document.body,"next")}function FI(){return Zw(document.body,"prev")}function nh(t,e){const r=e||t.currentTarget,n=t.relatedTarget;return!n||!Kw(r,n)}function WI(t){Uw(t,Yw()).forEach(e=>{e.dataset.tabindex=e.getAttribute("tabindex")||"",e.setAttribute("tabindex","-1")})}function GI(t){t.querySelectorAll("[data-tabindex]").forEach(e=>{const r=e.dataset.tabindex;delete e.dataset.tabindex,r?e.setAttribute("tabindex",r):e.removeAttribute("tabindex")})}const Qw={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let UI;function Jm(t){t.key==="Tab"&&(t.target,clearTimeout(UI))}const t0=A.forwardRef(function(t,e){const[r,n]=A.useState();return Mi(()=>(RI()&&n("button"),document.addEventListener("keydown",Jm),()=>{document.removeEventListener("keydown",Jm)}),[]),A.createElement("span",Ld({},t,{ref:e,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,"data-floating-ui-focus-guard":"",style:Qw}))}),qw=A.createContext(null),VI=function(t){let{id:e,root:r}=t===void 0?{}:t;const[n,o]=A.useState(null),i=Vw(),a=KI();return Mi(()=>{const l=e?document.getElementById(e):null,c="data-floating-ui-portal";if(l){const h=document.createElement("div");return h.id=i,h.setAttribute(c,""),l.appendChild(h),o(h),()=>{h.remove()}}else{let h=(a==null?void 0:a.portalNode)||r||document.body,f=null;e&&(f=document.createElement("div"),f.id=e,h.appendChild(f));const p=document.createElement("div");return p.id=i,p.setAttribute(c,""),o(p),h=f||h,h.appendChild(p),()=>{var g;p.remove(),(g=f)==null||g.remove()}}},[e,r,a,i]),n},XI=t=>{let{children:e,id:r,root:n=null,preserveTabOrder:o=!0}=t;const i=VI({id:r,root:n}),[a,l]=A.useState(null),c=A.useRef(null),h=A.useRef(null),f=A.useRef(null),p=A.useRef(null),g=!!a&&!a.modal&&!!(n||i)&&o;return A.useEffect(()=>{if(!i||!o||a!=null&&a.modal)return;function w(C){i&&nh(C)&&(C.type==="focusin"?GI:WI)(i)}return i.addEventListener("focusin",w,!0),i.addEventListener("focusout",w,!0),()=>{i.removeEventListener("focusin",w,!0),i.removeEventListener("focusout",w,!0)}},[i,o,a==null?void 0:a.modal]),A.createElement(qw.Provider,{value:A.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:c,afterOutsideRef:h,beforeInsideRef:f,afterInsideRef:p,portalNode:i,setFocusManagerState:l}),[o,i])},g&&i&&A.createElement(t0,{"data-type":"outside",ref:c,onFocus:w=>{if(nh(w,i)){var C;(C=f.current)==null||C.focus()}else{const S=FI()||(a==null?void 0:a.refs.domReference.current);S==null||S.focus()}}}),g&&i&&A.createElement("span",{"aria-owns":i.id,style:Qw}),i&&$f.createPortal(e,i),g&&i&&A.createElement(t0,{"data-type":"outside",ref:h,onFocus:w=>{if(nh(w,i)){var C;(C=p.current)==null||C.focus()}else{const S=zI()||(a==null?void 0:a.refs.domReference.current);S==null||S.focus(),a!=null&&a.closeOnFocusOut&&(a==null||a.onOpenChange(!1))}}}))},KI=()=>A.useContext(qw);function e0(t){return vp(t.target)&&t.target.tagName==="BUTTON"}function r0(t){return HI(t)}const YI=function(t,e){e===void 0&&(e={});const{open:r,onOpenChange:n,dataRef:o,elements:{domReference:i}}=t,{enabled:a=!0,event:l="click",toggle:c=!0,ignoreMouse:h=!1,keyboardHandlers:f=!0}=e,p=A.useRef();return A.useMemo(()=>a?{reference:{onPointerDown(g){p.current=g.pointerType},onMouseDown(g){g.button===0&&(xu(p.current,!0)&&h||l!=="click"&&(r?c&&(!o.current.openEvent||o.current.openEvent.type==="mousedown")&&n(!1):(g.preventDefault(),n(!0)),o.current.openEvent=g.nativeEvent))},onClick(g){if(l==="mousedown"&&p.current){p.current=void 0;return}xu(p.current,!0)&&h||(r?c&&(!o.current.openEvent||o.current.openEvent.type==="click")&&n(!1):n(!0),o.current.openEvent=g.nativeEvent)},onKeyDown(g){p.current=void 0,f&&(e0(g)||(g.key===" "&&!r0(i)&&g.preventDefault(),g.key==="Enter"&&(r?c&&n(!1):n(!0))))},onKeyUp(g){f&&(e0(g)||r0(i)||g.key===" "&&(r?c&&n(!1):n(!0)))}}}:{},[a,o,l,h,f,i,c,r,n])},ZI=m0.useInsertionEffect,QI=ZI||(t=>t());function kl(t){const e=A.useRef(()=>{});return QI(()=>{e.current=t}),A.useCallback(function(){for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return e.current==null?void 0:e.current(...n)},[])}function oh(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const r=t;return r.target!=null&&e.contains(r.target)}const qI={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},JI={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},t$=t=>{var e,r;return{escapeKeyBubbles:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePressBubbles:typeof t=="boolean"?t:(r=t==null?void 0:t.outsidePress)!=null?r:!0}},e$=function(t,e){e===void 0&&(e={});const{open:r,onOpenChange:n,events:o,nodeId:i,elements:{reference:a,domReference:l,floating:c},dataRef:h}=t,{enabled:f=!0,escapeKey:p=!0,outsidePress:g=!0,outsidePressEvent:w="pointerdown",referencePress:C=!1,referencePressEvent:S="pointerdown",ancestorScroll:P=!1,bubbles:y}=e,m=yp(),x=Xw()!=null,k=kl(typeof g=="function"?g:()=>!1),M=typeof g=="function"?k:g,b=A.useRef(!1),{escapeKeyBubbles:T,outsidePressBubbles:I}=t$(y),H=kl(O=>{if(!r||!f||!p||O.key!=="Escape")return;const F=m?rh(m.nodesRef.current,i):[];if(!T&&(O.stopPropagation(),F.length>0)){let N=!0;if(F.forEach(V=>{var Z;if((Z=V.context)!=null&&Z.open&&!V.context.dataRef.current.__escapeKeyBubbles){N=!1;return}}),!N)return}o.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),n(!1)}),R=kl(O=>{const F=b.current;if(b.current=!1,F||typeof M=="function"&&!M(O))return;const N=BI(O);if(vp(N)&&c){const ct=N.clientWidth>0&&N.scrollWidth>N.clientWidth,et=N.clientHeight>0&&N.scrollHeight>N.clientHeight;let D=et&&O.offsetX>N.clientWidth;if(et&&fc(c).getComputedStyle(N).direction==="rtl"&&(D=O.offsetX<=N.offsetWidth-N.clientWidth),D||ct&&O.offsetY>N.clientHeight)return}const V=m&&rh(m.nodesRef.current,i).some(ct=>{var et;return oh(O,(et=ct.context)==null?void 0:et.elements.floating)});if(oh(O,c)||oh(O,l)||V)return;const Z=m?rh(m.nodesRef.current,i):[];if(Z.length>0){let ct=!0;if(Z.forEach(et=>{var D;if((D=et.context)!=null&&D.open&&!et.context.dataRef.current.__outsidePressBubbles){ct=!1;return}}),!ct)return}o.emit("dismiss",{type:"outsidePress",data:{returnFocus:x?{preventScroll:!0}:AI(O)||LI(O)}}),n(!1)});return A.useEffect(()=>{if(!r||!f)return;h.current.__escapeKeyBubbles=T,h.current.__outsidePressBubbles=I;function O(){n(!1)}const F=ui(c);p&&F.addEventListener("keydown",H),M&&F.addEventListener(w,R);let N=[];return P&&(So(l)&&(N=Vo(l)),So(c)&&(N=N.concat(Vo(c))),!So(a)&&a&&a.contextElement&&(N=N.concat(Vo(a.contextElement)))),N=N.filter(V=>{var Z;return V!==((Z=F.defaultView)==null?void 0:Z.visualViewport)}),N.forEach(V=>{V.addEventListener("scroll",O,{passive:!0})}),()=>{p&&F.removeEventListener("keydown",H),M&&F.removeEventListener(w,R),N.forEach(V=>{V.removeEventListener("scroll",O)})}},[h,c,l,a,p,M,w,r,n,P,f,T,I,H,R]),A.useEffect(()=>{b.current=!1},[M,w]),A.useMemo(()=>f?{reference:{onKeyDown:H,[qI[S]]:()=>{C&&(o.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),n(!1))}},floating:{onKeyDown:H,[JI[w]]:()=>{b.current=!0}}}:{},[f,o,C,w,S,n,H])};function r$(t){t===void 0&&(t={});const{open:e=!1,onOpenChange:r,nodeId:n}=t,o=sI(t),i=yp(),a=A.useRef(null),l=A.useRef({}),c=A.useState(()=>TI())[0],h=Vw(),[f,p]=A.useState(null),g=A.useCallback(m=>{const x=So(m)?{getBoundingClientRect:()=>m.getBoundingClientRect(),contextElement:m}:m;o.refs.setReference(x)},[o.refs]),w=A.useCallback(m=>{(So(m)||m===null)&&(a.current=m,p(m)),(So(o.refs.reference.current)||o.refs.reference.current===null||m!==null&&!So(m))&&o.refs.setReference(m)},[o.refs]),C=A.useMemo(()=>({...o.refs,setReference:w,setPositionReference:g,domReference:a}),[o.refs,w,g]),S=A.useMemo(()=>({...o.elements,domReference:f}),[o.elements,f]),P=kl(r),y=A.useMemo(()=>({...o,refs:C,elements:S,dataRef:l,nodeId:n,floatingId:h,events:c,open:e,onOpenChange:P}),[o,n,h,c,e,P,C,S]);return Mi(()=>{const m=i==null?void 0:i.nodesRef.current.find(x=>x.id===n);m&&(m.context=y)}),A.useMemo(()=>({...o,context:y,refs:C,elements:S,reference:w,positionReference:g}),[o,C,S,y,w,g])}function ih(t,e,r){const n=new Map;return{...r==="floating"&&{tabIndex:-1},...t,...e.map(o=>o?o[r]:null).concat(t).reduce((o,i)=>(i&&Object.entries(i).forEach(a=>{let[l,c]=a;if(l.indexOf("on")===0){if(n.has(l)||n.set(l,[]),typeof c=="function"){var h;(h=n.get(l))==null||h.push(c),o[l]=function(){for(var f,p=arguments.length,g=new Array(p),w=0;w<p;w++)g[w]=arguments[w];return(f=n.get(l))==null?void 0:f.map(C=>C(...g)).find(C=>C!==void 0)}}}else o[l]=c}),o),{})}}const n$=function(t){t===void 0&&(t=[]);const e=t,r=A.useCallback(i=>ih(i,t,"reference"),e),n=A.useCallback(i=>ih(i,t,"floating"),e),o=A.useCallback(i=>ih(i,t,"item"),t.map(i=>i==null?void 0:i.item));return A.useMemo(()=>({getReferenceProps:r,getFloatingProps:n,getItemProps:o}),[r,n,o])},o$=t=>{const{content:e,children:r,placement:n="bottom-start",trigger:o="click",offset:i=5}=t,[a,l]=A.useState(!1),c=k=>{var M;l(k),(M=t.onOpenChange)==null||M.call(t,k)},h=t.open===void 0?a:t.open,{x:f,y:p,strategy:g,refs:w,context:C}=r$({placement:n,open:h,onOpenChange:c,whileElementsMounted:oI,middleware:[J4({fallbackAxisSideDirection:"end"}),tI(i)]}),S=YI(C,{event:"mousedown",enabled:o==="click"}),P=e$(C),y=OI(C,{enabled:o==="hover"}),{getReferenceProps:m,getFloatingProps:x}=n$([S,y,P]);return _.jsxs(_.Fragment,{children:[K.cloneElement(r,{...m(),ref:w.setReference}),_.jsx(XI,{children:h&&_.jsx("div",{ref:w.setFloating,className:"sk-popover-content",style:{position:g,left:f??0,top:p??0},...x(),children:e})})]})};K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 12V17H12V12H17V11H12V6H11V11H6V12H11Z"})}));K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{d:"M5 19L21 19"}),_.jsx("line",{y1:"-1.5",x2:"12",y2:"-1.5",transform:"matrix(4.37114e-08 1 1 -4.37114e-08 12 5)",strokeWidth:"3"}),_.jsx("path",{d:"M15.5 9L15.5 17",strokeWidth:"3"})]}));K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{d:"M12 4L12 20"}),_.jsx("line",{x1:"6",y1:"9.5",x2:"18",y2:"9.5",strokeWidth:"3"}),_.jsx("line",{x1:"8",y1:"14.5",x2:"16",y2:"14.5",strokeWidth:"3"})]}));K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"currentColor",children:[_.jsx("path",{d:"M4 4L4 20"}),_.jsx("line",{x1:"6",y1:"9.5",x2:"18",y2:"9.5",strokeWidth:"3"}),_.jsx("line",{x1:"6",y1:"14.5",x2:"14",y2:"14.5",strokeWidth:"3"})]}));K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{d:"M20 4L20 20"}),_.jsx("line",{x1:"6",y1:"9.5",x2:"18",y2:"9.5",strokeWidth:"3"}),_.jsx("line",{x1:"10",y1:"14.5",x2:"18",y2:"14.5",strokeWidth:"3"})]}));K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{d:"M3 5L19 5"}),_.jsx("line",{y1:"-1.5",x2:"12",y2:"-1.5",transform:"matrix(4.37114e-08 1 1 -4.37114e-08 10 7)",strokeWidth:"3"}),_.jsx("line",{x1:"13.5",y1:"7",x2:"13.5",y2:"15",strokeWidth:"3"})]}));K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{d:"M4 12L20 12"}),_.jsx("line",{x1:"9.5",y1:"18",x2:"9.5",y2:"6",strokeWidth:"3"}),_.jsx("path",{d:"M14.5 16L14.5 8",strokeWidth:"3"})]}));K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M7 10L12 15L17 10"})}));const i$=K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M8 12L11 16L18 7"})}));K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M7 7L17 17M7 17L17 7",stroke:"#333333"})}));K.memo(()=>_.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("rect",{x:"3.08865",y:"7.49549",width:"1",height:"2.5",rx:"0.2",transform:"rotate(38.5717 3.08865 7.49549)",fill:"currentColor"}),_.jsx("rect",{width:"1",height:"2.5",rx:"0.2",transform:"matrix(-0.781828 0.623494 0.623494 0.781828 12.6592 7.49549)",fill:"currentColor"}),_.jsx("rect",{x:"6.08005",y:"9.07446",width:"1",height:"2.5",rx:"0.2",transform:"rotate(21.1013 6.08005 9.07446)",fill:"currentColor"}),_.jsx("rect",{width:"1",height:"2.5",rx:"0.2",transform:"matrix(-0.932945 0.360019 0.360019 0.932945 10 9.07446)",fill:"currentColor"}),_.jsx("path",{d:"M2 6.42055C2 6.42055 4 9.42055 8 9.42055C12 9.42055 14 6.42055 14 6.42055",stroke:"currentColor",strokeLinejoin:"round"})]}));K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("line",{x1:"5",y1:"5.5",x2:"15",y2:"5.5",stroke:"#333333"}),_.jsx("line",{x1:"10",y1:"4",x2:"10",y2:"5",stroke:"#333333"}),_.jsx("line",{x1:"13.3947",y1:"5.30697",x2:"6.39468",y2:"14.307",stroke:"#333333"}),_.jsx("line",{x1:"7.35355",y1:"6.64645",x2:"12.3536",y2:"11.6464",stroke:"#333333"}),_.jsx("path",{d:"M11.5 18L15.5629 9.75718L19.5 18",stroke:"#333333",strokeLinejoin:"bevel"}),_.jsx("line",{x1:"13",y1:"14.2098",x2:"18",y2:"14.2098",stroke:"#333333"})]}));K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("line",{x1:"4",y1:"6.5",x2:"20",y2:"6.5"}),_.jsx("line",{x1:"4",y1:"16",x2:"20",y2:"16",strokeWidth:"4"}),_.jsx("line",{x1:"4",y1:"10.5",x2:"20",y2:"10.5",strokeWidth:"3"})]}));K.memo(()=>_.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("rect",{x:"4",y:"7",width:"7",height:"5.77935",rx:"0.4",fill:"currentColor"}),_.jsx("path",{d:"M5.5 7.5V5.5C5.5 4.39543 6.39543 3.5 7.5 3.5C8.60457 3.5 9.5 4.39543 9.5 5.5V7.5",stroke:"currentColor"})]}));K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{d:"M8.0393 16.8461C7.11636 15.6636 5.60665 4.7907 5.60665 4.7907C5.60665 4.7907 15.7876 8.89536 16.7105 10.0778C17.6335 11.2602 15.9869 14.839 15.9869 14.839L18.2586 17.7494L15.1054 20.2106L12.8337 17.3002C12.8337 17.3002 8.96225 18.0285 8.0393 16.8461Z",stroke:"currentColor"}),_.jsx("path",{d:"M5.60666 4.7907L11.7596 12.6736",stroke:"currentColor"}),_.jsx("circle",{cx:"11.8572",cy:"12.7987",r:"1.25",transform:"rotate(-37.9736 11.8572 12.7987)",fill:"currentColor"})]}));K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M17.6992 9.30076L8.7158 18.2842C8.66927 18.3307 8.61198 18.3651 8.54902 18.3842L5.3017 19.3687C4.99583 19.4615 4.71011 19.1757 4.80285 18.8699L5.78742 15.6226C5.80651 15.5596 5.84084 15.5023 5.88737 15.4558L14.8708 6.47233M17.6992 9.30076L19.8593 7.14071C20.0155 6.9845 20.0155 6.73123 19.8593 6.57502L17.5966 4.31228C17.4403 4.15607 17.1871 4.15607 17.0309 4.31228L14.8708 6.47233M17.6992 9.30076L14.8708 6.47233",stroke:"currentColor"})}));K.memo(()=>_.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("circle",{cx:"8",cy:"8",r:"1.5",fill:"currentColor"})}));K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 12H6V11H17V12Z"})}));const s$=K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M9.5 7.5L14.5 12.5L9.5 17.5"})}));K.memo(()=>_.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{d:"M8 5C4 5 2 8 2 8C2 8 4 11 8 11C12 11 14 8 14 8C14 8 12 5 8 5Z",stroke:"currentColor",strokeLinejoin:"round"}),_.jsx("circle",{cx:"8",cy:"8",r:"1.75",fill:"currentColor"})]}));K.memo(()=>_.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M10.8183 5.3029L8.1715 9.71417C8.09382 9.84364 7.90618 9.84364 7.8285 9.71417L5.18174 5.3029C5.10176 5.16959 5.19778 5 5.35324 5H10.6468C10.8022 5 10.8982 5.16959 10.8183 5.3029Z",fill:"currentColor"})}));K.memo(()=>_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",children:_.jsx("path",{fillRule:"evenodd",transform:"translate(0.25 0.25)  rotate(0 7.75 7.556366182551985)",d:"M5.00688 12.0551C4.91688 12.0551 4.84688 12.1051 4.84688 12.1651C4.84688 12.2451 4.91688 12.2951 5.01688 12.2851C5.11688 12.2851 5.18688 12.2351 5.18688 12.1651C5.18688 12.0951 5.10688 12.0451 5.00688 12.0551Z M4.34812 12.1793C4.42812 12.2093 4.51812 12.1793 4.53812 12.1193C4.55812 12.0593 4.49812 11.9893 4.40812 11.9593C4.32812 11.9393 4.23812 11.9693 4.20812 12.0293C4.18812 12.0893 4.25812 12.1593 4.34812 12.1793Z M5.44907 12.1237C5.45907 12.1937 5.53907 12.2337 5.63907 12.2137C5.72907 12.1837 5.78907 12.1237 5.77907 12.0637C5.76907 12.0037 5.68907 11.9637 5.58907 11.9737C5.49907 11.9937 5.43907 12.0537 5.44907 12.1237Z M7.65 0C3.32 0 0 3.29 0 7.63C0 11.09 2.18 14.06 5.3 15.1C5.7 15.17 5.84 14.93 5.84 14.72C5.84 14.53 5.83 13.46 5.83 12.8C5.83 12.8 3.64 13.27 3.18 11.87C3.18 11.87 2.83 10.96 2.31 10.73C2.31 10.73 1.6 10.24 2.36 10.25C2.36 10.25 3.14 10.31 3.57 11.05C4.25 12.26 5.4 11.91 5.85 11.71C5.92 11.21 6.12 10.86 6.35 10.65C4.6 10.46 2.84 10.21 2.84 7.2C2.84 6.34 3.08 5.91 3.58 5.36C3.49 5.16 3.23 4.32 3.66 3.24C4.31 3.03 5.81 4.08 5.81 4.08C6.44 3.91 7.11 3.82 7.78 3.82C8.44 3.82 9.11 3.91 9.74 4.08C9.74 4.08 11.24 3.03 11.89 3.24C12.32 4.32 12.06 5.16 11.98 5.36C12.48 5.91 12.78 6.34 12.78 7.2C12.78 10.22 10.94 10.46 9.19 10.65C9.48 10.9 9.73 11.37 9.73 12.1C9.73 13.16 9.72 14.46 9.72 14.72C9.72 14.92 9.86 15.17 10.26 15.09C13.38 14.06 15.5 11.09 15.5 7.63C15.5 3.29 11.98 0 7.65 0Z M3.06231 10.9369C3.11231 10.9869 3.18231 11.0169 3.22231 10.9669C3.26231 10.9369 3.25231 10.8669 3.20231 10.8069C3.15231 10.7569 3.08231 10.7369 3.04231 10.7769C2.99231 10.8069 3.00231 10.8769 3.06231 10.9369Z M2.77304 10.6435C2.82304 10.6735 2.88304 10.6735 2.90304 10.6235C2.93304 10.5835 2.89304 10.5335 2.83304 10.5035C2.77304 10.4835 2.72304 10.4935 2.70304 10.5235C2.68304 10.5635 2.71304 10.6135 2.77304 10.6435Z M3.75443 11.8362C3.82443 11.9062 3.91443 11.9162 3.95443 11.8662C3.99443 11.8262 3.97443 11.7262 3.91443 11.6662C3.84443 11.5962 3.75443 11.5862 3.71443 11.6362C3.66443 11.6762 3.68443 11.7762 3.75443 11.8362Z M3.35875 11.3601C3.40875 11.4301 3.48875 11.4701 3.52875 11.4301C3.57875 11.3901 3.57875 11.3101 3.52875 11.2401C3.48875 11.1701 3.40875 11.1401 3.35875 11.1801C3.30875 11.2101 3.30875 11.2901 3.35875 11.3601Z "})}));K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("circle",{cx:"12",cy:"12",r:"7.5"})}));K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M18.7717 7.39806H17.7548C17.5361 7.39806 17.3568 7.56657 17.3568 7.7767V11.3197H16.6395V6.01456C16.6395 5.55479 16.248 5.18239 15.7647 5.18239H14.8943C14.6712 5.18239 14.4876 5.35506 14.4876 5.56935V11.3197H13.7703V4.89528C13.7703 4.67684 13.5844 4.5 13.3547 4.5H12.4078C11.9726 4.5 11.6205 4.83495 11.6205 5.24896V11.3176H10.9032V6.4785C10.9032 6.23301 10.4364 6.01456 10.1784 6.01456L9.53862 6.03329C9.10343 6.03329 8.75352 6.36824 8.75352 6.78017V15.7698L5.939 13.8495C5.53005 13.5915 4.97676 13.7309 4.75589 14.1491C4.75589 14.1491 4.58968 14.4695 4.53064 14.5756C4.47378 14.6817 4.50221 14.7816 4.56563 14.8523C4.6203 14.9126 7.42171 18.0333 8.34895 19.0527C8.61794 19.3481 9.12092 19.5 9.55393 19.5H18.085C18.8679 19.5 19.384 18.8967 19.384 18.154L19.4999 11.3197V8.09709C19.5065 7.71013 19.1784 7.39806 18.7717 7.39806Z"})}));K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.3915 5.35404L5.35308 19.354L4.64694 18.646L18.6853 4.64597L19.3915 5.35404Z"})}));K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 12H6V11H17V12Z"}),_.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 16H6V15H17V16Z"}),_.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 8H6V7H17V8Z"})]}));K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M12 5L19.7942 18.5H4.20577L12 5Z",stroke:"currentColor",strokeWidth:"1"})}));K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("rect",{x:"4.5",y:"6.5",width:"16",height:"11",rx:"0.5"})}));K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M14.0855 13.0738L13.9614 13.1256L13.8801 13.2327L9.24626 19.3343L5.72813 4.87748L19.1707 10.9487L14.0855 13.0738Z",stroke:"currentColor"})}));K.memo(()=>_.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:_.jsx("path",{d:"M12 4L13.7961 9.52786H19.6085L14.9062 12.9443L16.7023 18.4721L12 15.0557L7.29772 18.4721L9.09383 12.9443L4.39155 9.52786H10.2039L12 4Z",stroke:"currentColor"})}));K.memo(()=>_.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("rect",{x:"11",y:"4",width:"1",height:"16"}),_.jsx("rect",{x:"5",y:"4",width:"13",height:"1"}),_.jsx("rect",{x:"5",y:"5",width:"1",height:"3"}),_.jsx("rect",{x:"17",y:"5",width:"1",height:"3"}),_.jsx("rect",{x:"8",y:"19",width:"7",height:"1"})]}));K.memo(()=>_.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[_.jsx("rect",{x:"4",y:"7.5",width:"7",height:"5.77935",rx:"0.4",fill:"currentColor"}),_.jsx("path",{d:"M9.5 7.5V5.5C9.5 4.39543 10.3954 3.5 11.5 3.5C12.6046 3.5 13.5 4.39543 13.5 5.5V7",stroke:"currentColor"})]}));var Rd={},a$={get exports(){return Rd},set exports(t){Rd=t}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var n=[],o=0;o<arguments.length;o++){var i=arguments[o];if(i){var a=typeof i;if(a==="string"||a==="number")n.push(i);else if(Array.isArray(i)){if(i.length){var l=r.apply(null,i);l&&n.push(l)}}else if(a==="object"){if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]")){n.push(i.toString());continue}for(var c in i)e.call(i,c)&&i[c]&&n.push(c)}}}return n.join(" ")}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(a$);const l$=Rd,u$=t=>{const{onClick:e,label:r,suffix:n,check:o,subItems:i,emitter:a}=t;A.useEffect(()=>{const f=()=>{h(!1)};return a.on("openSubMenu",f),()=>{a.off("openSubMenu",f)}},[a,t.itemKey]);const l=_.jsxs(_.Fragment,{children:[_.jsxs("div",{className:"sk-dropdown-item",children:[_.jsx("div",{className:"sk-dropdown-item-icon-box",children:o&&_.jsx(i$,{})}),r]}),n&&_.jsx("span",{children:n}),i&&_.jsx(s$,{})]}),[c,h]=A.useState(!1);return _.jsx(_.Fragment,{children:i?_.jsx(Jw,{items:i,onClick:e,open:c,placement:"right-start",offset:{mainAxis:0,crossAxis:-8},children:_.jsx("div",{className:l$("sk-dropdown-item-wrap",{active:c}),onMouseEnter:()=>{a.emit("openSubMenu",t.itemKey),h(!0)},children:l})}):_.jsx("div",{className:"sk-dropdown-item-wrap",onClick:()=>e({key:t.itemKey}),onMouseEnter:()=>{a.emit("openSubMenu",t.itemKey)},children:l})})},c$=t=>t.type==="divider",Jw=t=>{const{items:e,children:r,placement:n="bottom-start"}=t,[o,i]=A.useState(!1),a=t.open===void 0?o:t.open,l=h=>{var f;i(h),(f=t.onOpenChange)==null||f.call(t,h)},c=A.useRef(new ZM);return _.jsx(o$,{open:a,onOpenChange:l,placement:n,offset:t.offset,trigger:t.trigger,content:_.jsx("div",{className:"sk-dropdown-content",children:e.map((h,f)=>c$(h)?_.jsx("div",{className:"sk-dropdown-item-separator"},f):_.jsx(u$,{itemKey:h.key,label:h.label,suffix:h.suffix,check:h.check,subItems:h.children,emitter:c.current,onClick:p=>{var g;(g=t.onClick)!=null&&g.call(t,p)||l(!1)}},h.key))}),children:K.cloneElement(r)})},h$=({children:t,onMouseDown:e,className:r,tooltipContent:n,hotkey:o})=>_.jsxs("div",{className:sc("tool-btn",r),onMouseDown:()=>{e()},children:[t,_.jsxs("div",{className:"tooltip",children:[n,o&&_.jsx("span",{className:"tool-hotkey",children:o})]})]}),d$=()=>{const t=$a(),e=A.useContext(Oa),[r,n]=A.useState({});A.useEffect(()=>{if(!e)return;n(e.setting.getAttrs());const l=c=>{n(c)};return e.setting.on("update",l),()=>{e.setting.off("update",l)}},[e]);const o=l=>t.formatMessage(l),i=[{key:"import",label:o({id:"import.originFile"})},{key:"export",label:o({id:"export.originFile"})},{type:"divider"},{key:"preference",label:o({id:"preference"}),children:[{key:"keepToolSelectedAfterUse",check:r.keepToolSelectedAfterUse,label:o({id:"keepToolSelectedAfterUse"})},{key:"invertZoomDirection",check:r.invertZoomDirection,label:o({id:"invertZoomDirection"})},{key:"highlightLayersOnHover",check:r.highlightLayersOnHover,label:o({id:"highlightLayersOnHover"})},{key:"flipObjectsWhileResizing",check:r.flipObjectsWhileResizing,label:o({id:"flipObjectsWhileResizing"})}]}],a=({key:l})=>{if(!e)return;let c=!1;switch(l){case"import":RT.importOriginFile(e);break;case"export":PT.exportOriginFile(e);break;case"keepToolSelectedAfterUse":case"invertZoomDirection":case"highlightLayersOnHover":case"flipObjectsWhileResizing":e.setting.toggle(l),c=!0;break}return c};return _.jsx(Jw,{items:i,onClick:a,children:_.jsx("div",{className:"sk-ed-menu-btn",children:_.jsx(bM,{})})})},f$=()=>{const t=A.useContext(Oa),e=$a(),[r,n]=A.useState(""),[o,i]=A.useState([]),[a,l]=A.useState(!1);A.useEffect(()=>{if(t){n(t.toolManager.getActiveToolName()||""),i(t.toolManager.getEnableTools()),l(t.pathEditor.isActive());const h=g=>{l(g)},f=g=>{n(g)},p=g=>{i(g)};return t.toolManager.on("switchTool",f),t.toolManager.on("changeEnableTools",p),t.pathEditor.on("toggle",h),()=>{t.toolManager.off("switchTool",f),t.toolManager.off("changeEnableTools",p),t.pathEditor.off("toggle",h)}}},[t]);const c={select:{name:"select",hotkey:"V",intlId:"tool.select",icon:_.jsx(jm,{})},drawRect:{name:"drawRect",hotkey:"R",intlId:"tool.rectangle",icon:_.jsx(TM,{})},drawEllipse:{name:"drawEllipse",hotkey:"O",intlId:"tool.ellipse",icon:_.jsx(EM,{})},pathSelect:{name:"pathSelect",hotkey:"V",intlId:"tool.select",icon:_.jsx(jm,{})},drawPath:{name:"drawPath",hotkey:"P",intlId:"tool.pen",icon:_.jsx(vM,{})},pencil:{name:"pencil",hotkey:`${fo?"Shift+":"⇧"}P`,intlId:"tool.pencil",icon:_.jsx(wM,{})},drawLine:{name:"drawLine",hotkey:"L",intlId:"tool.line",icon:_.jsx(_M,{})},drawRegularPolygon:{name:"drawRegularPolygon",hotkey:"",intlId:"tool.polygon",icon:_.jsx(kM,{})},drawStar:{name:"drawStar",hotkey:"",intlId:"tool.star",icon:_.jsx(MM,{})},drawText:{name:"drawText",hotkey:"T",intlId:"tool.text",icon:_.jsx(PM,{})},dragCanvas:{name:"dragCanvas",hotkey:"H",intlId:"tool.hand",icon:_.jsx(CM,{})}};return _.jsxs("div",{className:"suika-tool-bar",children:[_.jsx(d$,{}),o.map(h=>{const f=c[h];return _.jsx(h$,{className:sc({active:r===f.name}),tooltipContent:e.formatMessage({id:f.intlId}),hotkey:f.hotkey,onMouseDown:()=>{t==null||t.toolManager.setActiveTool(f.name)},children:f.icon},f.name)}),a&&_.jsx(UM,{style:{marginLeft:"16px",userSelect:"none"},onClick:()=>{t&&t.pathEditor.inactive()},children:e.formatMessage({id:"done"})})]})},p$=({title:t})=>_.jsxs("div",{className:"sk-header",children:[_.jsx(f$,{}),_.jsx(GM,{value:t}),_.jsx("div",{className:"sk-right-area",children:_.jsx(WM,{})})]}),tx=({name:t,children:e,active:r=!1,activeSecond:n=!1,id:o,activeIds:i=[],level:a=0,hlId:l,visible:c,visibleSecond:h=!0,lock:f,lockSecond:p=!1,toggleVisible:g,toggleLock:w,setHlId:C,setName:S,setSelectedGraph:P})=>{const y=a*16,[m,x]=A.useState(!1),k=A.useRef(null),[M,b]=A.useState(t);A.useEffect(()=>{b(t)},[t]);const T=()=>{x(!0),setTimeout(()=>{const N=k.current;N&&(N.value=t,N.select())},0)},I=N=>{N.key==="Enter"&&!N.nativeEvent.isComposing&&N.currentTarget.blur()},H=()=>{var V;const N=(V=k.current)==null?void 0:V.value;N&&S&&(S(o,N),b(N)),x(!1)},R=l===o,O=c&&h,F=f||p;return _.jsxs(_.Fragment,{children:[_.jsxs("div",{className:sc("sk-layer-item",{"sk-active":r,"sk-active-second":r?!1:n,"sk-hidden":!O,"sk-hover":R,"sk-editing":m}),onMouseDown:N=>{P&&P(o,N)},onMouseEnter:()=>{C&&C(o)},onMouseLeave:()=>{C&&C("")},onDoubleClick:T,children:[_.jsx("div",{style:{width:y,minWidth:y}}),_.jsx("div",{className:"sk-group-collapse-btn",children:e!=null&&e.length?_.jsx(SM,{}):void 0}),!m&&_.jsx("span",{className:"sk-layout-name",children:M},"span"),m&&_.jsx("input",{ref:k,onMouseDown:N=>N.stopPropagation(),onKeyDown:I,onBlur:H}),_.jsxs("div",{className:"sk-layer-item-actions",onMouseDown:N=>N.stopPropagation(),onDoubleClick:N=>N.stopPropagation(),children:[_.jsx("span",{className:"sk-action-btn",style:{visibility:F?"visible":void 0},onMouseDown:()=>{w(o)},children:f?_.jsx(yM,{}):p?_.jsx($m,{}):_.jsx(IM,{})}),_.jsx("span",{className:"sk-action-btn",style:{visibility:O?void 0:"visible"},onMouseDown:()=>{g&&g(o)},children:c?h?_.jsx(xM,{}):_.jsx($m,{}):_.jsx(mM,{})})]})]}),e&&_.jsx("div",{className:"layer-item-children",children:[...e].reverse().map(N=>_.jsx(tx,{id:N.id,name:N.name,active:i.includes(N.id),activeSecond:n||i.includes(N.id),level:a+1,children:N.children,activeIds:i,hlId:l,visible:N.visible,visibleSecond:O,lock:N.lock,lockSecond:F,setName:S,toggleVisible:g,toggleLock:w,setHlId:C,setSelectedGraph:P},N.id))})]})},g$=({treeData:t,activeIds:e=[],hlId:r,toggleVisible:n,toggleLock:o,setHlId:i,setName:a,setSelectedGraph:l})=>_.jsx("div",{children:[...t].reverse().map(c=>_.jsx(tx,{active:e.includes(c.id),activeSecond:e.includes(c.id),id:c.id,name:c.name,children:c.children,activeIds:e,hlId:r,visible:c.visible,lock:c.lock,toggleVisible:n,toggleLock:o,setHlId:i,setName:a,setSelectedGraph:l},c.id))}),m$=()=>{const t=A.useContext(Oa),[e,r]=A.useState([]),[n,o]=A.useState(new Set),[i,a]=A.useState("");A.useEffect(()=>{var g;t&&(r(t.sceneGraph.toObjects()),t.sceneGraph.on("render",()=>{r(t.sceneGraph.toObjects()),o(t.selectedElements.getIdSet())}),a(((g=t.selectedElements.getHighlightedItem())==null?void 0:g.attrs.id)||""),t.selectedElements.on("highlightedItemChange",w=>{const C=w?w.attrs.id:"";a(C)}))},[t]);const l=(g,w)=>{t&&(w.ctrlKey||w.metaKey?t.selectedElements.toggleItemById(g,{disableParentAndChildCoexist:!0}):t.selectedElements.setItemsById(new Set([g])),t.render())},c=g=>{if(t){const w=t.doc.getGraphicsById(g)??null;t.selectedElements.setHighlightedItem(w),t.render()}},h=(g,w)=>{if(t){const C=t.doc.getGraphicsById(g);C&&C.attrs.objectName!==w&&(Qs.setGraphName(t,C,w),t.render())}},f=g=>{if(t){const w=t.doc.getGraphicsById(g);w&&(Qs.toggleVisible(t,[w]),t.render())}},p=g=>{if(t){const w=t.doc.getGraphicsById(g);w&&(Qs.toggleLock(t,[w]),t.render())}};return _.jsx("div",{className:"layer-panel",children:_.jsx(g$,{treeData:e,activeIds:Array.from(n),hlId:i,toggleVisible:f,toggleLock:p,setHlId:c,setName:h,setSelectedGraph:l})})},n0=48,o0=240*2*0,y$=()=>{const t=A.useRef(null),[e,r]=A.useState(null);return A.useEffect(()=>{if(t.current){const n=new dM({containerElement:t.current,width:document.body.clientWidth-o0,height:document.body.clientHeight-n0,offsetY:48,offsetX:240,showPerfMonitor:!1});window.editor=n,console.log("editor",n),new fM(n);const o=O_(()=>{n.viewportManager.setViewport({width:document.body.clientWidth-o0,height:document.body.clientHeight-n0}),n.render()},10,{leading:!1});return window.addEventListener("resize",o),r(n),()=>{n.destroy(),window.removeEventListener("resize",o),o.cancel()}}},[t]),_.jsx("div",{children:_.jsxs(Oa.Provider,{value:e,children:[_.jsx(p$,{title:"测量工具"}),_.jsxs("div",{className:"body",children:[_.jsx(m$,{}),_.jsx("div",{ref:t,style:{position:"absolute",left:240,top:0}})]})]})})},i0=new aE,v$="Fill",w$="Stroke",x$="Mixed",S$="No Selected Shapes",E$="Upload File",C$="Group selection",_$="Ungroup",b$="Show/Hide",k$="Lock/Unlock",T$="Preference",M$="Keep tool selected after use",P$="Invert zoom direction",I$="Highlight layers on hover",$$="Flip objects while resizing",j$="Done",A$={delete:"Delete",fill:v$,stroke:w$,mixed:x$,noSelectedShapes:S$,uploadFile:E$,"tool.select":"Select","tool.rectangle":"Rectangle","tool.ellipse":"Ellipse","tool.pen":"Pen","tool.line":"Line","tool.polygon":"Polygon","tool.star":"Star","tool.text":"Text","tool.hand":"Hand","tool.pencil":"Pencil","command.copy":"Copy","command.copyAsSVG":"Copy as SVG","command.pasteHere":"Paste here","command.undo":"Undo","command.redo":"Redo","command.selectAll":"Select all","arrange.forward":"Forward","arrange.backward":"Backward","arrange.front":"Bring to Front","arrange.back":"Send to Back","zoom.zoomIn":"Zoom in","zoom.zoomOut":"Zoom out","zoom.zoomToFit":"Zoom to fit","zoom.zoomToSelection":"Zoom to selection","zoom.zoomTo50":"Zoom to 50%","zoom.zoomTo100":"Zoom to 100%","zoom.zoomTo200":"Zoom to 200%","setting.grid.pixelGrid":"Pixel grid","setting.grid.snapToPixelGrid":"Snap to pixel grid","setting.rulers":"rulers","paintType.solid":"Solid","paintType.image":"Image",group:C$,ungroup:_$,showOrHide:b$,lockOrUnlock:k$,"flip.horizontal":"Flip Horizontal","flip.vertical":"Flip Horizontal","import.originFile":"Import local file","export.originFile":"Save local copy",preference:T$,keepToolSelectedAfterUse:M$,invertZoomDirection:P$,highlightLayersOnHover:I$,flipObjectsWhileResizing:$$,done:j$},L$="填充",R$="描边",O$="多值",D$="没有选中的图形",B$="上传文件",N$="创建编组",H$="取消编组",z$="显示/隐藏",F$="锁定/解锁",W$="偏好设置",G$="使用工具后保持选中状态",U$="反转缩放方向",V$="鼠标悬停时高亮图层",X$="缩放时对图形进行翻转",K$="完成",Y$={delete:"删除",fill:L$,stroke:R$,mixed:O$,noSelectedShapes:D$,uploadFile:B$,"tool.select":"选择","tool.rectangle":"矩形","tool.ellipse":"圆","tool.pen":"钢笔","tool.line":"直线","tool.polygon":"多边形","tool.star":"星形","tool.text":"文字","tool.hand":"拖拽画布","tool.pencil":"铅笔","command.copy":"复制","command.copyAsSVG":"复制 SVG 代码","command.pasteHere":"粘贴到此处","command.undo":"撤销","command.redo":"重做","command.selectAll":"全选","arrange.forward":"上移一层","arrange.backward":"下移一层","arrange.front":"移到顶部","arrange.back":"移到底部","zoom.zoomIn":"放大","zoom.zoomOut":"缩小","zoom.zoomToFit":"适应画布","zoom.zoomToSelection":"适应选中图形","zoom.zoomTo50":"50%","zoom.zoomTo100":"100%","zoom.zoomTo200":"200%","setting.grid.pixelGrid":"显示像素网格","setting.grid.snapToPixelGrid":"对齐像素网格","setting.rulers":"显示标尺","paintType.solid":"纯色","paintType.image":"图片",group:N$,ungroup:H$,showOrHide:z$,lockOrUnlock:F$,"flip.horizontal":"水平翻转","flip.vertical":"垂直翻转","import.originFile":"从本地导入","export.originFile":"导出到本地",preference:W$,keepToolSelectedAfterUse:G$,invertZoomDirection:U$,highlightLayersOnHover:V$,flipObjectsWhileResizing:X$,done:K$},Z$=A$,Q$=Y$,q$={zh:Q$,en:Z$},J$=()=>(localStorage.getItem("suika-locale")||navigator.language).startsWith("zh")?"zh":"en";function t6(){const[t,e]=A.useState(J$());return A.useEffect(()=>{const r=n=>{e(n)};return i0.on("localeChange",r),()=>{i0.off("localeChange",r)}}),_.jsx(tE,{locale:t,messages:q$[t],children:_.jsx("div",{className:"suika",children:_.jsx(y$,{})})})}const e6=sh.createRoot(document.getElementById("root"));e6.render(_.jsx(K.StrictMode,{children:_.jsx(t6,{})}));
